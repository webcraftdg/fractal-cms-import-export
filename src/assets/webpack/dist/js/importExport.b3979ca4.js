(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&"SCRIPT"===s.currentScript.tagName.toUpperCase()&&(e=s.currentScript.src),!e)){var i=s.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"})();var e={};t.r(e),t.d(e,{bindables:()=>rm,default:()=>im,dependencies:()=>nm,name:()=>em,register:()=>am,template:()=>sm});var s={};t.r(s),t.d(s,{ImportConfigColumns:()=>Nm});const i={get:(t,e)=>e[Symbol.metadata]?.[t],define(t,e,...s){let i=Object.getOwnPropertyDescriptor(e,Symbol.metadata)?.value;null==i&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=s.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:return void(i[s[0]]=t);case 2:return void(i[s[0]]=i[s[1]]=t);default:for(let e=0;e<n;++e)i[s[e]]=t;return}},has(t,e){const s=e[Symbol.metadata];return null!=s&&t in s},delete(t,e){const s=e[Symbol.metadata];null!=s&&Reflect.deleteProperty(s,t)}},n=Object.freeze,r=Object.assign,o=String,a=i.get,h=i.define,l=t=>t instanceof Promise,c=t=>t instanceof Array,u=t=>t instanceof Set,d=t=>t instanceof Map,p=t=>t instanceof Object;function f(t){return"object"==typeof t&&null!==t||"function"==typeof t}const g=t=>"function"==typeof t,m=t=>"string"==typeof t,v=()=>Object.create(null),b=Object.is,w=(t,...e)=>{const s=o(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(o)}`)},y=(()=>{const t={};let e=!1,s=0,i=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(0|r)===r;case"string":if(e=t[r],void 0!==e)return e;if(s=r.length,0===s)return t[r]=!1;for(i=0,n=0;n<s;++n)if(i=r.charCodeAt(n),0===n&&48===i&&s>1||i<48||i>57)return t[r]=!1;return t[r]=!0;default:return!1}}})(),C=function(){const t=r(v(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,l=t.charAt(0),c=e(l),u=0;for(;u<i;++u)n=h,a=l,h=c,l=t.charAt(u+1),c=e(l),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===c),o+=s(a,r),r=!1);return o}}(),$=function(){const t=v(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=C(s,e)),i}}(),k=function(){const t=v();return e=>{let s=t[e];return void 0===s&&(s=$(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),x=function(){const t=v(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=C(s,e)),i}}(),T=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},S=(t,e)=>{const s=e.name;e.addInitializer(function(){Reflect.defineProperty(this,s,{value:t.bind(this),writable:!0,configurable:!0,enumerable:!1})})},A=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},R=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw w(20)},E=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function I(...t){return r(v(),...t)}const O=(()=>{const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),null==e&&(i=(s=n.toString()).length,e=i>28&&s.indexOf("[native code] }")===i-15,t.set(n,e)),e)})(),P=(t,e)=>l(t)?t.then(e):e(t),M=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],l(e=t[n])&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},B=(t,e)=>new Rt(t,1,e),j=(t,e)=>new Rt(t,2,e),L=(t,e)=>new Rt(e,5,t),N=new WeakMap,D=t=>(e,s,i)=>{let n=N.get(e);if(void 0===n&&N.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r},V={instance:(t,e)=>new Rt(t,0,e),singleton:B,transient:j,callback:(t,e)=>new Rt(t,3,e),cachedCallback:(t,e)=>new Rt(t,3,D(e)),aliasTo:L,defer:(t,...e)=>new It(t,e)},F=function(t){return function(e){e.register(B(this,this),L(this,t))}},_="au:annotation",q=(t,e)=>void 0===e?`${_}:${t}`:`${_}:${t}:${e}`,U="au:resource",z=(t,e,s)=>null==e?`${U}:${t}`:null==s?`${U}:${t}:${e}`:`${U}:${t}:${e}:${s}`,K={annotation:n({name:"au:annotation",appendTo:(t,e)=>{const s=a(_,t);void 0===s?h([e],t,_):s.push(e)},set(t,e,s){h(s,t,q(e))},get:(t,e)=>a(q(e),t),getKeys(t){let e=a(_,t);return void 0===e&&h(e=[],t,_),e},isKey:t=>t.startsWith(_),keyFor:q})},H=Object.prototype.hasOwnProperty;function W(t,e,s,i){let n=a(q(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&H.call(s,t)?n:i()):n):n}function G(t,e,s){let i=a(q(t),e);return void 0===i?(i=e[t],void 0!==i&&H.call(e,t)?i:s()):i}function X(t,e,s){const i=e[t];return void 0===i?s():i}const J=Symbol.for("au:registrable"),Y={none(t){throw w(2,t)},singleton:t=>new Rt(t,1,t),transient:t=>new Rt(t,2,t)};class Q{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===Q.DEFAULT?Q.DEFAULT:new Q(t.inheritParentResources??!1,t.defaultResolver??Y.singleton)}}Q.DEFAULT=Q.from({});const Z=t=>new it(null,Q.from(t)),tt=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let et=0,st=null;class it{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++et,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(xt,ct)}register(...t){if(100===++this.i)throw w(6,...t);let e,s,i,n,r,o,h=0,l=t.length;for(;h<l;++h)if(e=t[h],f(e))if(ut(e))e.register(this);else if(null!=(o=a(U,e)))o.register(this);else if(pt(e)){const t=e[Symbol.metadata]?.[J];if(ut(t))t.register(this);else if(m(e.$au?.type)){const t=e.$au,s=(e.aliases??Ot).concat(t.aliases??Ot);let i=`${U}:${t.type}:${t.name}`;if(this.has(i,!1))continue;for(L(e,i).register(this),this.has(e,!1)||B(e,e).register(this),n=0,r=s.length;n<r;++n)i=`${U}:${t.type}:${s[n]}`,this.has(i,!1)||L(e,i).register(this)}else B(e,e).register(this)}else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],f(i)&&(ut(i)?i.register(this):this.register(i));return--this.i,this}registerResolver(t,e,s=!1){ot(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),ft(t)){if(void 0!==this.res[t])throw w(7,t);this.res[t]=e}}else n instanceof Rt&&4===n.$?n._state.push(e):i.set(t,new Rt(t,4,[n,e]));return s&&this.u.set(t,e),e}deregister(t){ot(t);const e=this.h.get(t);null!=e&&(this.h.delete(t),ft(t)&&delete this.res[t],this.u.has(t)&&(e.dispose(),this.u.delete(t)))}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(ot(t),void 0!==t.resolve)return t;const s=st;let i,n,r=st=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=dt(t)?this:r,e?this.C(t,n):null;r=r.t}}finally{st=s}return null}has(t,e=!1){return this.h.has(t)||ft(t)&&t in this.res||((e&&this.t?.has(t,!0))??!1)}get(t){if(ot(t),t.$isResolver)return t.resolve(this,this);const e=st;let s,i,n=st=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=dt(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.t}}finally{st=e}throw w(8,t)}getAll(t,e=!1){ot(t);const s=st,i=st=this;let n,r=i,o=Ot;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(lt(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return lt(n,r,i);if(r=r.t,null==r)return Ot}}finally{st=s}return Ot}invoke(t,e){if(O(t))throw w(15,t);const s=st;st=this;try{return void 0===e?new t(...yt(t).map(at,this)):new t(...yt(t).map(at,this),...e)}finally{st=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(O(t))throw w(15,t);this.R.set(t,e=new nt(t,yt(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===Q.DEFAULT?new it(this,this.config):new it(this,Q.from({...this.config,inheritParentResources:!1})):new it(this,Q.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose?.(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=m(e)?`${U}:${t}:${e}`:t;let i=this,n=i.res[s];return null==n&&(i=i.root,n=i.res[s]),null==n?null:n.getFactory?.(i)?.Type??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear(),this.root===this&&(this.R.clear(),this.res={})}C(t,e){const s=ut(t);if(!g(t)&&!s)throw w(9,t);if(tt.has(t.name))throw w(10,t);if(s){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw w(11,t)}return s}if(t.$isInterface)throw w(12,t.friendlyName);const i=this.config.defaultResolver(t,e);return e.h.set(t,i),i}}class nt{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=st;let i;st=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(at,t)):new this.Type(...this.dependencies.map(at,t),...e),null==this.transformers?i:this.transformers.reduce(rt,i)}finally{st=s}}registerTransformer(t){(this.transformers??=[]).push(t)}}function rt(t,e){return e(t)}function ot(t){if(null==t)throw w(14)}function at(t){return this.get(t)}function ht(...t){if(null==st)throw w(16,...t);return 1===t.length?st.get(t[0]):t.map(at,st)}const lt=(t,e,s)=>{if(t instanceof Rt&&4===t.$){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},ct={$isResolver:!0,resolve:(t,e)=>e},ut=t=>g(t?.register),dt=t=>(t=>ut(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,pt=t=>void 0!==t.prototype,ft=t=>m(t)&&t.indexOf(":")>0;class gt{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,D(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Rt(i,t,e))}}const mt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],y(n)||(e[n]=t[n]);return e},vt=q("di:paramtypes"),bt=t=>a("design:paramtypes",t),wt=t=>t.metadata[vt]??=[],yt=t=>{const e=q("di:dependencies");let s=a(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=bt(t),i=(t=>a(vt,t))(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=g(e)&&e!==Function.prototype?mt(yt(e)):[]}else s=mt(i);else if(void 0===i)s=mt(e);else{s=mt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],y(a)||(s[a]=i[a])}}else s=mt(i);h(s,t,e)}return s},Ct=(t,e)=>{const s=g(t)?t:e,i=(m(t)?t:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:null!=s?(t,e)=>s(new gt(t,e??n)):void 0};return n},$t=(...t)=>(e,s)=>{switch(s.kind){case"class":{const e=wt(s);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i);break}case"field":{const e=wt(s),i=t[0];void 0!==i&&(e[s.name]=i);break}default:throw w(22,String(s.name),s.kind)}},kt=(()=>(Symbol.metadata??=Symbol.for("Symbol.metadata"),{createContainer:Z,getDesignParamtypes:bt,getDependencies:yt,createInterface:Ct,inject:$t,transient:t=>(t.register=function(e){return j(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=At)=>(t.register=function(e){return B(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)}))(),xt=Ct("IContainer"),Tt=xt;function St(t,e){return kt.transient(t)}const At={scoped:!1};kt.singleton;class Rt{get $isResolver(){return!0}constructor(t,e,s){this.j=!1,this.F=null,this.k=t,this.$=e,this._state=s}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.$){case 0:return this._state;case 1:if(this.j)throw w(3,this._state.name);return this.j=!0,this._state=(this.F=t.getFactory(this._state)).construct(e),this.$=0,this.j=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw w(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw w(5,this.$)}}getFactory(t){switch(this.$){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;case 0:return this.F;default:return null}}}class Et{get friendlyName(){return this.I}constructor(t,e=null,s=null){this.I=t,this.A=e,this.L=s}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw w(13,this.I);return this.A}getFactory(t){return null==this.L?null:t.getFactory(this.L)}dispose(){this.A=null}}class It{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter(t=>"object"==typeof t))}}const Ot=n([]),Pt=n({});function Mt(){}const Bt=Ct("IPlatform");function jt(t){return function(e){function s(t,e){$t(s)(t,e)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Lt=(t,e=!1)=>{function s(t,e){$t(s)(t,e)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},Nt=jt((t,e,s)=>s.has(t,!0)?s.get(t):void 0),Dt=jt((t,e,s)=>(...i)=>e.getFactory(t).construct(s,i)),Vt=jt((t,e,s)=>s.has(t,!1)?s.get(t):void 0),Ft=jt((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t)),_t=jt((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0),qt=jt((t,e,s)=>s===s.root?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1)),Ut=jt((t,e,s)=>{const i=zt(t,e,s),n=new Et(o(t),i);return s.registerResolver(t,n,!0),i}),zt=(t,e,s)=>{if(e.hasFactory(t))return e.getFactory(t).construct(s);if(Kt(t)){const i=g(t.register),n=e.getResolver(t,!1);let r;if(null==n?(i&&(r=(Ht??=Z()).getResolver(t,!0)?.getFactory?.(e)),Ht.dispose()):r=n.getFactory?.(e),null!=r)return r.construct(s);throw w(17,t)}return e.getFactory(t).construct(s)},Kt=t=>!0===t?.$isInterface;let Ht;function Wt(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}"function"==typeof SuppressedError&&SuppressedError,n({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Gt=Ct("ILogConfig",t=>t.instance(new ee("no-colors",3))),Xt=Ct("ISink"),Jt=Ct("ILogEventFactory",t=>t.singleton(oe)),Yt=Ct("ILogger",t=>t.singleton(ae)),Qt=Ct("ILogScope"),Zt=n({key:q("logger-sink-handles"),define(t,e){h(e.handles,t,this.key)},getHandles(t){return a(this.key,t.constructor)}}),te=I({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ee{constructor(t,e){this.colorOptions=t,this.level=e}}const se=function(){const t={"no-colors":I({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:I({TRC:te.grey("TRC"),DBG:te.grey("DBG"),INF:te.white("INF"),WRN:te.yellow("WRN"),ERR:te.red("ERR"),FTL:te.red("FTL"),QQQ:te.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),ie=(t,e)=>"no-colors"===e?t.join("."):t.map(te.cyan).join("."),ne=(t,e)=>"no-colors"===e?new Date(t).toISOString():te.grey(new Date(t).toISOString());class re{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${ne(n,i)} [${se(t,i)}] ${e}`:`${ne(n,i)} [${se(t,i)} ${ie(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const l=0===i.length?"":` ${ie(i,n)}`;let c=`${ne(r,n)} [${se(e,n)}${l}] ${h}`;if(void 0===o||0===o.length)return null===a?[c]:[c,a];let u=0;for(;c.includes("%s");)c=c.replace("%s",String(o[u++]));return null!==a?[c,a,...o.slice(u)]:[c,...o.slice(u)]}}class oe{constructor(){this.config=ht(Gt)}createLogEvent(t,e,s,i){return new re(e,s,i,t.scope,this.config.colorOptions,Date.now())}}let ae=(()=>{var t;let e,s,i,n,r,o,a=[];return t=class{constructor(t=ht(Gt),e=ht(Jt),s=ht(Lt(Xt)),i=ht(Nt(Qt))??[],n=null){let r,o,h,l,c,u;if(this.scope=(function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(this,a),i),this._=v(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.M=[],o=this.T=[],h=this.P=[],l=this.K=[],c=this.N=[],u=this.G=[];for(const t of s){const e=Zt.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&h.push(t),(e?.includes(3)??1)&&l.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.M=n.M,o=this.T=n.T,h=this.P=n.P,l=this.K=n.K,c=this.N=n.N,u=this.G=n.G}trace(t,...e){this.config.level<=0&&this.W(this.M,0,t,e)}debug(t,...e){this.config.level<=1&&this.W(this.T,1,t,e)}info(t,...e){this.config.level<=2&&this.W(this.P,2,t,e)}warn(t,...e){this.config.level<=3&&this.W(this.K,3,t,e)}error(t,...e){this.config.level<=4&&this.W(this.N,4,t,e)}fatal(t,...e){this.config.level<=5&&this.W(this.G,5,t,e)}scopeTo(e){const s=this._;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,null,this.scope.concat(e),this)),i}W(t,e,s,i){const n=g(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}},(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[S],s=[S],i=[S],n=[S],r=[S],o=[S],Wt(t,null,e,{kind:"method",name:"trace",static:!1,private:!1,access:{has:t=>"trace"in t,get:t=>t.trace},metadata:h},null,a),Wt(t,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:t=>"debug"in t,get:t=>t.debug},metadata:h},null,a),Wt(t,null,i,{kind:"method",name:"info",static:!1,private:!1,access:{has:t=>"info"in t,get:t=>t.info},metadata:h},null,a),Wt(t,null,n,{kind:"method",name:"warn",static:!1,private:!1,access:{has:t=>"warn"in t,get:t=>t.warn},metadata:h},null,a),Wt(t,null,r,{kind:"method",name:"error",static:!1,private:!1,access:{has:t=>"error"in t,get:t=>t.error},metadata:h},null,a),Wt(t,null,o,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:t=>"fatal"in t,get:t=>t.fatal},metadata:h},null,a),h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),t})();class he{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const le=Ct("IEventAggregator",t=>t.singleton(ce));class ce{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw w(18,t);if(m(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();const i=s.length;for(let n=0;n<i;n++)s[n](e,t)}}else{const e=this.messageHandlers.slice(),s=e.length;for(let i=0;i<s;i++)e[i].handle(t)}}subscribe(t,e){if(!t)throw w(19,t);let s,i;return m(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new he(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,(t,i)=>{s.dispose(),e(t,i)});return s}}const ue="AccessThis",de="AccessGlobal",pe="AccessScope",fe="AccessMember",ge="AccessKeyed",me="ArrayBindingPattern",ve="ObjectBindingPattern",be="BindingIdentifier",we="ArrayDestructuring",ye="DestructuringAssignmentLeaf";class Ce{constructor(t){this.value=t,this.$kind="Custom"}evaluate(...t){return this.value}assign(...t){return t}bind(...t){}unbind(...t){}accept(t){}}class $e{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="BindingBehavior",this.key=`_bb_${e}`}}class ke{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="ValueConverter"}}class xe{constructor(t,e,s="="){this.target=t,this.value=e,this.op=s,this.$kind="Assign"}}class Te{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind="Conditional"}}class Se{constructor(t){this.name=t,this.$kind=de}}class Ae{constructor(t=0){this.ancestor=t,this.$kind=ue}}class Re{constructor(){this.$kind="AccessBoundary"}}class Ee{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=pe}}const Ie=t=>t.$kind===de||(t.$kind===fe||t.$kind===ge)&&t.accessGlobal;class Oe{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=fe,this.accessGlobal=Ie(t)}}class Pe{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=ge,this.accessGlobal=Ie(t)}}class Me{constructor(t,e){this.func=t,this.args=e,this.$kind="New"}}class Be{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind="CallScope"}}class je{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind="CallMember"}}class Le{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind="CallFunction"}}class Ne{constructor(t,e){this.name=t,this.args=e,this.$kind="CallGlobal"}}class De{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind="Binary"}}class Ve{constructor(t,e,s=0){this.operation=t,this.expression=e,this.pos=s,this.$kind="Unary"}}class Fe{constructor(t){this.value=t,this.$kind="PrimitiveLiteral"}}Fe.$undefined=new Fe(void 0),Fe.$null=new Fe(null),Fe.$true=new Fe(!0),Fe.$false=new Fe(!1),Fe.$empty=new Fe("");class _e{constructor(t){this.elements=t,this.$kind="ArrayLiteral"}}_e.$empty=new _e(Ot);class qe{constructor(t,e){this.keys=t,this.values=e,this.$kind="ObjectLiteral"}}qe.$empty=new qe(Ot,Ot);class Ue{constructor(t,e=Ot){this.cooked=t,this.expressions=e,this.$kind="Template"}}Ue.$empty=new Ue([""]);class ze{constructor(t,e,s,i=Ot){this.cooked=t,this.func=s,this.expressions=i,this.$kind="TaggedTemplate",t.raw=e}}class Ke{constructor(t){this.elements=t,this.$kind=me}}class He{constructor(t,e){this.keys=t,this.values=e,this.$kind=ve}}class We{constructor(t){this.name=t,this.$kind=be}}class Ge{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind="ForOfStatement"}}class Xe{constructor(t,e=Ot){this.parts=t,this.expressions=e,this.$kind="Interpolation",this.isMulti=e.length>1,this.firstExpression=e[0]}}class Je{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class Ye{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=ye}}class Qe{constructor(t,e){this.target=t,this.indexOrProperties=e,this.$kind=ye}}class Ze{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind="ArrowFunction"}}const ts=String,es=()=>Object.create(null),ss=(t,...e)=>new Error(`AUR${ts(t).padStart(4,"0")}:${e.map(ts)}`),is=kt.createInterface("IExpressionParser");class ns{constructor(){this.t=es(),this.i=es(),this.h=es()}parse(t,e){let s;switch(e){case ws:return new Ce(t);case fs:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case gs:return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===vs||e===bs)return Fe.$empty;throw ni()}return s=this.t[t],void 0===s&&(s=this.t[t]=this.$parse(t,e)),s}}$parse(t,e){return Cs=t,$s=0,ks=t.length,xs=0,Ts=0,Ss=6291456,As="",ys=Ms(0),Rs=!0,Es=!1,Is=!0,Os=-1,Ls(61,void 0===e?bs:e)}}function rs(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}ns.register=F(is);const os=Fe.$false,as=Fe.$true,hs=Fe.$null,ls=Fe.$undefined,cs=new Ae(0),us=new Ae(1),ds=new Re,ps="None",fs="Interpolation",gs="IsIterator",ms="IsChainable",vs="IsFunction",bs="IsProperty",ws="IsCustom";let ys,Cs="",$s=0,ks=0,xs=0,Ts=0,Ss=6291456,As="",Rs=!0,Es=!1,Is=!0,Os=-1;const Ps=String.fromCharCode,Ms=t=>Cs.charCodeAt(t),Bs=()=>Cs.slice(Ts,$s),js="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Ls(t,e){if(e===ws)return new Ce(Cs);if(0===$s){if(e===fs)return function(){const t=[],e=[],s=ks;let i="";for(;$s<s;){switch(ys){case 36:if(123===Ms($s+1)){t.push(i),i="",$s+=2,ys=Ms($s),zs();const s=Ls(61,fs);e.push(s);continue}i+="$";break;case 92:i+=Ps(rs(Ks()));break;default:i+=Ps(ys)}Ks()}return e.length?(t.push(i),new Xe(t,e)):null}();if(zs(),4194304&Ss)throw Qs()}Rs=577>t,Es=!1,Is=579>t;let s,i=!1,n=0;if(131072&Ss){const t=xi[63&Ss];zs(),s=new Ve(t,Ls(579,e)),Rs=!1}else{t:switch(Ss){case 12296:n=xs,Rs=!1,Is=!1;do{switch(zs(),++n,Ss){case 65547:if(zs(),!(12288&Ss))throw ti();break;case 12:case 13:throw ti();case 2162702:if(Es=!0,zs(),!(12288&Ss)){s=0===n?cs:1===n?us:new Ae(n),i=!0;break t}break;default:if(2097152&Ss){s=0===n?cs:1===n?us:new Ae(n);break t}throw ei()}}while(12296===Ss);case 4096:{const t=As;if(e===gs)s=new We(t);else if(Is&&js.includes(t))s=new Se(t);else{if(Is&&"import"===t)throw li();s=new Ee(t,n)}if(Rs=!Es,zs(),Js(53)){if(524298===Ss)throw $i();const e=Es,i=xs;++xs;const n=Ls(62,ps);Es=e,xs=i,Rs=!1,s=new Ze([new We(t)],n)}break}case 12:throw ki();case 13:throw Zs();case 12293:switch(Rs=!1,zs(),xs){case 0:s=cs;break;case 1:s=us;break;default:s=new Ae(xs)}break;case 12294:Rs=!1,zs(),s=ds;break;case 2688009:s=function(t){zs();const e=$s,s=Ts,i=Ss,n=ys,r=As,o=Es,a=[];let h=1,l=!1;e:for(;;){if(13===Ss){if(zs(),4096!==Ss)throw ti();if(a.push(new We(As)),zs(),6291475===Ss)throw Ci();if(7340048!==Ss)throw Zs();if(zs(),53!==Ss)throw Zs();zs();const t=Es,e=xs;++xs;const s=Ls(62,ps);return Es=t,xs=e,Rs=!1,new Ze(a,s,!0)}switch(Ss){case 4096:a.push(new We(As)),zs();break;case 7340048:zs();break e;case 524298:case 2688020:zs(),h=4;break;case 6291475:h=2,l=!0;break e;case 2688009:h=2;break e;default:zs(),h=2}switch(Ss){case 6291475:if(zs(),l=!0,1===h)break;break e;case 7340048:zs();break e;case 4194352:1===h&&(h=3);break e;case 53:if(l)throw bi();zs(),h=2;break e;default:1===h&&(h=2);break e}}if(53===Ss){if(1===h){if(zs(),524298===Ss)throw $i();const t=Es,e=xs;++xs;const s=Ls(62,ps);return Es=t,xs=e,Rs=!1,new Ze(a,s)}throw bi()}if(1===h&&0===a.length)throw fi();if(l)switch(h){case 2:throw bi();case 3:throw wi();case 4:throw yi()}$s=e,Ts=s,Ss=i,ys=n,As=r,Es=o;const c=Es,u=Ls(62,t);if(Es=c,Ys(7340048),53===Ss)switch(h){case 2:throw bi();case 3:throw wi();case 4:throw yi()}return u}(e);break;case 2688020:s=Cs.search(/\s+of\s+/)>$s?function(){const t=[],e=new Je(we,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(zs(),Ss){case 7340053:i=!1,r();break;case 6291475:r();break;case 4096:s=Bs();break;default:throw gi()}return Ys(7340053),e;function r(){""!==s?(t.push(new Ye(new Oe(cs,s),new Pe(cs,new Fe(n++)),void 0)),s=""):n++}}():function(t){const e=Es;zs();const s=new Array;for(;7340053!==Ss;)if(Js(6291475)){if(s.push(ls),7340053===Ss)break}else{if(s.push(Ls(62,t===gs?ps:t)),!Js(6291475))break;if(7340053===Ss)break}return Es=e,Ys(7340053),t===gs?new Ke(s):(Rs=!1,new _e(s))}(e);break;case 524298:s=function(t){const e=Es,s=new Array,i=new Array;for(zs();7340047!==Ss;){if(s.push(As),49152&Ss)zs(),Ys(6291478),i.push(Ls(62,t===gs?ps:t));else{if(!(12288&Ss))throw ui();{const e=ys,s=Ss,n=$s;zs(),Js(6291478)?i.push(Ls(62,t===gs?ps:t)):(ys=e,Ss=s,$s=n,i.push(Ls(580,t===gs?ps:t)))}}7340047!==Ss&&Ys(6291475)}return Es=e,Ys(7340047),t===gs?new He(s,i):(Rs=!1,new qe(s,i))}(e);break;case 2163762:s=new Ue([As]),Rs=!1,zs();break;case 2163763:s=qs(e,s,!1);break;case 16384:case 32768:s=new Fe(As),Rs=!1,zs();break;case 8194:case 8195:case 8193:case 8192:s=xi[63&Ss],Rs=!1,zs();break;case 8196:{zs();const t=Ls(578,e);let i;2688009===Ss?i=Ns():(i=[],zs()),s=new Me(t,i),Rs=!1;break}default:throw $s>=ks?si():ii()}if(e===gs)return function(t){if(!_s.includes(t.$kind))throw ci(t.$kind);if(4204596!==Ss)throw ci(t.$kind);zs();const e=t,s=Ls(61,ms);return new Ge(e,s,Os)}(s);switch(Ss){case 2228282:case 2228283:s=new Ve(xi[63&Ss],s,1),zs(),Rs=!1}if(579<t)return s;if(12===Ss||13===Ss)throw ti();if(s.$kind===ue)switch(Ss){case 2162702:if(Es=!0,Rs=!1,zs(),!(13312&Ss))throw mi();if(12288&Ss)s=new Ee(As,s.ancestor),zs();else if(2688009===Ss)s=new Le(s,Ns(),!0);else{if(2688020!==Ss)throw vi();s=Ds(s,!0)}break;case 65547:if(Rs=!Es,zs(),!(12288&Ss))throw ti();s=new Ee(As,s.ancestor),zs();break;case 12:case 13:throw ti();case 2688009:s=new Le(s,Ns(),i);break;case 2688020:s=Ds(s,i);break;case 2163762:s=Us(s);break;case 2163763:s=qs(e,s,!0)}for(;(65536&Ss)>0;)switch(Ss){case 2162702:s=Vs(s);break;case 65547:if(zs(),!(12288&Ss))throw ti();s=Fs(s,!1);break;case 12:case 13:throw ti();case 2688009:if(578===t)return s;s=s.$kind===pe?new Be(s.name,Ns(),s.ancestor,!1):s.$kind===fe?new je(s.object,s.name,Ns(),s.optional,!1):s.$kind===de?new Ne(s.name,Ns()):new Le(s,Ns(),!1);break;case 2688020:s=Ds(s,!1);break;case 2163762:if(Es)throw vi();s=Us(s);break;case 2163763:if(Es)throw vi();s=qs(e,s,!0)}}if(12===Ss||13===Ss)throw ti();if(577<t)return s;for(;(262144&Ss)>0;){const i=Ss;if((960&i)<=t)break;zs(),s=new De(xi[63&i],s,Ls(960&i,e)),Rs=!1}if(63<t)return s;if(Js(6291480)){const t=Ls(62,e);Ys(6291478),s=new Te(s,t,Ls(62,e)),Rs=!1}if(62<t)return s;switch(Ss){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!Rs)throw ri();const t=xi[63&Ss];zs(),s=new xe(s,Ls(62,e),t);break}}if(61<t)return s;for(;Js(6291482);){if(6291456===Ss)throw oi();const t=As;zs();const i=new Array;for(;Js(6291478);)i.push(Ls(62,e));s=new ke(s,t,i)}for(;Js(6291481);){if(6291456===Ss)throw ai();const t=As;zs();const i=new Array;for(;Js(6291478);)i.push(Ls(62,e));s=new $e(s,t,i)}if(6291456!==Ss){if(e===fs&&7340047===Ss)return s;if(e===ms&&6291479===Ss){if($s===ks)throw ii();return Os=$s-1,s}if("of"===Bs())throw hi();throw ii()}return s}function Ns(){const t=Es;zs();const e=[];for(;7340048!==Ss&&(e.push(Ls(62,ps)),Js(6291475)););return Ys(7340048),Rs=!1,Es=t,e}function Ds(t,e){const s=Es;return zs(),t=new Pe(t,Ls(62,ps),e),Ys(7340053),Rs=!s,Es=s,t}function Vs(t){if(Es=!0,Rs=!1,zs(),!(13312&Ss))throw mi();if(12288&Ss)return Fs(t,!0);if(2688009===Ss)return t.$kind===pe?new Be(t.name,Ns(),t.ancestor,!0):t.$kind===fe?new je(t.object,t.name,Ns(),t.optional,!0):new Le(t,Ns(),!0);if(2688020===Ss)return Ds(t,!0);throw vi()}function Fs(t,e){const s=As;switch(Ss){case 2162702:{Es=!0,Rs=!1;const i=$s,n=Ts,r=Ss,o=ys,a=As,h=Rs,l=Es;if(zs(),!(13312&Ss))throw mi();return 2688009===Ss?new je(t,s,Ns(),e,!0):($s=i,Ts=n,Ss=r,ys=o,As=a,Rs=h,Es=l,new Oe(t,s,e))}case 2688009:return Rs=!1,new je(t,s,Ns(),e,!1);default:return Rs=!Es,zs(),new Oe(t,s,e)}}const _s=[me,ve,be,we,"ObjectDestructuring"];function qs(t,e,s){const i=Es,n=[As];Ys(2163763);const r=[Ls(62,t)];for(;2163762!==(Ss=Xs());)n.push(As),Ys(2163763),r.push(Ls(62,t));return n.push(As),Rs=!1,Es=i,s?(zs(),new ze(n,n,e,r)):(zs(),new Ue(n,r))}function Us(t){Rs=!1;const e=[As];return zs(),new ze(e,e,t)}function zs(){for(;$s<ks;)if(Ts=$s,null!=(Ss=Si[ys]()))return;Ss=6291456}function Ks(){return ys=Ms(++$s)}function Hs(){for(;Ai[Ks()];);const t=Ti[As=Bs()];return void 0===t?4096:t}function Ws(t){let e=ys;if(!1===t){do{e=Ks()}while(e<=57&&e>=48);if(46!==e)return As=parseInt(Bs(),10),32768;if(e=Ks(),$s>=ks)return As=parseInt(Bs().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Ks()}while(e<=57&&e>=48);else ys=Ms(--$s);return As=parseFloat(Bs()),32768}function Gs(){let t=!0,e="";for(;96!==Ks();)if(36===ys){if($s+1<ks&&123===Ms($s+1)){$s++,t=!1;break}e+="$"}else if(92===ys)e+=Ps(rs(Ks()));else{if($s>=ks)throw pi();e+=Ps(ys)}return Ks(),As=e,t?2163762:2163763}const Xs=()=>{if($s>=ks)throw pi();return $s--,Gs()},Js=t=>Ss===t&&(zs(),!0),Ys=t=>{if(Ss!==t)throw fi();zs()},Qs=()=>ss(151,Cs),Zs=()=>ss(152,Cs),ti=()=>ss(153,Cs),ei=()=>ss(154,Cs),si=()=>ss(155,Cs),ii=()=>ss(156,Bs(),$s,Cs),ni=()=>ss(157),ri=()=>ss(158,Cs),oi=()=>ss(159,Cs),ai=()=>ss(160,Cs),hi=()=>ss(161,Cs),li=()=>ss(162,Cs),ci=t=>ss(163,Cs,t),ui=()=>ss(164,Cs),di=()=>ss(165,Cs),pi=()=>ss(166,Cs),fi=t=>ss(167,Cs),gi=()=>ss(170,Cs),mi=()=>ss(171,Cs),vi=()=>ss(172,Cs),bi=()=>ss(173,Cs),wi=()=>ss(174,Cs),yi=()=>ss(175,Cs),Ci=()=>ss(176,Cs),$i=()=>ss(178,Cs),ki=()=>ss(179,Cs),xi=[os,as,hs,ls,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],Ti=Object.assign(es(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:Si,IdParts:Ai}=(()=>{const t=()=>{throw ss(168,Cs)};t.notMapped=!0;const e=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],s=[48,58],i=(t,e,s,i)=>{const n=s.length;for(let e=0;e<n;e+=2){const n=s[e];let r=s[e+1];r=r>0?r:n+1,t&&t.fill(i,n,r)}},n=(t=>(i(t,0,e,1),i(t,0,s,1),t))(new Uint8Array(65535)),r=t=>()=>(Ks(),t),o=new Array(65535);return o.fill(t,0,65535),i(o,0,[0,33,127,161],()=>(Ks(),null)),i(o,0,e,Hs),i(o,0,s,()=>Ws(!1)),o[34]=o[39]=()=>function(){const t=ys;Ks();let e=0;const s=new Array;let i=$s;for(;ys!==t;)if(92===ys)s.push(Cs.slice(i,$s)),Ks(),e=rs(ys),Ks(),s.push(Ps(e)),i=$s;else{if($s>=ks)throw di();Ks()}const n=Cs.slice(i,$s);Ks(),s.push(n);const r=s.join("");return As=r,16384}(),o[96]=()=>Gs(),o[33]=()=>61!==Ks()?131121:61!==Ks()?6553951:(Ks(),6553953),o[61]=()=>62===Ks()?(Ks(),53):61!==ys?4194352:61!==Ks()?6553950:(Ks(),6553952),o[38]=()=>38!==Ks()?6291481:(Ks(),6553885),o[124]=()=>124!==Ks()?6291482:(Ks(),6553820),o[63]=()=>{if(46===Ks()){const t=Ms($s+1);return t<=48||t>=57?(Ks(),2162702):6291480}return 63!==ys?6291480:(Ks(),6553755)},o[46]=()=>Ks()<=57&&ys>=48?Ws(!0):46===ys?46!==Ks()?12:(Ks(),13):65547,o[60]=()=>61!==Ks()?6554018:(Ks(),6554020),o[62]=()=>61!==Ks()?6554019:(Ks(),6554021),o[37]=r(6554157),o[40]=r(2688009),o[41]=r(7340048),o[42]=()=>61===Ks()?(Ks(),4194360):42===ys?(Ks(),6554223):6554156,o[43]=()=>43===Ks()?(Ks(),2228282):61!==ys?2490856:(Ks(),4194358),o[44]=r(6291475),o[45]=()=>45===Ks()?(Ks(),2228283):61!==ys?2490857:(Ks(),4194359),o[47]=()=>61!==Ks()?6554158:(Ks(),4194361),o[58]=r(6291478),o[59]=r(6291479),o[91]=r(2688020),o[93]=r(7340053),o[123]=r(524298),o[125]=r(7340047),{CharScanners:o,IdParts:n}})(),Ri=kt.createInterface,Ei=Object.freeze,{aliasTo:Ii,singleton:Oi}=V,Pi="Interpolation",Mi="IsFunction",Bi="IsProperty",ji="custom-element",Li=Ei({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),Ni=Ri("ITemplateCompiler"),Di=Ri("IAttrMapper"),Vi=(t,...e)=>{const s=String(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(String)}`)};class Fi{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.i;break;case 1:this.has=this.u;break;default:this.has=this.A}else switch(t.length){case 0:this.has=this.I;break;case 1:this.has=this.B;break;default:this.has=this.P}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}P(t){return this.chars.includes(t)}B(t){return this.chars===t}I(t){return!1}A(t){return!this.chars.includes(t)}u(t){return this.chars!==t}i(t){return!0}}class _i{constructor(){this.parts=Ot,this.C="",this.T={},this.R={}}get pattern(){const t=this.C;return""===t?null:t}set pattern(t){null==t?(this.C="",this.parts=Ot):(this.C=t,this.parts=this.R[t])}append(t,e){const s=this.T;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.T;let s;void 0!==e[t]&&(s=this.R,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class qi{get C(){return this._?this.L[0]:null}constructor(t,...e){this.charSpec=t,this.V=[],this.H=null,this._=!1,this.L=e}findChild(t){const e=this.V,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.L;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new qi(t,e),this.V.push(i),t.repeat&&i.V.push(i)),i}findMatches(t,e){const s=[],i=this.V,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.L.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.L[h]);else for(;h<r;++h)e.append(o.L[h],t);return s}}class Ui{constructor(t){this.text=t;const e=this.M=t.length,s=this.$=[];let i=0;for(;e>i;++i)s.push(new Fi(t[i],!1,!1,!1))}eachChar(t){const e=this.M,s=this.$;let i=0;for(;e>i;++i)t(s[i])}}class zi{constructor(t){this.text="PART",this.F=new Fi(t,!0,!1,!0)}eachChar(t){t(this.F)}}class Ki{constructor(t){this.text=t,this.F=new Fi(t,!1,!0,!1)}eachChar(t){t(this.F)}}class Hi{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Wi=Ri("ISyntaxInterpreter",t=>t.singleton(Gi));class Gi{constructor(){this.O=new qi(null),this.W=[this.O]}add(t){t=t.slice(0).sort((t,e)=>t.pattern>e.pattern?1:-1);const e=t.length;let s,i,n,r,o,a,h,l,c=0;for(;e>c;){for(s=this.O,i=t[c],n=i.pattern,r=new Hi,o=this.N(i,r),a=o.length,h=t=>s=s.append(t,n),l=0;a>l;++l)o[l].eachChar(h);s.H=r,s._=!0,++c}}interpret(t){const e=new _i,s=t.length;let i,n=this.W,r=0;for(;r<s&&(n=this.j(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(Xi),n.length>0&&(n.sort(Ji),i=n[0],i.charSpec.isSymbol||e.next(i.C),e.pattern=i.C),e}j(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}N(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new Ui(i.slice(a,o))),++e.statics,a=o):(s.push(new Ki(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new zi(r)),++e.dynamics):++o;return a!==o&&(s.push(new Ui(i.slice(a,o))),++e.statics),s}}function Xi(t){return t._}function Ji(t,e){const s=t.H,i=e.H;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class Yi{constructor(t,e,s,i,n=null){this.rawName=t,this.rawValue=e,this.target=s,this.command=i,this.parts=n}}const Qi=Ri("IAttributePattern"),Zi=Ri("IAttributeParser",t=>t.singleton(tn));class tn{constructor(){this.U={},this.L={},this.q=!1,this.G=[],this.J=ht(Wi),this.c=ht(xt)}registerPattern(t,e){if(this.q)throw Vi(88);const s=this.L;for(const{pattern:i}of t){if(null!=s[i])throw Vi(89,i);s[i]={patternType:e}}this.G.push(...t)}K(){this.J.add(this.G);const t=this.c;for(const[,e]of Object.entries(this.L))e.pattern=t.get(e.patternType)}parse(t,e){this.q||(this.K(),this.q=!0);let s=this.U[t];null==s&&(s=this.U[t]=this.J.interpret(t));const i=s.pattern;return null==i?new Yi(t,e,t,null,null):this.L[i].pattern[i](t,e,s.parts)}}const en=Ei({name:z("attribute-pattern"),create:(t,e)=>({register(s){s.get(Zi).registerPattern(t,e),Oi(Qi,e).register(s)}})});class sn{"PART.PART"(t,e,s){return new Yi(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Yi(t,e,`${s[0]}.${s[1]}`,s[2])}}sn[Symbol.metadata]={[J]:en.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],sn)};class nn{ref(t,e,s){return new Yi(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new Yi(t,e,i,"ref")}}nn[Symbol.metadata]={[J]:en.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],nn)};class rn{"PART.trigger:PART"(t,e,s){return new Yi(t,e,s[0],"trigger",s)}"PART.capture:PART"(t,e,s){return new Yi(t,e,s[0],"capture",s)}}rn[Symbol.metadata]={[J]:en.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],rn)};class on{":PART"(t,e,s){return new Yi(t,e,s[0],"bind")}}on[Symbol.metadata]={[J]:en.create([{pattern:":PART",symbols:":"}],on)};class an{"@PART"(t,e,s){return new Yi(t,e,s[0],"trigger")}"@PART:PART"(t,e,s){return new Yi(t,e,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}an[Symbol.metadata]={[J]:en.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],an)};const hn=i.get,ln=i.define,cn="rg",un=Ei({hydrateElement:"ra",hydrateAttribute:"rb",hydrateTemplateController:"rc",hydrateLetElement:"rd",setProperty:"re",interpolation:"rf",propertyBinding:cn,letBinding:"ri",refBinding:"rj",iteratorBinding:"rk",multiAttr:"rl",textBinding:"ha",listenerBinding:"hb",attributeBinding:"hc",stylePropertyBinding:"hd",setAttribute:"he",setClassAttribute:"hf",setStyleAttribute:"hg",spreadTransferedBinding:"hs",spreadElementProp:"hp",spreadValueBinding:"svb"}),dn=Ri("Instruction");class pn{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class fn{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=cn}}class gn{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class mn{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class vn{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class bn{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class wn{constructor(t,e,s,i,n,r){this.res=t,this.props=e,this.projections=s,this.containerless=i,this.captures=n,this.data=r,this.type="ra"}}class yn{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class Cn{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class $n{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class kn{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class xn{constructor(t){this.from=t,this.type="ha"}}class Tn{constructor(t,e,s,i){this.from=t,this.to=e,this.capture=s,this.modifier=i,this.type="hb"}}class Sn{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class An{constructor(t){this.value=t,this.type="hf"}}class Rn{constructor(t){this.value=t,this.type="hg"}}class En{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class In{constructor(){this.type="hs"}}class On{constructor(t){this.instruction=t,this.type="hp"}}class Pn{constructor(t,e){this.target=t,this.from=e,this.type="svb"}}class Mn{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return m(t)?(s=t,i={name:s}):(s=t.name,i=t),new Mn(e,R(Nn(e,"name"),s),A(Nn(e,"aliases"),i.aliases,e.aliases),Ln(s))}register(t,e){const s=this.Type,i="string"==typeof e?Ln(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Oi(s,s),Ii(s,i),...n.map(t=>Ii(s,Ln(t))))}}const Bn="binding-command",jn=z(Bn),Ln=t=>`${jn}:${t}`,Nn=(t,e)=>hn(K.annotation.keyFor(e),t),Dn=(()=>{const t="__au_static_resource__",e=(e,s,i)=>{let n=hn(t,e);return null==n&&e.$au?.type===s&&(n=i(e.$au,e),ln(n,e,t)),n};return Ei({name:jn,keyFrom:Ln,define(t,e){const s=Mn.create(t,e),i=s.Type;return ln(s,i,jn,U),i},getAnnotation:Nn,find(t,s){const i=t.find(Bn,s);return null==i?null:hn(jn,i)??e(i,Bn,Mn.create)??null},get:(t,e)=>t.get(Ft(Ln(e)))})})();class Vn{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return n=""===n?$(i):n,i=null==t.bindable?s.map(t.node,i)??$(i):t.bindable.name,new fn(e.parse(n,Bi),i,1)}}Vn.$au={type:Bn,name:"one-time"};class Fn{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return n=""===n?$(i):n,i=null==t.bindable?s.map(t.node,i)??$(i):t.bindable.name,new fn(e.parse(n,Bi),i,2)}}Fn.$au={type:Bn,name:"to-view"};class _n{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return r=""===r?$(n):r,n=null==t.bindable?s.map(t.node,n)??$(n):t.bindable.name,new fn(e.parse(r,Bi),n,4)}}_n.$au={type:Bn,name:"from-view"};class qn{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return r=""===r?$(n):r,n=null==t.bindable?s.map(t.node,n)??$(n):t.bindable.name,new fn(e.parse(r,Bi),n,6)}}qn.$au={type:Bn,name:"two-way"};class Un{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr,n=t.bindable;let r,o,a=i.rawValue,h=i.target;return a=""===a?$(h):a,null==n?(o=s.isTwoWay(t.node,h)?6:2,h=s.map(t.node,h)??$(h)):(r=t.def.defaultBindingMode??0,o=0===n.mode||null==n.mode?null==r||0===r?2:r:n.mode,h=n.name),new fn(e.parse(a,Bi),h,m(o)?Li[o]??0:o)}}Un.$au={type:Bn,name:"bind"};class zn{constructor(){this.X=ht(Zi)}get ignoreAttr(){return!1}build(t,e){const s=null===t.bindable?$(t.attr.target):t.bindable.name,i=e.parse(t.attr.rawValue,"IsIterator");let n=Ot;if(i.semiIdx>-1){const e=t.attr.rawValue.slice(i.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),r=this.X.parse(t,i);n=[new bn(i,r.target,r.command)]}}return new gn(i,s,n)}}zn.$au={type:Bn,name:"for"};class Kn{get ignoreAttr(){return!0}build(t,e){return new Tn(e.parse(t.attr.rawValue,Mi),t.attr.target,!1,t.attr.parts?.[2]??null)}}Kn.$au={type:Bn,name:"trigger"};class Hn{get ignoreAttr(){return!0}build(t,e){return new Tn(e.parse(t.attr.rawValue,Mi),t.attr.target,!0,t.attr.parts?.[2]??null)}}Hn.$au={type:Bn,name:"capture"};class Wn{get ignoreAttr(){return!0}build(t,e){const s=t.attr,i=s.target;let n=s.rawValue;return n=""===n?$(i):n,new En(i,e.parse(n,Bi),i)}}Wn.$au={type:Bn,name:"attr"};class Gn{get ignoreAttr(){return!0}build(t,e){return new En("style",e.parse(t.attr.rawValue,Bi),t.attr.target)}}Gn.$au={type:Bn,name:"style"};class Xn{get ignoreAttr(){return!0}build(t,e){let s=t.attr.target;if(s.includes(",")){const t=s.split(",").filter(t=>t.length>0);if(0===t.length)throw Vi(723);s=t.join(" ")}return new En("class",e.parse(t.attr.rawValue,Bi),s)}}Xn.$au={type:Bn,name:"class"};class Jn{get ignoreAttr(){return!0}build(t,e){return new mn(e.parse(t.attr.rawValue,Bi),t.attr.target)}}Jn.$au={type:Bn,name:"ref"};class Yn{get ignoreAttr(){return!1}build(t){return new Pn(t.attr.target,t.attr.rawValue)}}Yn.$au={type:Bn,name:"spread"},"function"==typeof SuppressedError&&SuppressedError;const Qn=Ri("ITemplateElementFactory",t=>t.singleton(tr)),Zn={};class tr{constructor(){this.p=ht(Bt),this.Y=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(m(t)){let e=Zn[t];if(void 0===e){const s=this.Y;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.Y=this.t(),e=s),Zn[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const er="au-start",sr="au-end",ir=(t,e,s)=>t.insertBefore(e,s),nr=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},rr=(t,e)=>t.content.appendChild(e),or=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},ar=t=>1===t.nodeType,hr=t=>3===t.nodeType,lr="au-slot",cr="default",ur=(dr=0,()=>"anonymous-"+ ++dr);var dr;class pr{constructor(){this.debug=!1,this.resolveResources=!0}compile(t,e){if(null==t.template||!1===t.needsCompile)return t;const s=new mr(t,e,null,null,void 0),i=m(t.template)||!t.enhance?s.Z.createTemplate(t.template):t.template,n=i.nodeName===fr&&null!=i.content,r=n?i.content:i,o=Er.findAll(e),a=o.length;let h=0;if(a>0)for(;a>h;)o[h].compiling?.(i),++h;if(i.hasAttribute(Sr))throw Vi(701,t);return this.tt(r,s),this.et(r,s),{...t,name:t.name||ur(),dependencies:(t.dependencies??Ot).concat(s.deps??Ot),instructions:s.rows,surrogates:n?this.nt(i,s):Ot,template:i,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(t,e,s,i,n){const r=new mr(t,s,null,null,void 0),o=[],a=n??r.it(i.nodeName.toLowerCase()),h=null!==a,l=r.ep,c=e.length;let u,d,p,f,g,m,v,b,w,y,C=0,k=null,x=null;for(;c>C;++C)if(u=e[C],w=u.target,y=u.rawValue,"...$attrs"!==w)if(x=r.rt(u),null!==x&&x.ignoreAttr)yr.node=i,yr.attr=u,yr.bindable=null,yr.def=null,o.push(x.build(yr,r.ep,r.m));else if(h&&(f=r.st(a),g=f.attrs[w],void 0!==g))null==x?(v=l.parse(y,Pi),o.push(new On(null==v?new vn(y,g.name):new pn(v,g.name)))):(yr.node=i,yr.attr=u,yr.bindable=g,yr.def=a,o.push(new On(x.build(yr,r.ep,r.m))));else if(k=r.lt(w),null===k)if(null==x)if(v=l.parse(y,Pi),null!=v)o.push(new pn(v,r.m.map(i,w)??$(w)));else switch(w){case"class":o.push(new An(y));break;case"style":o.push(new Rn(y));break;default:o.push(new Sn(y,w))}else yr.node=i,yr.attr=u,yr.bindable=null,yr.def=null,o.push(x.build(yr,r.ep,r.m));else{if(k.isTemplateController)throw Vi(9998,w);f=r.st(k),b=!1===k.noMultiBindings&&null===x&&vr(y),b?p=this.ot(i,y,k,r):(m=f.primary,null===x?(v=l.parse(y,Pi),p=[null===v?new vn(y,m.name):new pn(v,m.name)]):(yr.node=i,yr.attr=u,yr.bindable=m,yr.def=k,p=[x.build(yr,r.ep,r.m)])),(d??=[]).push(new yn(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(w)?w:void 0,p))}else o.push(new In);return br(),null!=d?d.concat(o):o}nt(t,e){const s=[],i=t.attributes,n=e.ep;let r,o,a,h,l,c,u,d,p,f,g,m,v=i.length,b=0,w=null,y=null;for(;v>b;++b){if(r=i[b],o=r.name,a=r.value,h=e.X.parse(o,a),g=h.target,m=h.rawValue,Cr[g])throw Vi(702,o);if(y=e.rt(h),null!==y&&y.ignoreAttr)yr.node=t,yr.attr=h,yr.bindable=null,yr.def=null,s.push(y.build(yr,e.ep,e.m));else if(w=e.lt(g),null===w)if(null===y)if(p=n.parse(m,Pi),null!=p)t.removeAttribute(o),--b,--v,s.push(new pn(p,e.m.map(t,g)??$(g)));else switch(o){case"class":s.push(new An(m));break;case"style":s.push(new Rn(m));break;default:s.push(new Sn(m,o))}else yr.node=t,yr.attr=h,yr.bindable=null,yr.def=null,s.push(y.build(yr,e.ep,e.m));else{if(w.isTemplateController)throw Vi(703,g);u=e.st(w),f=!1===w.noMultiBindings&&null===y&&vr(m),f?c=this.ot(t,m,w,e):(d=u.primary,null===y?(p=n.parse(m,Pi),c=null===p?""===m?[]:[new vn(m,d.name)]:[new pn(p,d.name)]):(yr.node=t,yr.attr=h,yr.bindable=d,yr.def=w,c=[y.build(yr,e.ep,e.m)])),t.removeAttribute(o),--b,--v,(l??=[]).push(new yn(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(g)?g:void 0,c))}}return br(),null!=l?l.concat(s):s}et(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.ut(t,e):this.ct(t,e);case 3:return this.ht(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.et(s,e);break}}return t.nextSibling}ut(t,e){const s=t.attributes,i=s.length,n=[],r=e.ep;let o,a,h,l,c,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=s[g],h=o.name,l=o.value,"to-binding-context"!==h)if(a=e.X.parse(h,l),u=a.target,d=a.rawValue,c=e.rt(a),null===c)p=r.parse(d,Pi),n.push(new kn(null===p?new Fe(d):p,$(u)));else{if("bind"!==a.command)throw Vi(704,a);n.push(new kn(r.parse(d,Bi),$(u)))}else f=!0;return e.rows.push([new $n(n,f)]),this.dt(t,e).nextSibling}ct(t,e){const s=t.nextSibling,i=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),n=e.it(i),r=null!==n,o=r&&null!=n.shadowOptions,a=n?.capture,h=null!=a&&"boolean"!=typeof a,l=a?[]:Ot,c=e.ep,u=this.debug?Mt:()=>{t.removeAttribute(f),--j,--B};let d,p,f,g,m,v,b,w,y,C,k,x,T,S,A,R,E,I,O,P,M=t.attributes,B=M.length,j=0,L=null,N=!1,D=null,V=!0,F=!1,_=!1,q=!1,U=0;if("slot"===i){if(null==e.root.def.shadowOptions)throw Vi(717,e.root.def.name);e.root.hasSlot=!0}for(r&&(O={},V=n.processContent?.call(n.Type,t,e.p,O),M=t.attributes,B=M.length);B>j;++j){switch(p=M[j],f=p.name,g=p.value,f){case"as-element":case"containerless":u(),F=F||"containerless"===f;continue}if(m=e.X.parse(f,g),D=e.rt(m),E=m.target,I=m.rawValue,a&&(!h||h&&a(E))){if(null!=D&&D.ignoreAttr){u(),l.push(m);continue}if(_=E!==lr&&"slot"!==E&&(-1===(U=E.indexOf("..."))||0===U&&"...$attrs"===E),_&&(A=e.st(n),null==A.attrs[E]&&!e.lt(E)?.isTemplateController)){u(),l.push(m);continue}}if("...$attrs"!==E)if(D?.ignoreAttr)yr.node=t,yr.attr=m,yr.bindable=null,yr.def=null,(v??=[]).push(D.build(yr,e.ep,e.m)),u();else{if(0===E.indexOf("...")){if(r&&"$element"!==(E=E.slice(3))){(b??=[]).push(new Pn("$bindables","$bindables"===E?I:E)),u();continue}throw Vi(720,E)}if(r){if(A=e.st(n),w=A.attrs[E],void 0!==w){null===D?(T=c.parse(I,Pi),(b??=[]).push(null==T?new vn(I,w.name):new pn(T,w.name))):(yr.node=t,yr.attr=m,yr.bindable=w,yr.def=n,(b??=[]).push(D.build(yr,e.ep,e.m))),u();continue}if("$bindables"===E){null!=D&&(yr.node=t,yr.attr=m,yr.bindable=null,yr.def=n,(b??=[]).push(D.build(yr,e.ep,e.m))),u();continue}}if("$bindables"===E)throw Vi(721,t.nodeName,E,I);L=e.lt(E),null===L?null!==D?(yr.node=t,yr.attr=m,yr.bindable=null,yr.def=null,(v??=[]).push(D.build(yr,e.ep,e.m)),u()):(T=c.parse(I,Pi),null!=T&&(u(),(v??=[]).push(new pn(T,e.m.map(t,E)??$(E))))):(A=e.st(L),N=!1===L.noMultiBindings&&null===D&&vr(I),N?C=this.ot(t,I,L,e):(R=A.primary,null===D?(T=c.parse(I,Pi),C=null===T?""===I?[]:[new vn(I,R.name)]:[new pn(T,R.name)]):(yr.node=t,yr.attr=m,yr.bindable=R,yr.def=L,C=[D.build(yr,e.ep,e.m)])),u(),L.isTemplateController?(k??=[]).push(new Cn(wr,this.resolveResources?L:L.name,void 0,C)):(y??=[]).push(new yn(this.resolveResources?L:L.name,null!=L.aliases&&L.aliases.includes(E)?E:void 0,C)))}else(v??=[]).push(new In),u()}if(br(),this.ft(t,v)&&null!=v&&v.length>1&&this.gt(t,v),r&&(S=new wn(this.resolveResources?n:n.name,b??Ot,null,F,l,O)),null==v&&null==S&&null==y||(d=Ot.concat(S??Ot,y??Ot,v??Ot),q=!0),null!=k){let s;B=k.length-1,j=B,x=k[j],gr(t)?(s=e.t(),or(s,[e.wt(),e.bt(er),e.bt(sr)])):(this.At(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),rr(s,t)));const a=s,h=e.yt(null==d?[]:[d]);let l,c,u,p,f,g,m,v,b=!1,w=0,y=0,C=t.firstChild,$=!1;if(!1!==V)for(;null!==C;){if(c=ar(C)?C.getAttribute(lr):null,b=null!==c||r&&!o,l=C.nextSibling,b){if(!r)throw Vi(706,c,i);C.removeAttribute?.(lr),$=hr(C)&&""===C.textContent.trim(),$||((p??={})[c||cr]??=[]).push(C),t.removeChild(C)}C=l}if(null!=p){for(c in u={},p){for(s=e.t(),f=p[c],w=0,y=f.length;y>w;++w)g=f[w],"TEMPLATE"===g.nodeName?g.attributes.length>0?rr(s,g):rr(s,g.content):rr(s,g);v=e.yt(),this.et(s.content,v),u[c]={name:ur(),type:ji,template:s,instructions:v.rows,needsCompile:!1}}S.projections=u}if(q&&(r&&(F||n.containerless)?this.At(t,e):this.dt(t,e)),P=!r||!n.containerless&&!F&&!1!==V,P)if(t.nodeName===fr)this.et(t.content,h);else for(C=t.firstChild;null!==C;)C=this.et(C,h);for(x.def={name:ur(),type:ji,template:a,instructions:h.rows,needsCompile:!1};j-- >0;)x=k[j],s=e.t(),m=e.wt(),or(s,[m,e.bt(er),e.bt(sr)]),x.def={name:ur(),type:ji,template:s,needsCompile:!1,instructions:[[k[j+1]]]};e.rows.push([x])}else{null!=d&&e.rows.push(d);let s,a,h,l,c,u,p,f=t.firstChild,g=!1,m=null,v=!1,b=0,w=0;if(!1!==V)for(;null!==f;){if(a=ar(f)?f.getAttribute(lr):null,g=null!==a||r&&!o,s=f.nextSibling,g){if(!r)throw Vi(706,a,i);f.removeAttribute?.(lr),v=hr(f)&&""===f.textContent.trim(),v||((h??={})[a||cr]??=[]).push(f),t.removeChild(f)}f=s}if(null!=h){for(a in m={},h){for(u=e.t(),l=h[a],b=0,w=l.length;w>b;++b)c=l[b],c.nodeName===fr?c.attributes.length>0?rr(u,c):rr(u,c.content):rr(u,c);p=e.yt(),this.et(u.content,p),m[a]={name:ur(),type:ji,template:u,instructions:p.rows,needsCompile:!1}}S.projections=m}if(q&&(r&&(F||n.containerless)?this.At(t,e):this.dt(t,e)),P=!r||!n.containerless&&!F&&!1!==V,P&&t.childNodes.length>0)for(f=t.firstChild;null!==f;)f=this.et(f,e)}return s}ht(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,Pi),n=t.nextSibling;let r,o,a,h,l;if(null!==i){for(({parts:r,expressions:o}=i),(l=r[0])&&ir(s,e.It(l),t),a=0,h=o.length;h>a;++a)nr(s,t,[e.wt(),e.It(" ")]),(l=r[a+1])&&ir(s,e.It(l),t),e.rows.push([new xn(o[a])]);s.removeChild(t)}return n}ot(t,e,s,i){const n=i.st(s),r=e.length,o=[];let a,h,l,c,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),c=i.X.parse(a,h),u=i.rt(c),d=n.attrs[c.target],null==d)throw Vi(707,c.target,s.name);for(null===u?(l=i.ep.parse(h,Pi),o.push(null===l?new vn(h,d.name):new pn(l,d.name))):(yr.node=t,yr.attr=c,yr.bindable=d,yr.def=s,o.push(u.build(yr,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return br(),o}tt(t,e){const s=e.root.def.name,i=t,n=T(i.querySelectorAll("template[as-custom-element]")),r=n.length;if(0===r)return;if(r===i.childElementCount)throw Vi(708,s);const o=new Set,a=[];for(const t of n){if(t.parentNode!==i)throw Vi(709,s);const e=Ar(s,t,o),n=t.content,r=T(n.querySelectorAll("bindable")),h=new Set,l=new Set,c=r.reduce((t,s)=>{if(s.parentNode!==n)throw Vi(710,e);const i=s.getAttribute("name");if(null===i)throw Vi(711,s,e);const r=s.getAttribute("attribute");if(null!==r&&l.has(r)||h.has(i))throw Vi(712,h,r);null!==r&&l.add(r),h.add(i);const o=T(s.attributes).filter(t=>!Tr.includes(t.name));return o.length,s.remove(),t[i]={name:i,attribute:r??void 0,mode:s.getAttribute("mode")??"default"},t},{});class u{}u.$au={type:ji,name:e,template:t,bindables:c},Reflect.defineProperty(u,"name",{value:k(e)}),a.push(u),i.removeChild(t)}const h=(e.root.def.dependencies??[]).concat(null==e.root.def.Type?Ot:[e.root.def.Type]);for(const t of a)t.dependencies=h.concat(a.filter(e=>e!==t)),e.St(t)}ft(t,e){const s=t.nodeName;return"INPUT"===s&&1===$r[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some(t=>t.type===cn&&"multiple"===t.to))}gt(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}dt(t,e){return ir(t.parentNode,e.bt("au*"),t),t}At(t,e){if(gr(t))return t;const s=t.parentNode,i=e.wt();return nr(s,t,[i,e.bt(er),e.bt(sr)]),s.removeChild(t),i}}pr.register=F(Ni);const fr="TEMPLATE",gr=t=>"au*"===t.nodeValue;class mr{constructor(t,e,s,i,n){this.hasSlot=!1,this.deps=null;const r=null!==s;if(this.c=e,this.root=null===i?this:i,this.def=t,this.parent=s,this.Bt=r?s.Bt:e.get(kr),this.Pt=r?s.Pt:e.get(xr),this.Z=r?s.Z:e.get(Qn),this.X=r?s.X:e.get(Zi),this.ep=r?s.ep:e.get(is),this.m=r?s.m:e.get(Di),this.Ct=r?s.Ct:e.get(Yt),"number"!=typeof(this.p=r?s.p:e.get(Bt)).document?.nodeType)throw Vi(722);this.localEls=r?s.localEls:new Set,this.rows=n??[]}St(t){return(this.root.deps??=[]).push(t),this.root.c.register(t),this}It(t){return this.p.document.createTextNode(t)}bt(t){return this.p.document.createComment(t)}wt(){return this.bt("au*")}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}it(t){return this.Bt.el(this.c,t)}lt(t){return this.Bt.attr(this.c,t)}st(t){return this.Bt.bindables(t)}yt(t){return new mr(this.def,this.c,this,this.root,t)}rt(t){const e=t.command;return null===e?null:this.Pt.get(this.c,e)}}const vr=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},br=()=>{yr.node=yr.attr=yr.bindable=yr.def=null},wr={name:"unnamed",type:ji},yr={node:null,attr:null,bindable:null,def:null},Cr={id:!0,name:!0,"au-slot":!0,"as-element":!0},$r={checkbox:1,radio:1},kr=Ri("IResourceResolver"),xr=Ri("IBindingCommandResolver",t=>t.singleton(class{constructor(){this.U=new WeakMap}get(t,e){let s=this.U.get(t);return s||this.U.set(t,s={}),e in s?s[e]:s[e]=Dn.get(t,e)}})),Tr=Ei(["name","attribute","mode"]),Sr="as-custom-element",Ar=(t,e,s)=>{const i=e.getAttribute(Sr);if(null===i||""===i)throw Vi(715,t);if(s.has(i))throw Vi(716,i,t);return s.add(i),e.removeAttribute(Sr),i},Rr=Ri("ITemplateCompilerHooks"),Er=Ei({name:z("compiler-hooks"),define:t=>({register(e){Oi(Rr,t).register(e)}}),findAll:t=>t.get(qt(Rr))}),Ir=Object.prototype.hasOwnProperty,Or=Reflect.defineProperty;function Pr(t,e,s){return Or(t,e,{configurable:!0,writable:!0,value:s}),s}function Mr(t,e,s){e in t||Pr(t,e,s)}const Br=Object.assign,jr=Object.freeze,Lr=String,Nr=kt.createInterface,Dr=i.get,Vr=i.define,Fr=(t,...e)=>new Error(`AUR${Lr(t).padStart(4,"0")}:${e.map(Lr)}`);class _r{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw Fr(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw Fr(204);return new _r(null,t,e??new Ur,s??!1)}static fromParent(t,e,s=new Ur){if(null==t)throw Fr(203);return new _r(t,e,s,!1)}}class qr{constructor(t,e){void 0!==t&&(this[t]=e)}}class Ur{}const{astAssign:zr,astEvaluate:Kr,astBind:Hr,astUnbind:Wr}=(()=>{const t="AccessScope",e="AccessMember",s="AccessKeyed",i="Assign",n="ValueConverter",r="BindingBehavior",o="ForOfStatement",a="ArrayDestructuring",h="ObjectDestructuring",l="DestructuringAssignmentLeaf",u="Custom",d=_r.getContext;function p(b,w,y,C){switch(b.$kind){case"AccessThis":{let t=w.overrideContext,e=w,s=b.ancestor;for(;s--&&t;)e=e.parent,t=e?.overrideContext??null;return s<1&&e?e.bindingContext:void 0}case"AccessBoundary":{let t=w;for(;null!=t&&!t.isBoundary;)t=t.parent;return t?t.bindingContext:void 0}case t:{const t=d(w,b.name,b.ancestor);null!==C&&C.observe(t,b.name);const e=t[b.name];if(null==e){if("$host"===b.name)throw Fr(105);return e}return y?.boundFn&&g(e)?e.bind(t):e}case"AccessGlobal":return globalThis[b.name];case"CallGlobal":{const t=globalThis[b.name];if(g(t))return t(...b.args.map(t=>p(t,w,y,C)));if(!y?.strict&&null==t)return;throw Fr(107)}case"ArrayLiteral":return b.elements.map(t=>p(t,w,y,C));case"ObjectLiteral":{const t={};for(let e=0;e<b.keys.length;++e)t[b.keys[e]]=p(b.values[e],w,y,C);return t}case"PrimitiveLiteral":return b.value;case"New":{const t=p(b.func,w,y,C);if(g(t))return new t(...b.args.map(t=>p(t,w,y,C)));throw Fr(107)}case"Template":{let t=b.cooked[0];for(let e=0;e<b.expressions.length;++e)t+=Lr(p(b.expressions[e],w,y,C)),t+=b.cooked[e+1];return t}case"Unary":{const t=p(b.expression,w,y,C);switch(b.operation){case"void":return;case"typeof":return typeof t;case"!":return!t;case"-":return-t;case"+":return+t;case"--":if(null!=C)throw Fr(113);return m(b.expression,w,y,C,t-1)+b.pos;case"++":if(null!=C)throw Fr(113);return m(b.expression,w,y,C,t+1)-b.pos;default:throw Fr(109,b.operation)}}case"CallScope":{const t=d(w,b.name,b.ancestor);if(null==t){if(y?.strict)throw Fr(114,b.name,t);return}const e=t[b.name];if(g(e))return e.apply(t,b.args.map(t=>p(t,w,y,C)));if(null==e){if(y?.strict&&!b.optional)throw Fr(111,b.name);return}throw Fr(111,b.name)}case"CallMember":{const t=p(b.object,w,y,C);if(null==t&&y?.strict&&!b.optionalMember)throw Fr(114,b.name,t);const e=t?.[b.name];if(null==e){if(!b.optionalCall&&y?.strict)throw Fr(111,b.name);return}if(!g(e))throw Fr(111,b.name);const s=e.apply(t,b.args.map(t=>p(t,w,y,C)));return c(t)&&v.includes(b.name)&&C?.observeCollection(t),s}case"CallFunction":{const t=p(b.func,w,y,C);if(g(t))return t(...b.args.map(t=>p(t,w,y,C)));if(null==t){if(!b.optional&&y?.strict)throw Fr(107);return}throw Fr(107)}case"ArrowFunction":{const t=(...t)=>{const e=b.args,s=b.rest,i=e.length-1,n=e.reduce((e,n,r)=>(e[n.name]=s&&r===i?t.slice(r):t[r],e),{}),r=_r.fromParent(w,n);return p(b.body,r,y,C)};return t}case e:{const t=p(b.object,w,y,C);if(null==t){if(!b.optional&&y?.strict)throw Fr(114,b.name,t);return}null===C||b.accessGlobal||C.observe(t,b.name);const e=t[b.name];return y?.boundFn&&g(e)?e.bind(t):e}case s:{const t=p(b.object,w,y,C),e=p(b.key,w,y,C);if(null==t){if(!b.optional&&y?.strict)throw Fr(115,e,t);return}return null===C||b.accessGlobal||C.observe(t,e),t[e]}case"TaggedTemplate":{const t=b.expressions.map(t=>p(t,w,y,C)),e=p(b.func,w,y,C);if(!g(e))throw Fr(110);return e(b.cooked,...t)}case"Binary":{const t=b.left,e=b.right;switch(b.operation){case"&&":return p(t,w,y,C)&&p(e,w,y,C);case"||":return p(t,w,y,C)||p(e,w,y,C);case"??":return p(t,w,y,C)??p(e,w,y,C);case"==":return p(t,w,y,C)==p(e,w,y,C);case"===":return p(t,w,y,C)===p(e,w,y,C);case"!=":return p(t,w,y,C)!=p(e,w,y,C);case"!==":return p(t,w,y,C)!==p(e,w,y,C);case"instanceof":{const s=p(e,w,y,C);return!!g(s)&&p(t,w,y,C)instanceof s}case"in":{const s=p(e,w,y,C);return!!f(s)&&p(t,w,y,C)in s}case"+":return p(t,w,y,C)+p(e,w,y,C);case"-":return p(t,w,y,C)-p(e,w,y,C);case"*":return p(t,w,y,C)*p(e,w,y,C);case"/":return p(t,w,y,C)/p(e,w,y,C);case"%":return p(t,w,y,C)%p(e,w,y,C);case"**":return p(t,w,y,C)**p(e,w,y,C);case"<":return p(t,w,y,C)<p(e,w,y,C);case">":return p(t,w,y,C)>p(e,w,y,C);case"<=":return p(t,w,y,C)<=p(e,w,y,C);case">=":return p(t,w,y,C)>=p(e,w,y,C);default:throw Fr(108,b.operation)}}case"Conditional":return p(b.condition,w,y,C)?p(b.yes,w,y,C):p(b.no,w,y,C);case i:{let t=p(b.value,w,y,C);if("="!==b.op){if(null!=C)throw Fr(113);const e=p(b.target,w,y,C);switch(b.op){case"/=":t=e/t;break;case"*=":t*=e;break;case"+=":t=e+t;break;case"-=":t=e-t;break;default:throw Fr(108,b.op)}}return m(b.target,w,y,C,t)}case n:return y?.useConverter?.(b.name,"toView",p(b.expression,w,y,C),b.args.map(t=>p(t,w,y,C)));case r:return p(b.expression,w,y,C);case"BindingIdentifier":return b.name;case o:return p(b.iterable,w,y,C);case"Interpolation":if(b.isMulti){let t=b.parts[0],e=0;for(;e<b.expressions.length;++e)t+=Lr(p(b.expressions[e],w,y,C)),t+=b.parts[e+1];return t}return`${b.parts[0]}${p(b.firstExpression,w,y,C)}${b.parts[1]}`;case l:return p(b.target,w,y,C);case a:return b.list.map(t=>p(t,w,y,C));case"ArrayBindingPattern":case"ObjectBindingPattern":case h:default:return;case u:return b.evaluate(w,y,C)}}function m(o,g,v,b,w){switch(o.$kind){case t:if("$host"===o.name)throw Fr(106);return d(g,o.name,o.ancestor)[o.name]=w;case e:{const t=p(o.object,g,v,b);if(null==t){if(v?.strict)throw Fr(116,o.name);m(o.object,g,v,b,{[o.name]:w})}else f(t)&&("length"===o.name&&c(t)&&!isNaN(w)?t.splice(w):t[o.name]=w);return w}case s:{const t=p(o.object,g,v,b),e=p(o.key,g,v,b);if(null==t){if(v?.strict)throw Fr(116,e);return m(o.object,g,v,b,{[e]:w}),w}if(c(t)){if("length"===e&&!isNaN(w))return t.splice(w),w;if(y(e))return t.splice(e,1,w),w}return t[e]=w}case i:return m(o.value,g,v,b,w),m(o.target,g,v,b,w);case n:return w=v?.useConverter?.(o.name,"fromView",w,o.args.map(t=>p(t,g,v,b))),m(o.expression,g,v,b,w);case r:return m(o.expression,g,v,b,w);case a:case h:{const t=o.list,e=t.length;let s,i;for(s=0;s<e;s++)switch(i=t[s],i.$kind){case l:m(i,g,v,b,w);break;case a:case h:{if("object"!=typeof w||null===w)throw Fr(112);let t=p(i.source,_r.create(w),v,null);void 0===t&&i.initializer&&(t=p(i.initializer,g,v,null)),m(i,g,v,b,t);break}}break}case l:if(o instanceof Ye){if(null==w)return;if("object"!=typeof w)throw Fr(112);let t=p(o.source,_r.create(w),v,b);void 0===t&&o.initializer&&(t=p(o.initializer,g,v,b)),m(o.target,g,v,b,t)}else{if(null==w)return;if("object"!=typeof w)throw Fr(112);const t=o.indexOrProperties;let e;if(y(t)){if(!Array.isArray(w))throw Fr(112);e=w.slice(t)}else e=Object.entries(w).reduce((e,[s,i])=>(t.includes(s)||(e[s]=i),e),{});m(o.target,g,v,b,e)}break;case u:return o.assign(g,v,w);default:return}}const v="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:p,astAssign:m,astBind:function t(e,s,i){switch(e.$kind){case r:i.bindBehavior?.(e.name,s,e.args.map(t=>p(t,s,i,null))),t(e.expression,s,i);break;case n:i.bindConverter?.(e.name),t(e.expression,s,i);break;case o:t(e.iterable,s,i);break;case u:e.bind?.(s,i)}},astUnbind:function t(e,s,i){switch(e.$kind){case r:i.unbindBehavior?.(e.name,s),t(e.expression,s,i);break;case n:i.unbindConverter?.(e.name),t(e.expression,s,i);break;case o:t(e.iterable,s,i);break;case u:e.unbind?.(s,i)}}}})(),Gr=t=>{const e=t.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{Pr(e,t,()=>{throw Fr(99,t)})})},Xr="pending",Jr="completed",Yr="canceled",Qr=Promise.resolve();let Zr=!1,to=!1;const eo=[],so=[];let io=0,no=null,ro=[],oo=null,ao=null;const ho=()=>{Zr||(Zr=!0,Qr.then(()=>{Zr=!1,to=!0,co()}))},lo=t=>{if(no&&0===eo.length&&0===io)if(no=null,ro.length>0){const t=ro;ro=[],1===t.length?ao(t[0]):ao(new AggregateError(t,"One or more tasks failed."))}else oo(t)},co=()=>{const t=!to;to=!1,no??=new Promise((t,e)=>{oo=t,ao=e});let e=-eo.length;const s=0===eo.length;for(;eo.length>0;){if(++e>1e4){const t=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw eo.length=0,ao?.(t),no=null,t}const s=eo.shift();if("function"==typeof s)try{s()}catch(t){ro.push(t)}else s.run()}const i=ro.slice();if(lo(!s),t&&i.length>0)throw 1===i.length?i[0]:new AggregateError(i,"One or more tasks failed.")},uo=t=>{ho(),eo.push(t)},po=(t,e)=>{const s=new go(t,e?.delay);return null!=s.delay&&s.delay>0?(++io,s.t=setTimeout(()=>{--io,s.t=void 0,s.status!==Yr?(eo.push(s),ho()):lo(!0)},s.delay)):(eo.push(s),ho()),s};class fo extends Error{constructor(t){super(`Task ${t.id} was canceled.`),this.task=t}}class go{get result(){return this.i}get status(){return this.u}constructor(t,e){this.callback=t,this.delay=e,this.id=++go.h,this.u=Xr,this.i=new Promise((t,e)=>{this.C=t,this.A=e})}run(){if(this.u!==Xr)throw new Error(`Cannot run task in ${this.u} state`);let t;this.u="running";try{t=this.callback()}catch(t){return this.u=Yr,this.A(t),void ro.push(t)}t instanceof Promise?(++io,t.then(t=>{this.u=Jr,this.C(t)}).catch(t=>{this.u=Yr,this.A(t),ro.push(t)}).finally(()=>{--io,lo(!0)})):(this.u=Jr,this.C(t))}cancel(){if(void 0!==this.t){clearTimeout(this.t),--io,this.t=void 0,this.u=Yr;const t=new fo(this);return this.A(t),this.i.catch(Mt),lo(!0),!0}if(this.u===Xr){const t=eo.indexOf(this);if(t>-1){eo.splice(t,1),this.u=Yr;const e=new fo(this);return this.A(e),this.i.catch(Mt),lo(!0),!0}}return!1}}go.h=0;class mo{constructor(t,e){this.cb=t,this.P=e,this.id=++mo.R,this.I=!1,this._=[]}run(){try{this.cb()}catch(t){return void ro.push(t)}}O(){this.I||(this.t=setTimeout(()=>{this.M(),this.I||this.O()},this.P))}M(){eo.push(this),ho();const t=this._.splice(0);for(const e of t)e()}next(){return this.I?Promise.resolve():new Promise(t=>this._.push(t))}cancel(){this.I=!0,void 0!==this.t&&(clearTimeout(this.t),this.t=void 0);const t=so.indexOf(this);t>-1&&so.splice(t,1);const e=this._.splice(0);for(const t of e)t()}}mo.R=0;const vo=kt.createInterface("ICoercionConfiguration"),bo=jr({None:0,Observer:1,Node:2,Layout:4});function wo(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;const yo=(()=>{function t(){return Pr(this,"subs",new r)}function e(t){return this.subs.add(t)}function s(t){return this.subs.remove(t)}const i=new WeakSet;function n(n,r){if(!i.has(n)){i.add(n);const r=n.prototype;Or(r,"subs",{get:t}),Mr(r,"subscribe",e),Mr(r,"unsubscribe",s)}return n}class r{constructor(){this.count=0,this.T=[],this.L=[],this.N=!1}add(t){return!this.T.includes(t)&&(this.T[this.T.length]=t,"handleDirty"in t&&(this.L[this.L.length]=t,this.N=!0),++this.count,!0)}remove(t){let e=this.T.indexOf(t);return-1!==e&&(this.T.splice(e,1),e=this.L.indexOf(t),-1!==e&&(this.L.splice(e,1),this.N=this.L.length>0),--this.count,!0)}notify(t,e){for(const s of this.T.slice(0))s.handleChange(t,e)}notifyCollection(t,e){const s=this.T.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}notifyDirty(){if(this.N)for(const t of this.L.slice(0))t.handleDirty()}}return function(t,e){return null==t?n:n(t)}})();class Co{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleDirty(){this.v!==this.o.length&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&(this.subs.notifyDirty(),this.subs.notify(this.v,s))}}ko(Co);class $o{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw Fr(220)}handleDirty(){this.v!==this.o.size&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function ko(t){const e=t.prototype;return Mr(e,"subscribe",xo),Mr(e,"unsubscribe",To),yo(t,null)}function xo(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function To(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}ko($o);const So=(()=>{const t=Symbol.for("__au_arr_obs__"),e=Array[t]??Pr(Array,t,new WeakMap);function s(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function i(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function n(t,e,s,i,n){let r,o,a,h,l,c,u;for(c=s+1;c<i;c++){for(r=t[c],o=e[c],u=c-1;u>=s&&(a=t[u],h=e[u],l=n(a,r),l>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function r(t,e,s,i,o){let a,h,l,c,u,d,p,f,g,m,v,b,w,y,C,$,k,x,T,S=0,A=0;for(;;){if(i-s<=10)return void n(t,e,s,i,o);S=s+(i-s>>1),a=t[s],c=e[s],h=t[i-1],u=e[i-1],l=t[S],d=e[S],p=o(a,h),p>0&&(m=a,v=c,a=h,c=u,h=m,u=v),f=o(a,l),f>=0?(m=a,v=c,a=l,c=d,l=h,d=u,h=m,u=v):(g=o(h,l),g>0&&(m=h,v=u,h=l,u=d,l=m,d=v)),t[s]=a,e[s]=c,t[i-1]=l,e[i-1]=d,b=h,w=u,y=s+1,C=i-1,t[S]=t[y],e[S]=e[y],t[y]=b,e[y]=w;t:for(A=y+1;A<C;A++)if($=t[A],k=e[A],x=o($,b),x<0)t[A]=t[y],e[A]=e[y],t[y]=$,e[y]=k,y++;else if(x>0){do{if(C--,C==A)break t;T=t[C],x=o(T,b)}while(x>0);t[A]=t[C],e[A]=e[C],t[C]=$,e[C]=k,x<0&&($=t[A],k=e[A],t[A]=t[y],e[A]=e[y],t[y]=$,e[y]=k,y++)}i-C<y-s?(r(t,e,C,i,o),i=y):(r(t,e,s,y,o),s=C)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let h,l=!1;const c="__au_arr_on__";function u(){if(void 0===h&&function(){const t=o.push,n=o.unshift,l=o.pop,c=o.shift,u=o.splice,d=o.reverse,p=o.sort;h={push:function(...s){const i=e.get(this);if(void 0===i)return t.apply(this,s);const n=this.length,r=s.length;if(0===r)return n;this.length=i.indexMap.length=n+r;let o=n;for(;o<this.length;)this[o]=s[o-n],i.indexMap[o]=-2,o++;return i.notify(),this.length},unshift:function(...t){const s=e.get(this);if(void 0===s)return n.apply(this,t);const i=t.length,r=new Array(i);let o=0;for(;o<i;)r[o++]=-2;n.apply(s.indexMap,r);const a=n.apply(this,t);return s.notify(),a},pop:function(){const t=e.get(this);if(void 0===t)return l.call(this);const s=t.indexMap,i=l.call(this),n=s.length-1;return s[n]>-1&&(s.deletedIndices.push(s[n]),s.deletedItems.push(i)),l.call(s),t.notify(),i},shift:function(){const t=e.get(this);if(void 0===t)return c.call(this);const s=t.indexMap,i=c.call(this);return s[0]>-1&&(s.deletedIndices.push(s[0]),s.deletedItems.push(i)),c.call(s),t.notify(),i},splice:function(...t){const s=t[0],i=t[1],n=e.get(this);if(void 0===n)return u.apply(this,t);const r=this.length,o=0|s,a=o<0?Math.max(r+o,0):Math.min(o,r),h=n.indexMap,l=t.length,c=0===l?0:1===l?r-a:i;let d=a;if(c>0){const t=d+c;for(;d<t;)h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(this[d])),d++}if(d=0,l>2){const t=l-2,e=new Array(t);for(;d<t;)e[d++]=-2;u.call(h,s,i,...e)}else u.apply(h,t);const p=u.apply(this,t);return(c>0||d>0)&&n.notify(),p},reverse:function(){const t=e.get(this);if(void 0===t)return d.call(this),this;const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const e=s-n-1,i=this[n],r=t.indexMap[n],o=this[e],a=t.indexMap[e];this[n]=o,t.indexMap[n]=a,this[e]=i,t.indexMap[e]=r,n++}return t.notify(),this},sort:function(t){const n=e.get(this);if(void 0===n)return p.call(this,t),this;let o=this.length;if(o<2)return this;r(this,n.indexMap,0,o,i);let a=0;for(;a<o&&void 0!==this[a];)a++;void 0!==t&&g(t)||(t=s),r(this,n.indexMap,0,a,t);let h=!1;for(a=0,o=n.indexMap.length;o>a;++a)if(n.indexMap[a]!==a){h=!0;break}return h&&n.notify(),this}};for(const t of a)Or(h[t],"observing",{value:!0})}(),!Dr(c,Array)){Vr(!0,Array,c);for(const t of a)!0!==o[t].observing&&Pr(o,t,h[t])}}class d{constructor(t){this.type=1,l||(l=!0,u()),this.indexObservers={},this.collection=t,this.indexMap=wo(t.length),this.lenObs=void 0,e.set(t,this)}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.length;this.indexMap=wo(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new Co(this)}getIndexObserver(t){return this.indexObservers[t]??=new p(this,t)}}yo(d,null);class p{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}return yo(p,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new d(t)),u()),s}})(),Ao=(()=>{const t=Symbol.for("__au_set_obs__"),e=Set[t]??Pr(Set,t,new WeakMap),{add:s,clear:i,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(t){const i=e.get(this);if(void 0===i)return s.call(this,t),this;const n=this.size;return s.call(this,t),this.size===n||(i.indexMap[n]=-2,i.notify()),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}i++}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=wo(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=wo(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new $o(this)}}return yo(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)Pr(t,e,o[e])}(t)),s}})(),Ro=(()=>{const t=Symbol.for("__au_map_obs__"),e=Map[t]??Pr(Map,t,new WeakMap),{set:s,clear:i,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(t,i){const n=e.get(this);if(void 0===n)return s.call(this,t,i),this;const r=this.get(t),o=this.size;if(s.call(this,t,i),this.size===o){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==r&&(n.indexMap.deletedIndices.push(n.indexMap[e]),n.indexMap.deletedItems.push(s),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[o]=-2,n.notify(),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}++i}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=wo(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=wo(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new $o(this)}}return yo(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)Pr(t,e,o[e])}(t)),s}})(),Eo=(()=>{class t{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(s,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(t,e){e.unsubscribe(this.b)}function s(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function i(){return Pr(this,"obs",new t(this))}function n(t,e){this.obs.add(this.oL.getObserver(t,e))}function r(t){let e;if(c(t))e=So(t);else if(u(t))e=Ao(t);else{if(!d(t))throw Fr(210,t);e=Ro(t)}this.obs.add(e)}function o(t){this.obs.add(t)}function a(){throw Fr(99,"handleChange")}function h(){throw Fr(99,"handleCollectionChange")}return function(t,e){const s=t.prototype;return Mr(s,"observe",n),Mr(s,"observeCollection",r),Mr(s,"subscribeTo",o),Or(s,"obs",{get:i}),Mr(s,"handleChange",a),Mr(s,"handleCollectionChange",h),t}})();function Io(t,e){return null==t?Eo:Eo(t,e)}let Oo=null;const Po=[];let Mo=!1;function Bo(){return Oo}function jo(t){if(null==t)throw Fr(206);if(null==Oo)return Oo=t,Po[0]=Oo,void(Mo=!0);if(Oo===t)throw Fr(207);Po.push(t),Oo=t,Mo=!0}function Lo(t){if(null==t)throw Fr(208);if(Oo!==t)throw Fr(209);Po.pop(),Oo=Po.length>0?Po[Po.length-1]:null,Mo=null!=Oo}const No=jr({get current(){return Oo},get connecting(){return Mo},enter:jo,exit:Lo,pause:function(){Mo=!1},resume:function(){Mo=!0}}),Do=Reflect.get,Vo=Object.prototype.toString,Fo=new WeakMap;function _o(t){switch(Vo.call(t)){case"[object Object]":return!0!==t.constructor.__au_nw__;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const qo="__raw__";function Uo(t){return _o(t)?zo(t):t}function zo(t){return Fo.get(t)??function(t){const e=c(t)?Xo:d(t)||u(t)?ba:Go,s=new Proxy(t,e);return Fo.set(t,s),Fo.set(s,s),s}(t)}function Ko(t){return t[qo]??t}function Ho(t){return _o(t)&&t[qo]||t}function Wo(t,e){if("constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${Lr(e)}__`])return!0;const s=Reflect.getOwnPropertyDescriptor(t,e);return!1===s?.configurable&&!1===s.writable}const Go={get(t,e,s){if(e===qo)return t;const i=Bo();return!Mo||Wo(t,e)||null==i?Do(t,e,s):(i.observe(t,e),Uo(Do(t,e,s)))},deleteProperty:(t,e)=>delete t[e]},Xo={get(t,e,s){if(e===qo)return t;if(!Mo||Wo(t,e)||null==Oo)return Do(t,e,s);switch(e){case"length":return Oo.observe(t,"length"),t.length;case"map":return Jo;case"includes":return Zo;case"indexOf":return ta;case"lastIndexOf":return ea;case"every":return Yo;case"filter":return Qo;case"find":return ia;case"findIndex":return sa;case"flat":return na;case"flatMap":return ra;case"join":return oa;case"push":return ha;case"pop":return aa;case"reduce":return ma;case"reduceRight":return va;case"reverse":return da;case"shift":return la;case"unshift":return ca;case"slice":return ga;case"splice":return ua;case"some":return pa;case"sort":return fa;case"keys":return Sa;case"values":case Symbol.iterator:return Aa;case"entries":return Ra}return Oo.observe(t,e),Uo(Do(t,e,s))},ownKeys:t=>(Bo()?.observe(t,"length"),Reflect.ownKeys(t))};function Jo(t,e){const s=Ko(this),i=s.map((s,i)=>Ho(t.call(e,Uo(s),i,this)));return Ea(Oo,s),Uo(i)}function Yo(t,e){const s=Ko(this),i=s.every((s,i)=>t.call(e,Uo(s),i,this));return Ea(Oo,s),i}function Qo(t,e){const s=Ko(this),i=s.filter((s,i)=>Ho(t.call(e,Uo(s),i,this)));return Ea(Oo,s),Uo(i)}function Zo(t){const e=Ko(this),s=e.includes(Ho(t));return Ea(Oo,e),s}function ta(t){const e=Ko(this),s=e.indexOf(Ho(t));return Ea(Oo,e),s}function ea(t){const e=Ko(this),s=e.lastIndexOf(Ho(t));return Ea(Oo,e),s}function sa(t,e){const s=Ko(this),i=s.findIndex((s,i)=>Ho(t.call(e,Uo(s),i,this)));return Ea(Oo,s),i}function ia(t,e){const s=Ko(this),i=s.find((e,s)=>t(Uo(e),s,this),e);return Ea(Oo,s),Uo(i)}function na(){const t=Ko(this);return Ea(Oo,t),Uo(t.flat())}function ra(t,e){const s=Ko(this);return Ea(Oo,s),zo(s.flatMap((s,i)=>Uo(t.call(e,Uo(s),i,this))))}function oa(t){const e=Ko(this);return Ea(Oo,e),e.join(t)}function aa(){return Uo(Ko(this).pop())}function ha(...t){return Ko(this).push(...t)}function la(){return Uo(Ko(this).shift())}function ca(...t){return Ko(this).unshift(...t)}function ua(...t){return Uo(Ko(this).splice(...t))}function da(...t){return Uo(Ko(this).reverse())}function pa(t,e){const s=Ko(this),i=s.some((s,i)=>Ho(t.call(e,Uo(s),i,this)));return Ea(Oo,s),i}function fa(t){const e=Ko(this),s=e.sort(t);return Ea(Oo,e),Uo(s)}function ga(t,e){const s=Ko(this);return Ea(Oo,s),zo(s.slice(t,e))}function ma(t,e){const s=Ko(this),i=s.reduce((e,s,i)=>t(e,Uo(s),i,this),e);return Ea(Oo,s),Uo(i)}function va(t,e){const s=Ko(this),i=s.reduceRight((e,s,i)=>t(e,Uo(s),i,this),e);return Ea(Oo,s),Uo(i)}const ba={get(t,e,s){if(e===qo)return t;const i=Bo();if(!Mo||Wo(t,e)||null==i)return Do(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return xa;case"delete":return Ta;case"forEach":return wa;case"add":if(u(t))return ka;break;case"get":if(d(t))return Ca;break;case"set":if(d(t))return $a;break;case"has":return ya;case"keys":return Sa;case"values":return Aa;case"entries":return Ra;case Symbol.iterator:return d(t)?Ra:Aa}return Uo(Do(t,e,s))}};function wa(t,e){const s=Ko(this);return Ea(Oo,s),s.forEach((s,i)=>{t.call(e,Uo(s),Uo(i),this)})}function ya(t){const e=Ko(this);return Ea(Oo,e),e.has(Ho(t))}function Ca(t){const e=Ko(this);return Ea(Oo,e),Uo(e.get(Ho(t)))}function $a(t,e){return Uo(Ko(this).set(Ho(t),Ho(e)))}function ka(t){return Uo(Ko(this).add(Ho(t)))}function xa(){return Uo(Ko(this).clear())}function Ta(t){return Uo(Ko(this).delete(Ho(t)))}function Sa(){const t=Ko(this);Ea(Oo,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Uo(s),done:i}},[Symbol.iterator](){return this}}}function Aa(){const t=Ko(this);Ea(Oo,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Uo(s),done:i}},[Symbol.iterator](){return this}}}function Ra(){const t=Ko(this);Ea(Oo,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Uo(s[0]),Uo(s[1])],done:i}},[Symbol.iterator](){return this}}}const Ea=(t,e)=>t?.observeCollection(e),Ia=jr({getProxy:zo,getRaw:Ko,wrap:Uo,unwrap:Ho,rawKey:qo});class Oa{constructor(t,e,s,i,n="async"){this.type=1,this.ov=void 0,this.v=void 0,this.V=!1,this.B=!1,this.D=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.H=Uo(t),this.$get=e,this.$set=s,this.oL=i,this.$=n}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1,this.V=!1),this.v)}setValue(t){if(!g(this.$set))throw Fr(221);void 0!==this.j&&(t=this.j.call(null,t,this.F)),b(t,this.v)||(this.$set.call(this.o,t),this.run())}useCoercer(t,e){return this.j=t,this.F=e,!0}useCallback(t){return this.cb=t,!0}handleDirty(){this.D||(this.D=!0,this.subs.notifyDirty())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.compute(),this.D=!1,this.V=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll(),this.ov=void 0,this.V=!0)}run(){"sync"!==this.$?this.B||(this.B=!0,uo(()=>{this.B=!1,this.U()})):this.U()}U(){const t=this.v,e=this.ov,s=this.compute();this.D=!1,this.V&&b(s,t)||(this.cb?.(s,e),this.subs.notify(s,e),this.ov=this.v=s,this.V=!0)}compute(){this.obs.version++;try{return jo(this),this.v=Ho(this.$get.call(this.H,this.H,this))}finally{this.obs.clear(),Lo(this)}}}Io(Oa,null),yo(Oa,null),"function"==typeof SuppressedError&&SuppressedError;const Pa=(()=>{const t=new WeakMap,e=t=>(t=>"symbol"==typeof t)(t)?t:String(t);return{get:(s,i)=>t.get(s)?.get(e(i)),W:(s,i)=>t.get(s)?.get(e(i))?.flush,set:(s,i,n)=>{t.has(s)||t.set(s,new Map),t.get(s).set(e(i),n)}}})(),Ma=Nr("IDirtyChecker",void 0),Ba={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class ja{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.G=t}getValue(){return this.obj[this.key]}setValue(t){throw Fr(219,this.key)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.G.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.G.removeProperty(this)}}class La{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Na{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class Da{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){void 0!==this.j&&(t=this.j.call(void 0,t,this.F));const e=this.v;if(this.iO){if(b(t,this.v))return;this.v=t,this.subs.notifyDirty(),this.subs.notify(t,e),b(t,this.v)&&this.cb?.(t,e)}else this.v=this.o[this.k]=t,this.cb?.(t,e)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.j=t,this.F=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Or(this.o,this.k,{enumerable:!0,configurable:!0,get:Br(()=>this.getValue(),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(Or(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}yo(Da,null);const Va=new Na,Fa=Nr("IObserverLocator",t=>t.singleton(za)),_a=Nr("INodeObserverLocator",t=>t.cachedCallback(t=>new qa));class qa{handles(){return!1}getObserver(){return Va}getAccessor(){return Va}}const Ua=Nr("IComputedObserverLocator",t=>t.singleton(class{getObserver(t,e,s,i){const n=new Oa(t,s.get,s.set,i,Pa.W(t,e));return Or(t,e,{enumerable:s.enumerable,configurable:!0,get:Br(()=>n.getValue(),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}}));class za{constructor(){this.J=[],this.G=ht(Ma),this.X=ht(_a),this.Y=ht(Ua)}addAdapter(t){this.J.push(t)}getObserver(t,e){if(null==t)throw Fr(199,e);if(!p(t))return new La(t,g(e)?"":e);if(g(e))return new Oa(t,e,void 0,this);const s=Ga(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.X.handles(t,e,this)?this.X.getAccessor(t,e,this):Va}getArrayObserver(t){return So(t)}getMapObserver(t){return Ro(t)}getSetObserver(t){return Ao(t)}createObserver(t,e){if(this.X.handles(t,e,this))return this.X.getObserver(t,e,this);switch(e){case"length":if(c(t))return So(t).getLengthObserver();break;case"size":if(d(t))return Ro(t).getLengthObserver();if(u(t))return Ao(t).getLengthObserver();break;default:if(c(t)&&y(e))return So(t).getIndexObserver(Number(e))}let s=Wa(t,e);if(void 0===s){let i=Ha(t);for(;null!==i&&(s=Wa(i,e),void 0===s);)i=Ha(i)}if(void 0!==s&&!Ir.call(s,"value")){let i=this.Z(t,e,s);return null==i&&(i=(s.get?.getObserver)?.(t)),null==i?s.configurable?this.Y.getObserver(t,e,s,this):this.G.createProperty(t,e):i}return new Da(t,e)}Z(t,e,s){if(this.J.length>0)for(const i of this.J){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}const Ka=t=>{let e;return c(t)?e=So(t):d(t)?e=Ro(t):u(t)&&(e=Ao(t)),e},Ha=Object.getPrototypeOf,Wa=Object.getOwnPropertyDescriptor,Ga=t=>{let e=t.$observers;return void 0===e&&Or(t,"$observers",{value:e=v()}),e};Io(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this.et=void 0,this.run=()=>{if(this.stopped)throw Fr(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{this.et?.call(void 0),jo(this),this.et=this.fn(this)}finally{this.obs.clear(),this.running=!1,Lo(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Fr(226);this.run()}else this.runCount=0}},this.stop=()=>{this.et?.call(void 0),this.et=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}},null);class Xa{constructor(t,e,s,i){this.oL=e,this.v=void 0,this.boundFn=!1,this.s=t,this.ast=s,this.cb=i}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const t=this.v,e=Kr(this.ast,this.s,this,this);this.obs.clear(),b(e,t)||(this.v=e,this.cb.call(void 0,e,t))}stop(){this.obs.clearAll(),this.v=void 0}}Io(Xa,null),Gr(Xa);const Ja="pending",Ya="running",Qa="completed",Za="canceled",th=new Map,eh=t=>()=>{throw mh(`AUR1005:${t}`)};class sh{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??eh(s)}),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??eh("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new ih(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=th.get(t);return void 0===s&&th.set(t,s=new sh(t,e)),s}static set(t,e){th.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class ih{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(ph)&&this.h.every(ph)&&this.u.every(ph)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.M=0,this.P=0,this.U=()=>{this.R||(this.R=!0,this.M=this.q(),this.$request())},this.q=t.performanceNow,this.I=new ah(t.console)}flush(t=this.q()){if(this.R=!1,this.P=t,void 0===this.$){let e,s;if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));for(;this.i.length>0;)if((s=this.i.shift()).run(),s.status===Ya){if(!0===s.suspend)return this.$=s,void this.U();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));if((this.i.length>0||this.u.length>0||this.t>0)&&this.U(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.U()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=dh()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,suspend:r}={...hh,...e};if(i){if(s>0)throw fh();if(n)throw gh()}0===this.i.length&&this.U();const o=this.q(),a=new oh(this.I,this,o,o+s,i,n,r,t);return i?this.i[this.i.length]=a:0===s?this.h[this.h.length]=a:this.u[this.u.length]=a,a}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw mh(`Task #${t.id} could not be found`);this.u.splice(e,1)}}_(t){t.reset(this.q()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}C(t){if(!0===t.suspend){if(this.$!==t)throw mh(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class nh extends Error{constructor(t){super("Task was canceled."),this.task=t}}let rh=0;class oh{get result(){const t=this.N;if(void 0===t)switch(this.j){case Ja:{const t=this.N=dh();return this.F=t.resolve,this.O=t.reject,t}case Ya:throw mh("Trying to await task from within task will cause a deadlock.");case Qa:return this.N=Promise.resolve();case Za:return this.N=Promise.reject(new nh(this))}return t}get status(){return this.j}constructor(t,e,s,i,n,r,o,a){this.taskQueue=e,this.createdTime=s,this.queueTime=i,this.preempt=n,this.persistent=r,this.suspend=o,this.callback=a,this.id=++rh,this.F=void 0,this.O=void 0,this.N=void 0,this.j=Ja,this.I=t}run(t=this.taskQueue.platform.performanceNow()){if(this.j!==Ja)throw mh(`Cannot run task in ${this.j} state`);const{persistent:e,taskQueue:s,callback:i,F:n,O:r,createdTime:o}=this;let a;this.j=Ya;try{a=i(t-o),a instanceof Promise?a.then(t=>{this.persistent?s._(this):(this.j=e?Za:Qa,this.dispose()),s.C(this),void 0!==n&&n(t)}).catch(t=>{if(this.persistent||this.dispose(),s.C(this),void 0===r)throw t;r(t)}):(this.persistent?s._(this):(this.j=e?Za:Qa,this.dispose()),void 0!==n&&n(a))}catch(t){if(this.persistent||this.dispose(),void 0===r)throw t;r(t)}}cancel(){if(this.j===Ja){const t=this.taskQueue,e=this.O;return t.remove(this),t.isEmpty&&t.cancel(),this.j=Za,this.dispose(),void 0!==e&&e(new nh(this)),!0}return!(this.j!==Ya||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.j=Ja,this.F=void 0,this.O=void 0,this.N=void 0}dispose(){this.callback=void 0,this.F=void 0,this.O=void 0,this.N=void 0}}class ah{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof ih){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.persistent,h=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${a} status=${e.j} suspend=${h}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const hh={delay:0,preempt:!1,persistent:!1,suspend:!1};let lh,ch;const uh=(t,e)=>{lh=t,ch=e},dh=()=>{const t=new Promise(uh);return t.resolve=lh,t.reject=ch,t},ph=t=>t.persistent,fh=()=>mh("AUR1006"),gh=()=>mh("AUR1007"),mh=t=>new Error(t);class vh extends sh{static getOrCreate(t,e={}){let s=vh.t.get(t);return void 0===s&&vh.t.set(t,s=new vh(t,e)),s}static set(t,e){vh.t.set(t,e)}get domWriteQueue(){return this.domQueue}get domReadQueue(){return this.domQueue}constructor(t,e={}){super(t,e),"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]?.bind(t)??(t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)})(s)),this.domQueue=(()=>{let t=!1,e=-1;const s=()=>{e=-1,!0===t&&(t=!1,i.flush())},i=new ih(this,()=>{t=!0,-1===e&&(e=this.requestAnimationFrame(s))},()=>{t=!1,e>-1&&(this.cancelAnimationFrame(e),e=-1)});return i})()}}vh.t=new WeakMap,"function"==typeof SuppressedError&&SuppressedError;const{default:bh,oneTime:wh,toView:yh,fromView:Ch,twoWay:$h}=Li,kh=i.get,xh=i.has,Th=i.define,{annotation:Sh}=K,Ah=Sh.keyFor,Rh=Object,Eh=String,Ih=Rh.prototype,Oh=Ih.hasOwnProperty,Ph=Rh.freeze,Mh=Rh.assign,Bh=Rh.getOwnPropertyNames,jh=Rh.keys,Lh=v(),Nh=(t,e,s)=>{if(!0===Lh[e])return!0;if(!m(e))return!1;const i=e.slice(0,5);return Lh[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},Dh=t=>{throw t},Vh=Reflect.defineProperty,Fh=(t,e,s)=>(Vh(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),_h=(t,e,s)=>t.addSignalListener(e,s),qh=(t,e,s)=>t.removeSignalListener(e,s),Uh="IsProperty",zh="pending",Kh="running",Hh=bo.Observer,Wh=bo.Node,Gh=bo.Layout,Xh=(t,...e)=>{const s=Eh(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(Eh)}`)};function Jh(t,e){let s;function i(t,e){let i;switch(e.kind){case"getter":case"field":{const t=e.name;if("string"!=typeof t)throw Xh(227);i=t;break}case"class":if(null==s)throw Xh(228);if("string"==typeof s)i=s;else{const t=s.name;if(!t)throw Xh(229);if("string"!=typeof t)throw Xh(227);i=t}}const n=null==s||"string"==typeof s?{name:i}:s;(e.metadata[Yh]??=v())[i]=Zh.create(i,n)}return arguments.length>1?(s={},void i(0,e)):m(t)?(s=t,i):(s=void 0===t?{}:t,i)}const Yh=Ah("bindables"),Qh=Ph({name:Yh,keyFrom:t=>`${Yh}:${t}`,from(...t){const e={},s=Array.isArray;function i(t,s){e[t]=s instanceof Zh?s:Zh.create(t,!0===s?{}:s)}return t.forEach(function(t){s(t)?t.forEach(t=>m(t)?function(t){e[t]=Zh.create(t)}(t):i(t.name,t)):t instanceof Zh?e[t.name]=t:void 0!==t&&jh(t).forEach(e=>i(e,t[e]))}),e},getAll(t){const e=[],s=E(t);let i,n=s.length;for(;--n>=0;){i=s[n];const t=kh(Yh,i);null!=t&&e.push(...Object.values(t))}return e},i(t,e){let s=kh(Yh,e);null==s&&Th(s=v(),e,Yh),s[t.name]=t}});class Zh{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e={}){const s=e.mode??yh;return new Zh(e.attribute??x(t),e.callback??`${t}Changed`,m(s)?Li[s]??bh:s,e.primary??!1,e.name??t,e.set??function(t={}){const e=t.type??null;if(null==e)return Mt;let s;switch(e){case Number:case Boolean:case String:case BigInt:s=e;break;default:{const t=e.coerce;s="function"==typeof t?t.bind(e):tl.for(e)??Mt;break}}return s===Mt?s:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(s,t.nullable)}(e))}}const tl={key:Ah("coercer"),define(t,e){Th(t[e].bind(t),t,tl.key)},for:t=>kh(tl.key,t)},el=kt.createInterface,sl=V.singleton,il=V.aliasTo,nl=V.instance,rl=(t,e,s)=>t.registerResolver(e,s),ol=(t,e,s,i="__au_static_resource__")=>{let n=kh(i,t);return null==n&&t.$au?.type===e&&(n=s(t.$au,t),Th(n,t,i)),n};class al{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return m(t)?(s=t,i={name:s}):(s=t.name,i=t),new al(e,R(cl(e,"name"),s),A(cl(e,"aliases"),i.aliases,e.aliases),dl.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?ul(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:sl(s,s),il(s,i),...n.map(t=>il(s,ul(t))))}}const hl="binding-behavior",ll=z(hl),cl=(t,e)=>kh(Ah(e),t),ul=t=>`${ll}:${t}`,dl=Ph({name:ll,keyFrom:ul,isType:t=>g(t)&&(xh(ll,t)||t.$au?.type===hl),define(t,e){const s=al.create(t,e),i=s.Type;return Th(s,i,ll,U),i},getDefinition(t){const e=kh(ll,t)??ol(t,hl,al.create);if(void 0===e)throw Xh(151,t);return e},find(t,e){const s=t.find(hl,e);return null==s?null:kh(ll,s)??ol(s,hl,al.create)??null},get:(t,e)=>t.get(Ft(ul(e)))}),pl=new Map,fl=t=>({type:hl,name:t});class gl{bind(t,e){pl.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=pl.get(e),pl.delete(e)}}class ml extends gl{get mode(){return wh}}ml.$au=fl("oneTime");class vl extends gl{get mode(){return yh}}vl.$au=fl("toView");class bl extends gl{get mode(){return Ch}}bl.$au=fl("fromView");class wl extends gl{get mode(){return $h}}wl.$au=fl("twoWay");const yl=new WeakMap;class Cl{constructor(){this.p=ht(Bt)}bind(t,e,s,i){const n={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:m(i)?[i]:i??Ot},r=e.limit?.(n);null==r||yl.set(e,r)}unbind(t,e){yl.get(e)?.dispose(),yl.delete(e)}}Cl.$au={type:hl,name:"debounce"};const $l=el("ISignaler",t=>t.singleton(kl));class kl{constructor(){this.signals=v()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){(this.signals[t]??=new Set).add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}class xl{constructor(){this.h=new Map,this.u=ht($l)}bind(t,e,...s){if(!("handleChange"in e))throw Xh(817);if(0===s.length)throw Xh(818);let i;for(i of(this.h.set(e,s),s))_h(this.u,i,e)}unbind(t,e){const s=this.h.get(e);let i;for(i of(this.h.delete(e),s))qh(this.u,i,e)}}xl.$au={type:hl,name:"signal"};const Tl=new WeakMap;class Sl{constructor(){({performanceNow:this.C,taskQueue:this.B}=ht(Bt))}bind(t,e,s,i){const n={type:"throttle",delay:s??200,now:this.C,queue:this.B,signals:m(i)?[i]:i??Ot},r=e.limit?.(n);null==r||Tl.set(e,r)}unbind(t,e){Tl.get(e)?.dispose(),Tl.delete(e)}}Sl.$au={type:hl,name:"throttle"};const Al=el("IAppTask");class Rl{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(nl(Al,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}function El(t){return function(e,s){return g(s)?new Rl(t,e,s):new Rl(t,null,e)}}Ph({creating:El("creating"),hydrating:El("hydrating"),hydrated:El("hydrated"),activating:El("activating"),activated:El("activated"),deactivating:El("deactivating"),deactivated:El("deactivated")});const Il=Bt;class Ol{}const Pl=(()=>{const t=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(e,s){return t.get(e)?.[s]??null}set(s,i,n){const r=t.get(s)??(t.set(s,new Ol),t.get(s));if(i in r)throw new Error(`Node already associated with a controller, remove the ref "${i}" first before associating with another controller`);return e||(s.$au??=r),r[i]=n}}})(),Ml=el("INode"),Bl=(()=>{const t=new WeakMap;return Ph({add(e,s){let i=t.get(e);null==i&&t.set(e,i=[]),i.push(s)},getDefinitions:e=>t.get(e)??Ot})})();class jl{get type(){return"custom-attribute"}constructor(t,e,s,i,n,r,o,a,h,l,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=l,this.containerStrategy=c}static create(t,e){let s,i;m(t)?(s=t,i={name:s}):(s=t.name,i=t);const n=R(Vl(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,yh);for(const t of Object.values(Qh.from(i.bindables)))Qh.i(t,e);return new jl(e,R(Vl(e,"name"),s),A(Vl(e,"aliases"),i.aliases,e.aliases),Dl(s),m(n)?Li[n]??bh:n,R(Vl(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Qh.from(...Qh.getAll(e),Vl(e,"bindables"),e.bindables,i.bindables),R(Vl(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),A(Bl.getDefinitions(e),e.watches),A(Vl(e,"dependencies"),i.dependencies,e.dependencies),R(Vl(e,"containerStrategy"),i.containerStrategy,e.containerStrategy,"reuse"))}register(t,e){const s=this.Type,i="string"==typeof e?Dl(e):this.key,n=this.aliases;t.has(i,!1)?jl.warnDuplicate&&t.get(Yt).warn(Xh(154,this.name)):t.register(t.has(s,!1)?null:sl(s,s),il(s,i),...n.map(t=>il(s,Dl(t))))}toString(){return`au:ca:${this.name}`}}jl.warnDuplicate=!0;const Ll="custom-attribute",Nl=z(Ll),Dl=t=>`${Nl}:${t}`,Vl=(t,e)=>kh(Ah(e),t),Fl=(t,e)=>Pl.get(t,Dl(e))??void 0,_l=(t,e)=>{const s=jl.create(t,e),i=s.Type;return Th(s,i,Nl,U),i},ql=t=>{const e=kh(Nl,t)??ol(t,Ll,jl.create);if(void 0===e)throw Xh(759,t);return e},Ul=Ph({name:Nl,keyFrom:Dl,isType:t=>g(t)&&(xh(Nl,t)||t.$au?.type===Ll),for:Fl,closest:(t,e)=>{let s="",i="";if(m(e))s=Dl(e),i=e;else{const t=ql(e);s=t.key,i=t.name}let n=t;for(;null!==n;){const t=Pl.get(n,s);if(t?.is(i))return t;n=Sd(n)}return null},define:_l,getDefinition:ql,annotate(t,e,s){Th(s,t,Ah(e))},getAnnotation:Vl,find(t,e){const s=t.find(Ll,e);return null===s?null:kh(Nl,s)??ol(s,Ll,jl.create)??null}}),zl=el("ILifecycleHooks");class Kl{constructor(t,e){this.definition=t,this.instance=e}}class Hl{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==Ih;){for(const t of Bh(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Hl(e,s)}}const Wl=(()=>{const t=new WeakMap,e=new WeakMap;return Ph({define(t,s){const i=Hl.create(t,s),n=i.Type;return e.set(n,i),{register(t){sl(zl,n).register(t)}}},resolve(s){let i=t.get(s);if(void 0===i){t.set(s,i=new Gl);const n=s.root,r=n===s?s.getAll(zl):s.has(zl,!1)?n.getAll(zl).concat(s.getAll(zl)):n.getAll(zl);let o,a,h,l,c;for(o of r)for(l of(a=e.get(o.constructor),h=new Kl(a,o),a.propertyNames))c=i[l],void 0===c?i[l]=[h]:c.push(h)}return i}})})();class Gl{}class Xl{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return m(t)?(s=t,i={name:s}):(s=t.name,i=t),new Xl(e,R(Ql(e,"name"),s),A(Ql(e,"aliases"),i.aliases,e.aliases),tc.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Zl(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:sl(s,s),il(s,i),...n.map(t=>il(s,Zl(t))))}}const Jl="value-converter",Yl=z(Jl),Ql=(t,e)=>kh(Ah(e),t),Zl=t=>`${Yl}:${t}`,tc=Ph({name:Yl,keyFrom:Zl,isType:t=>g(t)&&(xh(Yl,t)||t.$au?.type===Jl),define(t,e){const s=Xl.create(t,e),i=s.Type;return Th(s,i,Yl,U),i},getDefinition(t){const e=kh(Yl,t)??ol(t,Jl,Xl.create);if(void 0===e)throw Xh(152,t);return e},annotate(t,e,s){Th(s,t,Ah(e))},getAnnotation:Ql,find(t,e){const s=t.find(Jl,e);return null==s?null:kh(Yl,s)??ol(s,Jl,Xl.create)??null},get:(t,e)=>t.get(Ft(Zl(e)))});class ec{constructor(t,e){this.v=void 0,this.b=t,this.A=e}flush(){this.b.isBound&&this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==Kr(s.ast,s.s,s,null)&&(this.v=t,this.A.add(this))}}const sc=(()=>{function t(t){this.s=t}return e=>{Fh(e.prototype,"useScope",t)}})(),ic=(()=>{class t{}const e=new WeakMap,s=new WeakMap,i=new WeakMap;function n(t){return this.l.get(t)}function r(e,i){let n=s.get(e);return null==n&&s.set(e,n=new t),n[i]??=dl.get(e.l,i)}function o(t,e,s){const n=r(this,t);if(null==n)throw Xh(101,t);let o=i.get(this);if(null==o&&i.set(this,o={}),o[t])throw Xh(102,t);n.bind?.(e,this,...s)}function a(t,e){const s=r(this,t),n=i.get(this);s?.unbind?.(e,this),null!=n&&(n[t]=!1)}function h(s,i){let n=e.get(s);return null==n&&e.set(s,n=new t),n[i]??=tc.get(s.l,i)}function l(t){const e=h(this,t);if(null==e)throw Xh(103,t);const s=e.signals;if(null!=s){const t=this.l.get($l),e=s.length;let i=0;for(;i<e;++i)t.addSignalListener(s[i],this)}}function c(t){const e=h(this,t);if(void 0===e?.signals)return;const s=this.l.get($l);let i=0;for(;i<e.signals.length;++i)s.removeSignalListener(e.signals[i],this)}function u(t,e,s,i){const n=h(this,t);if(null==n)throw Xh(103,t);const r=!0===n.withContext;let o=null;switch(r&&(o={source:this.l.get(od).controller.viewModel,binding:this}),e){case"toView":return"toView"in n?r?n.toView(s,o,...i):n.toView(s,...i):s;case"fromView":return"fromView"in n?r?n.fromView?.(s,o,...i):n.fromView?.(s,...i):s}}return t=>{const e=t.prototype;Fh(e,"get",n),Fh(e,"bindBehavior",o),Fh(e,"unbindBehavior",a),Fh(e,"bindConverter",l),Fh(e,"unbindConverter",c),Fh(e,"useConverter",u)}})(),nc=el("IFlushQueue",t=>t.singleton(rc));class rc{constructor(){this.R=!1,this.T=new Set}get count(){return this.T.size}add(t){if(this.T.add(t),!this.R){this.R=!0;try{this.T.forEach(oc)}finally{this.R=!1}}}clear(){this.T.clear(),this.R=!1}}const oc=function(t,e,s){s.delete(t),t.flush()},ac=(()=>{const t=new WeakSet;return(e,s)=>{Fh(e.prototype,"limit",function(e){if(t.has(this))throw Xh(9996);t.add(this);const i=s(this,e),n=e.signals,r=n.length>0?this.get($l):null,o=this[i],a=(...t)=>o.call(this,...t),h="debounce"===e.type?((t,e,s)=>{let i,n,r,o=!1;const a=()=>e(r),h=e=>{r=e,s.isBound?(n=i,i=po(a,{delay:t.delay}),n?.cancel()):a()},l=h.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return h.flush=()=>{o=i?.status===zh,l(),o&&a()},h})(e,a,this):((t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const l=()=>t.now(),c=()=>e(r),u=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),c()):i=po(()=>{o=l(),c()},{delay:t.delay-a}),n?.cancel()):c()},d=u.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return u.flush=()=>{h=i?.status===zh,d(),h&&c()},u})(e,a,this),l=r?{handleChange:h.flush}:null;return this[i]=h,r&&n.forEach(t=>_h(r,t,l)),{dispose:()=>{r&&n.forEach(t=>qh(r,t,l)),t.delete(this),h.dispose(),delete this[i]}}})}})(),hc=((t=new WeakSet)=>e=>function(){t.has(this)||(t.add(this),e.call(this))})();class lc{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=r,this.targetProperty=o,this.mode=a,this.strict=h,this.isBound=!1,this.s=void 0,this.L=!1,this.v=void 0,this.boundFn=!1,this.M=!1,this.l=e,this.ast=i,this.P=t,this.target=n,this.oL=s,(this.M=o.indexOf(" ")>-1)&&!lc.q.has(o)&&lc.q.set(o,o.split(" "))}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":if(this.M){const s=!!t;for(const t of lc.q.get(i))e.classList.toggle(t,s)}else e.classList.toggle(i,!!t);break;case"style":{let s="",n=Eh(t);m(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,Eh(t))}}handleChange(){this.isBound&&(this.L||(this.L=!0,uo(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null);this.obs.clear(),t!==this.v&&(this.v=t,this.updateTarget(t))})))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Hr(this.ast,t,this),this.mode&(yh|wh)&&this.updateTarget(this.v=Kr(this.ast,t,this,(this.mode&yh)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.obs.clearAll())}}lc.mix=hc(()=>{sc(lc),ac(lc,()=>"updateTarget"),Io(lc,null),ic(lc)}),lc.q=new Map;class cc{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.L=!1,this.P=t,this.oL=s,this.I=s.getAccessor(n,r);const h=i.expressions,l=this.partBindings=Array(h.length),c=h.length;let u=0;for(;c>u;++u)l[u]=new uc(h[u],n,r,e,s,a,this)}_(){if(this.isBound)if(this.P.state!==Zu&&(this.I.type&Gh)>0){if(this.L)return;this.L=!0,uo(()=>{this.L=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast,s=this.target,i=this.targetProperty,n=e.parts,r=t.length;let o="",a=0;if(1===r)o=n[0]+t[0].V()+n[1];else for(o=n[0];r>a;++a)o+=t[a].V()+n[a+1];this.I.setValue(o,s,i)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind()}useAccessor(t){this.I=t}}class uc{constructor(t,e,s,i,n,r,o){this.ast=t,this.target=e,this.targetProperty=s,this.strict=r,this.owner=o,this.mode=yh,this.isBound=!1,this.v="",this.boundFn=!1,this.D=!1,this.l=i,this.oL=n}updateTarget(){this.owner._()}handleChange(){this.isBound&&(this.D=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this.D=!0,this.updateTarget())}V(){if(!this.D)return this.v;this.obs.version++;const t=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null);return this.obs.clear(),this.v=t,c(t)&&this.observeCollection(t),this.D=!1,this.v}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Hr(this.ast,t,this),this.v=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null),c(this.v)&&this.observeCollection(this.v),this.D=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.v=void 0,this.D=!1,Wr(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}uc.mix=hc(()=>{sc(uc),ac(uc,()=>"updateTarget"),Io(uc,null),ic(uc)});class dc{constructor(t,e,s,i,n,r,o){this.p=i,this.ast=n,this.target=r,this.strict=o,this.isBound=!1,this.mode=yh,this.L=!1,this.v="",this.F=!1,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.F&&(s.parentNode?.removeChild(s),this.F=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.F=!0),e.textContent=Eh(t??"")}handleChange(){this.isBound&&(this.L||(this.L=!0,uo(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null);this.obs.clear(),t!==this.v&&this.updateTarget(t)})))}handleCollectionChange(){this.isBound&&(this.L||(this.L=!0,uo(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=this.v=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null);this.obs.clear(),c(t)&&this.observeCollection(t),this.updateTarget(t)})))}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Hr(this.ast,t,this);const e=this.v=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null);c(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.F&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll())}}dc.mix=hc(()=>{sc(dc),ac(dc,()=>"updateTarget"),Io(dc,null),ic(dc)});class pc{constructor(t,e,s,i,n,r){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.strict=r,this.H=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=Kr(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.H?t.bindingContext:t.overrideContext,Hr(this.ast,t,this),this.v=Kr(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}pc.mix=hc(()=>{sc(pc),ac(pc,()=>"updateTarget"),Io(pc,null),ic(pc)});class fc{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.I=void 0,this.L=!1,this.O=null,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){this.I.setValue(t,this.target,this.targetProperty)}updateSource(t){zr(this.ast,this.s,this,null,t)}handleChange(){if(this.isBound)if(this.P.state!==Zu&&(this.I.type&Gh)>0){if(this.L)return;this.L=!0,uo(()=>{this.L=!1,this.isBound&&this.$()})}else this.$()}$(){this.obs.version++;const t=Kr(this.ast,this.s,this,(this.mode&yh)>0?this:null);this.obs.clear(),this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Hr(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.I;i||(i=s&Ch?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.I=i);const n=(s&yh)>0;s&(yh|wh)&&this.updateTarget(Kr(this.ast,this.s,this,n?this:null)),s&Ch&&(i.subscribe(this.O??=new ec(this,this.l.get(nc))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.O&&(this.I.unsubscribe(this.O),this.O=null),Wr(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}useTargetObserver(t){this.I?.unsubscribe(this),(this.I=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.O)throw Xh(9995);this.O=t}}fc.mix=hc(()=>{sc(fc),ac(fc,t=>t.mode&Ch?"updateSource":"updateTarget"),Io(fc,null),ic(fc)});class gc{constructor(t,e,s,i,n){this.oL=e,this.ast=s,this.target=i,this.strict=n,this.isBound=!1,this.s=void 0,this.l=t}updateSource(){this.isBound?(this.obs.version++,zr(this.ast,this.s,this,this,this.target),this.obs.clear()):zr(this.ast,this.s,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Hr(this.ast,t,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),Kr(this.ast,this.s,this,null)===this.target&&this.updateSource(),Wr(this.ast,this.s,this),this.s=void 0)}}gc.mix=hc(()=>{Io(gc,null),ac(gc,()=>"updateSource"),sc(gc),ic(gc)});class mc{constructor(t,e=!1,s){this.prevent=t,this.capture=e,this.onError=s}}class vc{constructor(t,e,s,i,n,r,o){this.ast=e,this.target=s,this.targetEvent=i,this.strict=o,this.isBound=!1,this.self=!1,this.boundFn=!0,this.N=null,this.l=t,this.W=n,this.N=r}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=Kr(this.ast,this.s,this,null);delete e.$event,g(s)&&(s=s(t)),!0!==s&&this.W.prevent&&t.preventDefault()}handleEvent(t){if((!this.self||this.target===t.composedPath()[0])&&!1!==this.N?.(t))try{this.callSource(t)}catch(e){this.W.onError(t,e)}}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Hr(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.W),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.W))}}vc.mix=hc(function(){sc(vc),ac(vc,()=>"callSource"),ic(vc)});const bc=el("IEventModifier"),wc=el("IKeyMapping",t=>t.instance({meta:Ph(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((t,e,s)=>{let i=String.fromCharCode(s+65);return t[s+65]=i,i=String.fromCharCode(s+97),t[s+97]=t[i]=i,t},{})}}));class yc{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this.j=ht(wc),this.U=["left","middle","right"]}static register(t){t.register(sl(bc,yc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue;case"left":case"middle":case"right":if(t.button!==this.U.indexOf(s))return!1;continue}if(this.j.meta.includes(s)&&!0!==t[`${s}Key`])return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class Cc{constructor(){this.j=ht(wc),this.type=["keydown","keyup"]}static register(t){t.register(sl(bc,Cc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}if(this.j.meta.includes(s)){if(!0!==t[`${s}Key`])return!1}else if(this.j.keys[s]!==t.key)return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class $c{constructor(){this.type=["$ALL"]}static register(t){t.register(sl(bc,$c))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e)switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}const kc=el("IEventModifierHandler",t=>t.instance({getHandler:()=>null}));class xc{constructor(){this.G=ht(Lt(bc)).reduce((t,e)=>((c(e.type)?e.type:[e.type]).forEach(s=>t[s]=e),t),{})}static register(t){t.register(sl(kc,xc))}getHandler(t,e){return m(e)?(this.G[t]??this.G.$ALL)?.getHandler(e)??null:null}}const Tc={register(t){t.register(xc,yc,Cc,$c)}},Sc=el("IViewFactory");class Ac{constructor(t,e){this.isCaching=!1,this.X=null,this.K=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=Ac.maxCacheSize:m(t)&&(t=parseInt(t,10)),-1!==this.K&&e||(this.K=t)),this.K>0?this.X=[]:this.X=null,this.isCaching=this.K>0}canReturnToCache(t){return null!=this.X&&this.X.length<this.K}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.X.push(t),!0)}create(t){const e=this.X;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=ju.$view(this,t),s)}}Ac.maxCacheSize=65535;const Rc=(()=>{const t=(t,e)=>t.document.createComment(e);return e=>{const s=t(e,"au-end");return s.$start=t(e,"au-start"),s}})(),Ec=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Ic=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),Oc=t=>1===t.nodeType,Pc="default",Mc=el("IAuSlotsInfo");class Bc{constructor(t){this.projectedSlots=t}}const jc=el("IAuSlotWatcher");class Lc{static create(t,e,s,i,n,r,o,a){const h=[],l=i.renderers,c=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw Xh(9999);return i},u=t=>{const i=c(t),d=new Lc(i),p=n.compileSpread(i.controller.definition,i.instruction?.captures??Ot,i.controller.container,e,s);let f;for(f of p)switch(f.type){case un.spreadTransferedBinding:u(t+1);break;case un.spreadElementProp:l[f.instruction.type].render(d,Kd(e),f.instruction,r,o,a);break;default:l[f.type].render(d,e,f,r,o,a)}h.push(d)};return u(0),h}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.isBound=!1,this.et=[],this.locator=(this.$controller=(this.it=t).controller).container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.it.controller.scope.parent??void 0;if(null==e)throw Xh(9999);this.et.forEach(t=>t.bind(e))}unbind(){this.et.forEach(t=>t.unbind()),this.isBound=!1}addBinding(t){this.et.push(t)}addChild(t){if(t.vmKind!==Ju)throw Xh(9998);this.$controller.addChild(t)}}class Nc{constructor(t,e,s,i,n,r,o){this.target=e,this.targetKeys=s,this.ast=i,this.strict=o,this.isBound=!1,this.s=void 0,this.boundFn=!1,this.st={},this.nt=new WeakMap,this.P=t,this.oL=n,this.l=r}updateTarget(){this.obs.version++;const t=Kr(this.ast,this.s,this,this);this.obs.clear(),this.rt(t,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.isBound=!0,this.s=t,Hr(this.ast,t,this);const e=Kr(this.ast,t,this,this);this.rt(e,!1)}unbind(){if(!this.isBound)return;let t;for(t in this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.st)this.st[t].unbind()}rt(t,e){let s,i;if(!p(t)){for(s in this.st)this.st[s]?.unbind();return}let n=this.nt.get(t);for(s of(null==n&&this.nt.set(t,n=_r.fromParent(this.s,t)),this.targetKeys))i=this.st[s],s in t?(null==i&&(i=this.st[s]=new fc(this.P,this.l,this.oL,Nc.ot[s]??=new Ee(s,0),this.target,s,Li.toView,this.strict)),i.bind(n)):e&&i?.unbind()}}Nc.mix=hc(()=>{sc(Nc),ac(Nc,()=>"updateTarget"),Io(Nc,null),ic(Nc)}),Nc.ot={};const Dc=(t,e,s,i)=>{t.addEventListener(e,s,i)},Vc=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Fc=t=>{let e;const s=t.prototype;Fh(s,"subscribe",function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Dc(this.lt,e,this);this.ht=!0,this.ct?.()}}),Fh(s,"unsubscribe",function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)Vc(this.lt,e,this);this.ht=!1,this.ut?.()}}),Fh(s,"useConfig",function(t){if(this.cf=t,this.ht){for(e of this.cf.events)Vc(this.lt,e,this);for(e of this.cf.events)Dc(this.lt,e,this)}})},_c=t=>{Fh(t.prototype,"subscribe",Mt),Fh(t.prototype,"unsubscribe",Mt)};class qc{get doNotCache(){return!0}constructor(t,e={}){this.obj=t,this.mapping=e,this.type=Wh|Gh,this.v="",this.ft={},this.dt=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.gt())}gt(){const t=this.ft,e=++this.dt,s=this.obj.classList,i=Uc(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],r=this.mapping[r]||r,0!==r.length&&(t[r]=this.dt,s.add(r));if(1!==e)for(r in t)r=this.mapping[r]||r,t[r]!==e&&s.remove(r)}}function Uc(t){if(m(t))return zc(t);if("object"!=typeof t)return Ot;if(c(t)){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Uc(t[i]));return s}return Ot}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...zc(s)):e.push(s));return e}function zc(t){const e=t.match(/\S+/g);return null===e?Ot:e}_c(qc);const Kc=t=>({$isResolver:!0,resolve:(e,s)=>s.get(od).controller.container.get(Vt(t))}),Hc=el("IRenderer");function Wc(t,e){return(e?.metadata??(t[Symbol.metadata]??=Object.create(null)))[J]={register(e){sl(Hc,t).register(e)}},t}function Gc(t,e,s){return m(e)?t.parse(e,s):e}function Xc(t){return null!=t.viewModel?t.viewModel:t}const Jc=Wc(class{constructor(){this.target=un.setProperty}render(t,e,s){const i=Xc(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}},null),Yc=Wc(class{constructor(){this.r=ht(Tu),this.target=un.hydrateElement}render(t,e,s,i,n,r){let o,a,h;const l=s.res,c=s.projections,u=t.container;if("string"==typeof l){if(o=Xd.find(u,l),null==o)throw Xh(752,s,t)}else o=l;const d=s.containerless||o.containerless?Ad(e):null,p=function(t,e,s,i,n,r){const o=e.container.createChild();return Id(o,s,t),rl(o,rd,new Et(gu,e)),rl(o,dn,new Et(mu,i)),rl(o,kd,null==n?$u:new Cu(n)),rl(o,Sc,ku),rl(o,Mc,null==r?xu:new Et(bu,r)),o}(i,t,e,s,d,null==c?void 0:new Bc(jh(c)));a=p.invoke(o.Type),h=ju.$el(p,a,e,s,o,d);const f=this.r.renderers,g=s.props,m=g.length;let v,b=0;for(;m>b;)v=g[b],f[v.type].render(t,h,v,i,n,r),++b;t.addChild(h)}},null),Qc=Wc(class{constructor(){this.r=ht(Tu),this.target=un.hydrateAttribute}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Ul.find(a,s.res),null==o)throw Xh(753,s,t)}else o=s.res;const h=yu(i,o,t,e,s,void 0,void 0),l=ju.$attr(h.ctn,h.vm,e,o);Pl.set(e,o.key,l);const c=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],c[p.type].render(t,l,p,i,n,r),++f;t.addChild(l)}},null),Zc=Wc(class{constructor(){this.r=ht(Tu),this.target=un.hydrateTemplateController}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Ul.find(a,s.res),null==o)throw Xh(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,"new"===o.containerStrategy?a.createChild({inheritParentResources:!0}):a),l=Ad(e),c=yu(i,o,t,e,s,h,l),u=ju.$attr(c.ctn,c.vm,e,o);Pl.set(l,o.key,u),c.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,m=0;for(;f>m;)g=p[m],d[g.type].render(t,u,g,i,n,r),++m;t.addChild(u)}},null),tu=Wc(class{constructor(){this.target=un.hydrateLetElement,pc.mix()}render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,l=o.length;let c,u,d=0;for(;l>d;)c=o[d],u=Gc(n,c.from,Uh),t.addBinding(new pc(h,r,u,c.to,a,t.strict??!1)),++d}},null),eu=Wc(class{constructor(){this.target=un.refBinding,gc.mix()}render(t,e,s,i,n,r){t.addBinding(new gc(t.container,r,Gc(n,s.from,Uh),function(t,e){if("element"===e)return t;switch(e){case"controller":return Kd(t);case"view":throw Xh(750);case"component":return Kd(t).viewModel;default:{const s=Fl(t,e);if(void 0!==s)return s.viewModel;const i=Kd(t,{name:e});if(void 0===i)throw Xh(751,e);return i.viewModel}}}(e,s.to),t.strict??!1))}},null),su=Wc(class{constructor(){this.target=un.interpolation,uc.mix()}render(t,e,s,i,n,r){const o=t.container,a=new cc(t,o,r,Gc(n,s.from,"Interpolation"),Xc(e),s.to,yh,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(Kc(xd));a.useAccessor(new qc(a.target,t))}t.addBinding(a)}},null),iu=Wc(class{constructor(){this.target=un.propertyBinding,fc.mix()}render(t,e,s,i,n,r){const o=t.container,a=new fc(t,o,r,Gc(n,s.from,Uh),Xc(e),s.to,s.mode,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(Kc(xd));a.useTargetObserver(new qc(a.target,t))}t.addBinding(a)}},null),nu=Wc(class{constructor(){this.target=un.iteratorBinding,fc.mix()}render(t,e,s,i,n,r){t.addBinding(new fc(t,t.container,r,Gc(n,s.forOf,"IsIterator"),Xc(e),s.to,yh,t.strict??!1))}},null),ru=Wc(class{constructor(){this.target=un.textBinding,dc.mix()}render(t,e,s,i,n,r){t.addBinding(new dc(t,t.container,r,i,Gc(n,s.from,Uh),e,t.strict??!1))}},null),ou=el("IListenerBindingOptions",t=>t.singleton(class{constructor(){this.p=ht(Il),this.prevent=!1,this.onError=(t,e)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:t,error:e}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw e}}})),au=Wc(class{constructor(){this.target=un.listenerBinding,this.vt=ht(kc),this.xt=ht(ou),vc.mix()}render(t,e,s,i,n){t.addBinding(new vc(t.container,Gc(n,s.from,"IsFunction"),e,s.to,new mc(this.xt.prevent,s.capture,this.xt.onError),this.vt.getHandler(s.to,s.modifier),t.strict??!1))}},null),hu=Wc(class{constructor(){this.target=un.setAttribute}render(t,e,s){e.setAttribute(s.to,s.value)}},null),lu=Wc(class{constructor(){this.target=un.setClassAttribute}render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}},null),cu=Wc(class{constructor(){this.target=un.setStyleAttribute}render(t,e,s){e.style.cssText+=s.value}},null),uu=Wc(class{constructor(){this.target=un.stylePropertyBinding,fc.mix()}render(t,e,s,i,n,r){t.addBinding(new fc(t,t.container,r,Gc(n,s.from,Uh),e.style,s.to,yh,t.strict??!1))}},null),du=Wc(class{constructor(){this.target=un.attributeBinding,lc.mix()}render(t,e,s,i,n,r){const o=t.container,a=o.has(xd,!1)?o.get(xd):null;t.addBinding(new lc(t,o,r,Gc(n,s.from,Uh),e,s.attr,null==a?s.to:s.to.split(/\s/g).map(t=>a[t]??t).join(" "),yh,t.strict??!1))}},null),pu=Wc(class{constructor(){this.yt=ht(Ni),this.r=ht(Tu),this.target=un.spreadTransferedBinding}render(t,e,s,i,n,r){Lc.create(t.container.get(od),e,void 0,this.r,this.yt,i,n,r).forEach(e=>t.addBinding(e))}},null),fu=Wc(class{constructor(){this.target=un.spreadValueBinding,Nc.mix()}render(t,e,s,i,n,r){const o=s.target;if("$bindables"!==o)throw Xh(820,o);t.addBinding(new Nc(t,e.viewModel,jh(e.definition.bindables),n.parse(s.from,Uh),r,t.container,t.strict??!1))}},null),gu="IController",mu="IInstruction",vu="IRenderLocation",bu="ISlotsInfo";class wu{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw Xh(755);if(!m(t.name)||0===t.name.length)throw Xh(756);return t}}function yu(t,e,s,i,n,r,o,a){const h=s instanceof ju?s:s.$controller,l=h.container.createChild();return Id(l,i,t),rl(l,rd,new Et(gu,h)),rl(l,dn,new Et(mu,n)),rl(l,kd,null==o?$u:new Et(vu,o)),rl(l,Sc,null==r?ku:new wu(r)),rl(l,Mc,xu),{vm:l.invoke(e.Type),ctn:l}}class Cu{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const $u=new Cu(null),ku=new wu(null),xu=new Et(bu,new Bc(Ot)),Tu=el("IRendering",t=>t.singleton(Su));class Su{get renderers(){return this.wt??=this.bt.getAll(Hc,!1).reduce((t,e)=>(t[e.target]??=e,t),v())}constructor(){this.kt=new WeakMap,this.Ct=new WeakMap;const t=this.bt=ht(xt).root,e=this.p=t.get(Il);this.ep=t.get(is),this.oL=t.get(Fa),this.Bt=e.document.createElement("au-m"),this.St=new Ed(e,e.document.createDocumentFragment())}compile(t,e){const s=e.get(Ni),i=this.kt;let n=i.get(t);return null==n&&i.set(t,n=Md.create(t.needsCompile?s.compile(t,e):t)),n}getViewFactory(t,e){return new Ac(e,Md.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Ed(this.p,this.At(t.template));let e,s=!1;const i=this.Ct,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null==o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),m(o)&&(a.innerHTML=o),e=a.content,s=!0),this.At(e),i.set(t,e)}return null==e?this.St:new Ed(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,l,c=0,u=0,d=n.length;if(o!==d)throw Xh(757,o,d);if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u;if(o>0)for(;o>c;){for(a=n[c],l=e[c],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,l,h,this.p,this.ep,this.oL),++u;++c}}At(t){if(null==t)return null;const e=this.p.document.createTreeWalker(t,128);let s;for(;null!=(s=e.nextNode());)"au*"===s.nodeValue&&s.parentNode.replaceChild(e.currentNode=this.Bt.cloneNode(),s);return t}}const Au=el("IShadowDOMStyles"),Ru=el("IShadowDOMGlobalStyles",t=>t.instance({applyTo:Mt})),{enter:Eu,exit:Iu}=No,{wrap:Ou,unwrap:Pu}=Ia;class Mu{get value(){return this.v}constructor(t,e,s,i,n="async"){this.obj=t,this.$get=s,this.isBound=!1,this.L=!1,this.Rt=0,this.v=void 0,this.cb=i,this.oL=e,this.Tt=n}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,uo(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.obj,e=this.v;if(++this.Rt>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();b(s,e)||this.cb.call(t,s,e,t),this.L||(this.Rt=0)}compute(){this.obs.version++;try{return Eu(this),this.v=Pu(this.$get.call(void 0,Ou(this.obj),this))}finally{this.obs.clear(),Iu(this)}}}Io(Mu,null);class Bu{get value(){return this.v}constructor(t,e,s,i,n,r="async"){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.L=!1,this.boundFn=!1,this.obj=t.bindingContext,this.Lt=i,this.cb=n,this.Tt=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,uo(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.Lt,e=this.obj,s=this.v;this.obs.version++;const i=Kr(t,this.scope,this,this);this.obs.clear(),b(i,s)||(this.v=i,this.cb.call(e,i,s,e))}bind(){this.isBound||(this.obs.version++,this.v=Kr(this.Lt,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}Io(Bu,null),ic(Bu);class ju{get lifecycleHooks(){return this.Mt}get isActive(){return(this.state&(Zu|td))>0&&0===(this.state&ed)}get name(){if(null===this.parent)switch(this.vmKind){case Ju:return`[${this.definition.name}]`;case Xu:return this.definition.name;case Yu:return this.viewFactory.name}switch(this.vmKind){case Ju:return`${this.parent.name}>[${this.definition.name}]`;case Xu:return`${this.parent.name}>${this.definition.name}`;case Yu:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.Dt}set viewModel(t){this.Dt=t,this.Pt=null==t||this.vmKind===Yu?Wu.none:new Wu(t)}get strict(){return this.definition?.strict}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.qt=!1,this.mountTarget=Nu,this.shadowRoot=null,this.nodes=null,this.location=null,this.Mt=null,this.state=Qu,this.It=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._t=0,this.Vt=0,this.Ft=0,this.Dt=n,this.Pt=e===Yu?Wu.none:new Wu(n),this.location=o,this.r=t.root.get(Tu)}static getCached(t){return Lu.get(t)}static getCachedOrThrow(t){const e=ju.getCached(t);if(void 0===e)throw Xh(500,t);return e}static $el(t,e,s,i,n=void 0,r=null){if(Lu.has(e))return Lu.get(e);n=n??Wd(e.constructor),rl(t,n.Type,new Et(n.key,e,n.Type));const o=new ju(t,Xu,n,null,e,s,r),a=t.get(Nt(od));return n.dependencies.length>0&&t.register(...n.dependencies),rl(t,od,new Et("IHydrationContext",new ad(o,i,a))),Lu.set(e,o),null!=i&&!1===i.hydrate||o.hE(i),o}static $attr(t,e,s,i){if(Lu.has(e))return Lu.get(e);i=i??ql(e.constructor),rl(t,i.Type,new Et(i.key,e,i.Type));const n=new ju(t,Ju,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),Lu.set(e,n),n.Ht(),n}static $view(t,e=void 0){const s=new ju(t.container,Yu,null,t,null,null,null);return s.parent=e??null,s.Ot(),s}hE(t){const e=this.container,s=this.Dt,i=this.definition;this.scope=_r.create(s,null,!0),i.watches.length>0&&Hu(this,e,i,s),Uu(this,i,s),this.Mt=Wl.resolve(e),e.register(i.Type),null!==i.injectable&&rl(e,i.injectable,new Et("definition.injectable",s)),null!=t&&!1===t.hydrate||(this.hS(),this.hC())}hS(){null!=this.Mt.hydrating&&this.Mt.hydrating.forEach(cd,this),this.Pt.$t&&this.Dt.hydrating(this);const t=this.definition,e=this.Nt=this.r.compile(t,this.container),s=e.shadowOptions,i=e.hasSlots,n=e.containerless,r=this.host;let o=this.location;if(n&&null==o&&(o=this.location=Ad(r)),Cd(r,_d,this),Cd(r,t.key,this),null!==s||i){if(null!=o)throw Xh(501);Cd(this.shadowRoot=r.attachShadow(s??Gu),_d,this),Cd(this.shadowRoot,t.key,this),this.mountTarget=Vu}else null!=o?(r!==o&&(Cd(o,_d,this),Cd(o,t.key,this)),this.mountTarget=Fu):this.mountTarget=Du;this.Dt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.Mt.hydrated&&this.Mt.hydrated.forEach(ud,this),this.Pt.Wt&&this.Dt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Nt,this.host),void 0!==this.Mt.created&&this.Mt.created.forEach(ld,this),this.Pt.jt&&this.Dt.created(this)}Ht(){const t=this.definition,e=this.Dt;t.watches.length>0&&Hu(this,this.container,t,e),Uu(this,t,e),e.$controller=this,this.Mt=Wl.resolve(this.container),void 0!==this.Mt.created&&this.Mt.created.forEach(ld,this),this.Pt.jt&&this.Dt.created(this)}Ot(){this.Nt=this.r.compile(this.viewFactory.def,this.container),this.r.render(this,(this.nodes=this.r.createNodes(this.Nt)).findTargets(),this.Nt,void 0)}activate(t,e,s){switch(this.state){case Qu:case sd:if(null!==e&&!e.isActive)return;this.state=Zu;break;case td:return;case nd:throw Xh(502,this.name);default:throw Xh(503,this.name,function(t){const e=[];return(t&Zu)===Zu&&e.push("activating"),(t&td)===td&&e.push("activated"),(t&ed)===ed&&e.push("deactivating"),(t&sd)===sd&&e.push("deactivated"),(t&id)===id&&e.push("released"),(t&nd)===nd&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case Xu:this.scope.parent=s??null;break;case Ju:this.scope=s??null;break;case Yu:if(null==s)throw Xh(504,this.name);this.hasLockedScope||(this.scope=s)}let i;return this.$initiator=t,this.zt(),this.vmKind!==Yu&&null!=this.Mt.binding&&(i=M(...this.Mt.binding.map(dd,this))),this.Pt.Ut&&(i=M(i,this.Dt.binding(this.$initiator,this.parent))),l(i)?(this.Gt(),i.then(()=>{this.qt=!0,this.state!==Zu?this.Xt():this.bind()}).catch(t=>{this.Kt(t)}),this.$promise):(this.qt=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Yu&&null!=this.Mt.bound&&(t=M(...this.Mt.bound.map(pd,this))),this.Pt.Qt&&(t=M(t,this.Dt.bound(this.$initiator,this.parent))),l(t))return this.Gt(),void t.then(()=>{this.isBound=!0,this.state!==Zu?this.Xt():this.Yt()}).catch(t=>{this.Kt(t)});this.isBound=!0,this.Yt()}Zt(...t){switch(this.mountTarget){case Du:this.host.append(...t);break;case Vu:this.shadowRoot.append(...t);break;case Fu:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Yt(){switch(this.mountTarget){case Du:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case Vu:{const t=this.container;(t.has(Au,!1)?t.get(Au):t.get(Ru)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Fu:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Yu&&null!=this.Mt.attaching&&(t=M(...this.Mt.attaching.map(fd,this))),this.Pt.Jt&&(t=M(t,this.Dt.attaching(this.$initiator,this.parent))),l(t)&&(this.Gt(),this.zt(),t.then(()=>{this.Xt()}).catch(t=>{this.Kt(t)})),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Xt()}deactivate(t,e){let s;switch(this.state&~id){case td:this.state=ed;break;case Zu:this.state=ed,s=this.$promise?.catch(Mt);break;case Qu:case sd:case nd:case sd|nd:return;default:throw Xh(505,this.name,this.state)}this.$initiator=t,t===this&&this.te();let i,n=0;if(null!==this.children)for(n=0;n<this.children.length;++n)this.children[n].deactivate(t,this);return P(s,()=>{if(this.isBound&&(this.vmKind!==Yu&&null!=this.Mt.detaching&&(i=M(...this.Mt.detaching.map(md,this))),this.Pt.ee&&(i=M(i,this.Dt.detaching(this.$initiator,this.parent)))),l(i)&&(this.Gt(),t.te(),i.then(()=>{t.ie()}).catch(e=>{t.Kt(e)})),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.ie(),this.$promise})}removeNodes(){switch(this.vmKind){case Xu:case Yu:this.nodes.remove(),this.nodes.unlink()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case Ju:this.scope=null;break;case Yu:this.hasLockedScope||(this.scope=null),(this.state&id)!==id||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case Xu:this.scope.parent=null}this.state=sd,this.$initiator=null,this.se()}Gt(){void 0===this.$promise&&(this.$promise=new Promise((t,e)=>{this.$resolve=t,this.$reject=e}),this.$initiator!==this&&this.parent.Gt())}se(){void 0!==this.$promise&&(bd=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,bd(),bd=void 0)}Kt(t){void 0!==this.$promise&&(wd=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,wd(t),wd=void 0),this.$initiator!==this&&this.parent.Kt(t)}zt(){++this._t,this.$initiator!==this&&this.parent.zt()}Xt(){if(this.state!==Zu)return--this._t,this.se(),void(this.$initiator!==this&&this.parent.Xt());if(0===--this._t){if(this.vmKind!==Yu&&null!=this.Mt.attached&&(yd=M(...this.Mt.attached.map(gd,this))),this.Pt.ne&&(yd=M(yd,this.Dt.attached(this.$initiator))),l(yd))return this.Gt(),yd.then(()=>{this.state=td,this.se(),this.$initiator!==this&&this.parent.Xt()}).catch(t=>{this.Kt(t)}),void(yd=void 0);yd=void 0,this.state=td,this.se()}this.$initiator!==this&&this.parent.Xt()}te(){++this.Vt}ie(){if(0===--this.Vt){this.re(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.qt&&(e.vmKind!==Yu&&null!=e.Mt.unbinding&&(t=M(...e.Mt.unbinding.map(vd,e))),e.Pt.oe&&(e.debug&&e.logger.trace("unbinding()"),t=M(t,e.viewModel.unbinding(e.$initiator,e.parent)))),l(t)&&(this.Gt(),this.re(),t.then(()=>{this.le()}).catch(t=>{this.Kt(t)})),t=void 0,e=e.next;this.le()}}re(){++this.Ft}le(){if(0===--this.Ft){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.qt=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.qt=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case Ju:case Xu:return this.definition.name===t;case Yu:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===Xu&&(Cd(t,_d,this),Cd(t,this.definition.key,this)),this.host=t,this.mountTarget=Du,this}setShadowRoot(t){return this.vmKind===Xu&&(Cd(t,_d,this),Cd(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=Vu,this}setLocation(t){return this.vmKind===Xu&&(Cd(t,_d,this),Cd(t,this.definition.key,this)),this.location=t,this.mountTarget=Fu,this}release(){this.state|=id}dispose(){(this.state&nd)!==nd&&(this.state|=nd,this.Pt.he&&this.Dt.dispose(),null!==this.children&&(this.children.forEach(hd),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.Dt&&(Lu.delete(this.Dt),this.Dt=null),this.Dt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Pt.ae&&!0===this.Dt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}const Lu=new WeakMap,Nu=0,Du=1,Vu=2,Fu=3,_u=Ph({none:Nu,host:Du,shadowRoot:Vu,location:Fu}),qu=_t(vo);function Uu(t,e,s){const i=e.bindables,n=Bh(i),r=n.length;if(0===r)return;const o=t.container.get(Fa),a="propertiesChanged"in s,h=t.vmKind===Yu?void 0:t.container.get(qu),l=a?(()=>{let e={},i=!1,n=0;const r=()=>{i||(i=!0,uo(()=>{i=!1;const o=e;e={},n=0,t.isBound&&(s.propertiesChanged?.(o),n>0&&r())}))};return(t,s,i)=>{e[t]={newValue:s,oldValue:i},n++,r()}})():Mt;for(let e=0;e<r;++e){const r=n[e],c=i[r],u=c.callback,d=o.getObserver(s,r);if(c.set!==Mt&&!0!==d.useCoercer?.(c.set,h))throw Xh(507,r);if(null!=s[u]||null!=s.propertyChanged||a){const e=(e,i)=>{t.isBound&&(s[u]?.(e,i),s.propertyChanged?.(r,e,i),l(r,e,i))};if(!0!==d.useCallback?.(e))throw Xh(508,r)}}}const zu=new Map,Ku=t=>{let e=zu.get(t);return null==e&&(e=new Ee(t,0),zu.set(t,e)),e};function Hu(t,e,s,i){const n=e.get(Fa),r=e.get(is),o=s.watches,a=t.vmKind===Xu?t.scope:_r.create(i,null,!0),h=o.length;let l,c,u,d,p=0;for(;h>p;++p){if(({expression:l,callback:c,flush:d}=o[p]),c=g(c)?c:Reflect.get(i,c),!g(c))throw Xh(506,c);g(l)?t.addBinding(new Mu(i,n,l,c,d)):(u=m(l)?r.parse(l,Uh):Ku(l),t.addBinding(new Bu(a,e,n,u,c,d)))}}class Wu{constructor(t){this.ce="define"in t,this.$t="hydrating"in t,this.Wt="hydrated"in t,this.jt="created"in t,this.Ut="binding"in t,this.Qt="bound"in t,this.Jt="attaching"in t,this.ne="attached"in t,this.ee="detaching"in t,this.oe="unbinding"in t,this.he="dispose"in t,this.ae="accept"in t}}Wu.none=new Wu({});const Gu={mode:"open"},Xu="customElement",Ju="customAttribute",Yu="synthetic",Qu=0,Zu=1,td=2,ed=4,sd=8,id=16,nd=32,rd=el("IController"),od=el("IHydrationContext");class ad{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function hd(t){t.dispose()}function ld(t){t.instance.created(this.Dt,this)}function cd(t){t.instance.hydrating(this.Dt,this)}function ud(t){t.instance.hydrated(this.Dt,this)}function dd(t){return t.instance.binding(this.Dt,this.$initiator,this.parent)}function pd(t){return t.instance.bound(this.Dt,this.$initiator,this.parent)}function fd(t){return t.instance.attaching(this.Dt,this.$initiator,this.parent)}function gd(t){return t.instance.attached(this.Dt,this.$initiator)}function md(t){return t.instance.detaching(this.Dt,this.$initiator,this.parent)}function vd(t){return t.instance.unbinding(this.Dt,this.$initiator,this.parent)}let bd,wd,yd;const Cd=Pl.set,$d=el("IEventTarget",t=>t.cachedCallback(t=>t.has(Jd,!0)?t.get(Jd).host:t.get(Il).document)),kd=el("IRenderLocation"),xd=el("ICssClassMapping"),Td=new WeakMap;function Sd(t){if(Td.has(t))return Td.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0===e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Kd(t,{optional:!0});if(null==e)return null;if(e.mountTarget===_u.shadowRoot)return Sd(e.host)}return t.parentNode}function Ad(t){if(Rd(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function Rd(t){return"au-end"===t.textContent}class Ed{get firstChild(){return this.ue}get lastChild(){return this.fe}constructor(t,e){this.platform=t,this.next=void 0,this.de=!1,this.me=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,l=this.childNodes=Array(o=h.length);for(r=0;o>r;)l[r]=h[r],++r;this.ue=e.firstChild,this.fe=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.me&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.de){let e,s=this.ue;const i=this.fe;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.de=!0,e||t.appendChild(this.f)}remove(){if(this.de){this.de=!1;const t=this.f,e=this.fe;let s,i=this.ue;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,e.insertBefore(this.f,t)}unlink(){this.me=!1,this.next=void 0,this.ref=void 0}link(t){this.me=!0,Rd(t)?this.ref=t:(this.next=t,this.ge())}ge(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Id=(t,e,s=t.get(Il))=>(rl(t,s.HTMLElement,rl(t,s.Element,rl(t,Ml,new Et("ElementResolver",e)))),t);function Od(t){return function(e,s){return s.addInitializer(function(){zd(t,this)}),e}}const Pd=new WeakMap;class Md{get type(){return"custom-element"}constructor(t,e,s,i,n,r,o,a,h,l,c,u,d,p,f,g,m,v,b){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.capture=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=h,this.needsCompile=l,this.surrogates=c,this.bindables=u,this.containerless=d,this.shadowOptions=p,this.hasSlots=f,this.enhance=g,this.watches=m,this.strict=v,this.processContent=b}static create(t,e=null){if(null===e){const s=t;if(m(s))throw Xh(761,t);const i=X("name",s,Ud);e=g(s.Type)?s.Type:Gd(k(i));for(const t of Object.values(Qh.from(s.bindables)))Qh.i(t,e);return new Md(e,i,A(s.aliases),X("key",s,()=>qd(i)),W("capture",s,e,Nd),W("template",s,e,jd),A(s.instructions),A(Hd(e,"dependencies"),s.dependencies),X("injectable",s,jd),X("needsCompile",s,Dd),A(s.surrogates),Qh.from(Hd(e,"bindables"),s.bindables),W("containerless",s,e,Nd),X("shadowOptions",s,jd),X("hasSlots",s,Nd),X("enhance",s,Nd),X("watches",s,Vd),X("strict",s,Ld),G("processContent",e,jd))}if(m(t))return new Md(e,t,A(Hd(e,"aliases"),e.aliases),qd(t),G("capture",e,Nd),G("template",e,jd),A(Hd(e,"instructions"),e.instructions),A(Hd(e,"dependencies"),e.dependencies),G("injectable",e,jd),G("needsCompile",e,Dd),A(Hd(e,"surrogates"),e.surrogates),Qh.from(...Qh.getAll(e),Hd(e,"bindables"),e.bindables),G("containerless",e,Nd),G("shadowOptions",e,jd),G("hasSlots",e,Nd),G("enhance",e,Nd),A(Bl.getDefinitions(e),e.watches),G("strict",e,Ld),G("processContent",e,jd));const s=X("name",t,Ud);for(const s of Object.values(Qh.from(t.bindables)))Qh.i(s,e);return new Md(e,s,A(Hd(e,"aliases"),t.aliases,e.aliases),qd(s),W("capture",t,e,Nd),W("template",t,e,jd),A(Hd(e,"instructions"),t.instructions,e.instructions),A(Hd(e,"dependencies"),t.dependencies,e.dependencies),W("injectable",t,e,jd),W("needsCompile",t,e,Dd),A(Hd(e,"surrogates"),t.surrogates,e.surrogates),Qh.from(...Qh.getAll(e),Hd(e,"bindables"),e.bindables,t.bindables),W("containerless",t,e,Nd),W("shadowOptions",t,e,jd),W("hasSlots",t,e,Nd),W("enhance",t,e,Nd),A(t.watches,Bl.getDefinitions(e),e.watches),W("strict",t,e,Ld),W("processContent",t,e,jd))}static getOrCreate(t){if(t instanceof Md)return t;if(Pd.has(t))return Pd.get(t);const e=Md.create(t);return Pd.set(t,e),Th(e,e.Type,_d),e}register(t,e){const s=this.Type,i="string"==typeof e?qd(e):this.key,n=this.aliases;t.has(i,!1)?console.warn(Xh(153,this.name)):t.register(t.has(s,!1)?null:sl(s,s),il(s,i),...n.map(t=>il(s,qd(t))))}toString(){return`au:ce:${this.name}`}}const Bd={name:void 0,searchParents:!1,optional:!1},jd=()=>null,Ld=()=>{},Nd=()=>!1,Dd=()=>!0,Vd=()=>Ot,Fd="custom-element",_d=z(Fd),qd=t=>`${_d}:${t}`,Ud=(t=>()=>"unnamed-"+ ++t)(0),zd=(t,e)=>{const s=Md.create(t,e),i=s.Type;return Th(s,i,_d,U),i},Kd=(t,e=Bd)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Pl.get(t,_d);if(null===s){if(!0===e.optional)return null;throw Xh(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Pl.get(t,_d);if(null===s)throw Xh(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Pl.get(s,_d);if(null!==t&&(i=!0,t.is(e.name)))return t;s=Sd(s)}if(i)return;throw Xh(764,t)}let s=t;for(;null!==s;){const t=Pl.get(s,_d);if(null!==t)return t;s=Sd(s)}throw Xh(765,t)},Hd=(t,e)=>kh(Ah(e),t),Wd=t=>{const e=kh(_d,t)??ol(t,Fd,Md.create);if(null==e)throw Xh(760,t);return e},Gd=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Vh(n,"name",t),i!==e&&Mh(n.prototype,i),n}}(),Xd=Ph({name:_d,keyFrom:qd,isType:t=>g(t)&&(xh(_d,t)||t.$au?.type===Fd),for:Kd,define:zd,getDefinition:Wd,annotate:(t,e,s)=>{Th(s,t,Ah(e))},getAnnotation:Hd,generateName:Ud,createInjectable:()=>{const t={$isInterface:!1,register:()=>({$isResolver:!0,resolve:(e,s)=>s.has(t,!0)?s.get(t):null})};return t},generateType:Gd,find(t,e){const s=t.find(Fd,e);return null==s?null:kh(_d,s)??ol(s,Fd,Md.create)??null}}),Jd=el("IAppRoot");class Yd{get controller(){return this.P}constructor(t,e,s,i=!1){this.config=t,this.container=e,this.pe=void 0,this.ve=i;const n=this.host=t.host;s.prepare(this),rl(e,$d,new Et("IEventTarget",n)),Id(e,n,this.platform=this.xe(e,n)),this.pe=P(this.ye("creating"),()=>{0!=!t.allowActionlessForm&&n.addEventListener("submit",t=>{const e=t.target,s=!e.getAttribute("action");"FORM"===e.tagName&&s&&t.preventDefault()},!1);const s=i?e:e.createChild(),r=t.component;let o;g(r)?(o=s.invoke(r),nl(r,o)):o=t.component;const a={hydrate:!1,projections:null},h=i?Md.create({name:Ud(),template:this.host,enhance:!0,strict:t.strictBinding}):void 0,l=this.P=ju.$el(s,o,n,a,h);return l.hE(a),P(this.ye("hydrating"),()=>(l.hS(),P(this.ye("hydrated"),()=>{l.hC(),this.pe=void 0})))})}activate(){return P(this.pe,()=>P(this.ye("activating"),()=>P(this.P.activate(this.P,null,void 0),()=>this.ye("activated"))))}deactivate(){return P(this.ye("deactivating"),()=>P(this.P.deactivate(this.P,null),()=>this.ye("deactivated")))}ye(t){const e=this.container,s=this.ve&&!e.has(Al,!1)?[]:e.getAll(Al);return M(...s.reduce((e,s)=>(s.slot===t&&e.push(s.run()),e),[]))}xe(t,e){let s;if(t.has(Il,!1))s=t.get(Il);else{if(null===e.ownerDocument.defaultView)throw Xh(769);s=new vh(e.ownerDocument.defaultView),t.register(nl(Il,s))}return s}dispose(){this.P?.dispose()}}const Qd=el("IAurelia");class Zd{get isRunning(){return this.ir}get isStarting(){return this.we}get isStopping(){return this.be}get root(){if(null==this.ke){if(null==this.next)throw Xh(767);return this.next}return this.ke}constructor(t=kt.createContainer()){if(this.container=t,this.ir=!1,this.we=!1,this.be=!1,this.ke=void 0,this.next=void 0,this.Ce=void 0,this.Be=void 0,t.has(Qd,!0)||t.has(Zd,!0))throw Xh(768);rl(t,Qd,new Et("IAurelia",this)),rl(t,Zd,new Et("Aurelia",this)),rl(t,Jd,this.Se=new Et("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new Yd(t,this.container,this.Se),this}enhance(t){const e=t.container??this.container.createChild(),s=rl(e,Jd,new Et("IAppRoot")),i=new Yd({host:t.host,component:t.component},e,s,!0);return P(i.activate(),()=>i)}async waitForIdle(){const t=this.root.platform;await t.domQueue.yield(),await t.taskQueue.yield()}start(t=this.next){if(null==t)throw Xh(770);return l(this.Ce)?this.Ce:this.Ce=P(this.stop(),()=>(Pl.hideProp||Reflect.set(t.host,"$aurelia",this),this.Se.prepare(this.ke=t),this.we=!0,P(t.activate(),()=>{this.ir=!0,this.we=!1,this.Ce=void 0,this.Ae(t,"au-started",t.host)})))}stop(t=!1){if(l(this.Be))return this.Be;if(!0===this.ir){const e=this.ke;return this.ir=!1,this.be=!0,this.Be=P(e.deactivate(),()=>P(no||(eo.length>0||io>0?no??=new Promise((t,e)=>{oo=t,ao=e}):Qr.then(()=>(eo.length>0||io>0)&&(no??=new Promise((t,e)=>{oo=t,ao=e})))),()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.ke=void 0,this.Se.dispose(),this.be=!1,this.Be=void 0,this.Ae(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.be)throw Xh(771);this.container.dispose()}Ae(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const tp=el("ISVGAnalyzer",t=>t.singleton(ep));class ep{isStandardSvgAttribute(t,e){return!1}}class sp{constructor(){this.fns=[],this.Le=v(),this.Me=v(),this.svg=ht(tp),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){let e,s,i,n;for(i in t)for(n in e=t[i],s=this.Le[i]??=v(),e){if(void 0!==s[n])throw ip(n,i);s[n]=e[n]}}useGlobalMapping(t){const e=this.Me;for(const s in t){if(void 0!==e[s])throw ip(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some(s=>s(t,e))}map(t,e){return this.Le[t.nodeName]?.[e]??this.Me[e]??(Nh(t,e,this.svg)?e:null)}}function ip(t,e){return Xh(719,t,e)}sp.register=F(Di);const np={register(t){t.register(pr,sp,op)}};class rp{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}class op{constructor(){this.De=new WeakMap,this.Pe=new WeakMap}el(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new ap),e in s.qe?s.qe[e]:s.qe[e]=Xd.find(t,e)}attr(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new ap),e in s.Ie?s.Ie[e]:s.Ie[e]=Ul.find(t,e)}bindables(t){let e=this.Pe.get(t);if(null==e){const s=t.bindables,i=v();let n,r,o,a,h=!1;for(r in s){if(n=s[r],a=n.attribute,!0===n.primary){if(h)throw Xh(714,t);h=!0,o=n}else h||null!=o||(o=n);i[a]=Zh.create(r,n)}null==n&&"custom-attribute"===t.type&&(o=i.value=Zh.create("value",{mode:t.defaultBindingMode??bh})),this.Pe.set(t,e=new rp(i,s,o??null))}return e}}op.register=F(kr);class ap{constructor(){this.qe=v(),this.Ie=v()}}const hp=v();class lp{static forNs(t){return hp[t]??=new lp(t)}constructor(t){this.ns=t,this.type=Wh|Gh}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}_c(lp);class cp{constructor(){this.type=Wh|Gh}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}_c(cp);const up=new cp;class dp{static _e(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=Oh.call(i,"model")?i.model:i.value),++n;return e}static Ve(t,e){return t===e}constructor(t,e,s,i){this.type=Wh|Hh|Gh,this.v=void 0,this.ov=void 0,this.Fe=!1,this.He=void 0,this.Oe=void 0,this.iO=!1,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.lt.multiple?dp._e(this.lt.options):this.lt.value}setValue(t){this.ov=this.v,this.v=t,this.Fe=t!==this.ov,this.$e(t instanceof Array?t:null),this.gt()}gt(){this.Fe&&(this.Fe=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.lt,s=c(t),i=e.matcher??dp.Ve,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Oh.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex(t=>!!i(o,t)):!!i(o,t)}}syncValue(){const t=this.lt,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||dp.Ve,a=[];for(;n<s;)r=e[n],r.selected&&a.push(Oh.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex(t=>!!o(h,t))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex(t=>!!o(h,t))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=Oh.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}ct(){(this.Oe=Ic(this.lt,this.Ne.bind(this))).observe(this.lt,{childList:!0,subtree:!0,characterData:!0}),this.$e(this.v instanceof Array?this.v:null),this.iO=!0}ut(){this.Oe.disconnect(),this.He?.unsubscribe(this),this.Oe=this.He=void 0,this.iO=!1}$e(t){if(this.He?.unsubscribe(this),this.He=void 0,null!=t){if(!this.lt.multiple)throw Xh(654);(this.He=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.Tt()}Ne(t){this.syncOptions(),this.syncValue()&&this.Tt()}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Fc(dp),yo(dp,null);class pp{constructor(t){this.obj=t,this.type=Wh|Gh,this.v="",this.ov="",this.styles={},this.version=0,this.Fe=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.Fe=t!==this.ov,this.gt()}We(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}je(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if(m(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([x(s),e])}else i.push(...this.ze(e));return i}Ue(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.ze(t[i]));return s}return Ot}ze(t){return m(t)?this.We(t):t instanceof Array?this.Ue(t):t instanceof Object?this.je(t):Ot}gt(){if(this.Fe){this.Fe=!1;const t=this.v,e=this.styles,s=this.ze(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const l=s.length;for(;h<l;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Oh.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&g(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}_c(pp);class fp{constructor(t,e,s){this.type=Wh|Hh|Gh,this.v="",this.ov="",this.Fe=!1,this.ht=!1,this.lt=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){b(t,this.v)||(this.ov=this.v,this.v=t,this.Fe=!0,this.cf.readonly||this.gt())}gt(){this.Fe&&(this.Fe=!1,this.lt[this.k]=this.v??this.cf.default,this.Tt())}handleEvent(){this.ov=this.v,this.v=this.lt[this.k],this.ov!==this.v&&(this.Fe=!1,this.Tt())}ct(){this.v=this.ov=this.lt[this.k]}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Fc(fp),yo(fp,null);const gp=(()=>{const t="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";return Mh(v(),{"xlink:actuate":["actuate",t],"xlink:arcrole":["arcrole",t],"xlink:href":["href",t],"xlink:role":["role",t],"xlink:show":["show",t],"xlink:title":["title",t],"xlink:type":["type",t],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",s],"xmlns:xlink":["xlink",s]})})(),mp=new Na;mp.type=Wh|Gh;class vp{constructor(){this.allowDirtyCheck=!0,this.Ge=v(),this.Xe=v(),this.Ke=v(),this.Qe=v(),this.Ye=ht(Tt),this.p=ht(Il),this.Ze=ht(Ma),this.svg=ht(tp);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:yp,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:dp,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},i={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:i,scrollLeft:i,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Ge;let n;if(m(t))n=i[t]??=v(),null==n[e]?n[e]=s:bp(t,e);else for(const s in t){n=i[s]??=v();const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:bp(s,e)}}useConfigGlobal(t,e){const s=this.Xe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:bp("*",e);else null==s[t]?s[t]=e:bp("*",t)}getAccessor(t,e,s){if(e in this.Qe||e in(this.Ke[t.tagName]??Pt))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return up;default:{const s=gp[e];return void 0!==s?lp.forNs(s[1]):Nh(t,e,this.svg)?up:mp}}}overrideAccessor(t,e){let s;if(m(t))s=this.Ke[t]??=v(),s[e]=!0;else for(const e in t)for(const i of t[e])s=this.Ke[e]??=v(),s[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Qe[e]=!0}getNodeObserverConfig(t,e){return this.Ge[t.tagName]?.[e]??this.Xe[e]}getNodeObserver(t,e,s){const i=this.Ge[t.tagName]?.[e]??this.Xe[e];let n;return null!=i?(n=new(i.type??fp)(t,e,i,s,this.Ye),n.doNotCache||(Ga(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new qc(t);case"css":case"style":return new pp(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=gp[e];if(void 0!==n)return lp.forNs(n[1]);if(Nh(t,e,this.svg))return up;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Ze.createProperty(t,e);throw Xh(652,e)}return new Da(t,e)}}function bp(t,e){throw Xh(653,t,e)}function wp(t,e){return t===e}vp.register=F(_a);class yp{constructor(t,e,s,i){this.type=Wh|Hh|Gh,this.v=void 0,this.ov=void 0,this.Je=void 0,this.ti=void 0,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ei(),this.ii(),this.Tt())}handleCollectionChange(){this.ii()}handleChange(t,e){this.ii()}ii(){const t=this.v,e=this.lt,s=Oh.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:wp;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(c(t))i=-1!==t.findIndex(t=>!!n(t,s));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.lt,s=Oh.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:wp;if("checkbox"===e.type){if(c(t)){const e=t.findIndex(t=>!!n(t,s));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.Tt()}ct(){this.ei()}ut(){this.v=this.ov=void 0,this.Je?.unsubscribe(this),this.ti?.unsubscribe(this),this.Je=this.ti=void 0}Tt(){Cp=this.ov,this.ov=this.v,this.subs.notify(this.v,Cp),Cp=void 0}ei(){const t=this.lt;(this.ti??=t.$observers?.model??t.$observers?.value)?.subscribe(this),this.Je?.unsubscribe(this),this.Je=void 0,"checkbox"===t.type&&(this.Je=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let Cp;Fc(yp),yo(yp,null);class $p{bind(t,e){if(!(e instanceof fc))throw Xh(9994,e);e.useTargetObserver(up)}}$p.$au={type:hl,name:"attr"};class kp{bind(t,e){if(!("handleEvent"in e))throw Xh(801);e.self=!0}unbind(t,e){e.self=!1}}kp.$au={type:hl,name:"self"};class xp{constructor(){this.oL=ht(Fa),this.si=ht(_a)}bind(t,e,...s){if(!(this.si instanceof vp))throw Xh(9993);if(0===s.length)throw Xh(802);if(!(e instanceof fc&&e.mode&Ch))throw Xh(803);const i=this.si.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw Xh(9992,e);const n=this.si.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}xp.$au={type:hl,name:"updateTrigger"};class Tp{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ni=!1,this.ri=0,this.oi=ht(Sc),this.l=ht(kd)}attaching(t,e){return this.li(this.value)}detaching(t,e){return this.ni=!0,P(this.pending,()=>{this.ni=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)})}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.li(t):void 0}li(t){const e=this.view,s=this.$controller,i=this.ri++,n=()=>!this.ni&&this.ri===i+1;let r;return P(this.pending,()=>this.pending=P(e?.deactivate(e,s),()=>{if(n()&&(r=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.oi.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=r))return r.setLocation(this.l),P(r.activate(r,s,s.scope),()=>{n()&&(this.pending=void 0)})}))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Tp.$au={type:Ll,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:t=>""===t||!!t&&"false"!==t}}};class Sp{constructor(){this.f=ht(Sc)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof Tp)r.elseFactory=this.f;else{if(!(r.viewModel instanceof Tp))throw Xh(810);r.viewModel.elseFactory=this.f}}}function Ap(t){t.dispose()}Sp.$au={type:"custom-attribute",name:"else",isTemplateController:!0};const Rp=["BindingBehavior","ValueConverter"];class Ep{constructor(){this.views=[],this.key=null,this.hi=[],this.ai=[],this.ci=[],this.ui=new Map,this.fi=void 0,this.di=!1,this.mi=!1,this.gi=null,this.pi=void 0,this.xi=!1,this.l=ht(kd),this.yi=ht(rd),this.f=ht(Sc),this.wi=ht(jp);const t=ht(dn).props[0].props[0];if(void 0!==t){const{to:e,value:s,command:i}=t;if("key"!==e)throw Xh(776,e);if(null===i)this.key=s;else{if("bind"!==i)throw Xh(775,i);this.key=ht(is).parse(s,Uh)}}}binding(t,e){const s=this.yi.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.bi=n;let t=r.iterable;for(;null!=t&&Rp.includes(t.$kind);)t=t.expression,this.di=!0;this.gi=t;break}this.ki();const a=r.declaration;(this.xi="ArrayDestructuring"===a.$kind||"ObjectDestructuring"===a.$kind)||(this.local=Kr(a,this.$controller.scope,n,null))}attaching(t,e){return this.Ci(),this.Bi(void 0),this.Si(t,this.pi??Ot)}detaching(t,e){return this.ki(),this.Ai(t)}unbinding(t,e){this.ui.clear()}itemsChanged(){this.$controller.isActive&&(this.ki(),this.Ci(),this.Bi(void 0),this.Ri(void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.di){if(this.mi)return;return this.mi=!0,this.items=Kr(this.forOf.iterable,s.scope,this.bi,null),void(this.mi=!1)}this.Ci(),this.Bi(null===this.key?e:void 0),this.Ri(e)}}Ri(t){const e=this.views;this.hi=e.slice();const s=e.length,i=this.key,n=null!==i,r=this.ci,o=this.ai;if(n||void 0===t){const e=this.local,a=this.pi.length,h=this.forOf.declaration,l=this.bi,c=this.xi;t=wo(a);let u=0;if(0===s)for(;u<a;++u)t[u]=-2;else if(0===a)for(u=0;u<s;++u)t.deletedIndices.push(u),t.deletedItems.push(Kp(c,h,r[u],l,e));else if(n){const n=Array(s);for(u=0;u<s;++u)n[u]=Hp(c,i,h,r[u],l,e);const d=Array(s);for(u=0;u<a;++u)d[u]=Hp(c,i,h,o[u],l,e);for(u=0;u<a;++u)n.includes(d[u])?t[u]=n.indexOf(d[u]):t[u]=-2;for(u=0;u<s;++u)d.includes(n[u])||(t.deletedIndices.push(u),t.deletedItems.push(Kp(c,h,r[u],l,e)))}else{for(u=0;u<a;++u)r.includes(o[u])?t[u]=r.indexOf(o[u]):t[u]=-2;for(u=0;u<s;++u)o.includes(r[u])||(t.deletedIndices.push(u),t.deletedItems.push(Kp(c,h,r[u],l,e)))}}if(t.deletedIndices.length>0){const e=P(this.Ti(t),()=>this.Ei(t));l(e)&&e.catch(Dh)}else this.Ei(t)}ki(){const t=this.$controller.scope;let e,s=this.Li,i=this.di;i&&(s=this.Li=Kr(this.gi,t,this.bi,null)??null,i=this.di=!b(this.items,s));const n=this.fi;if(this.$controller.isActive){const t=i?s:this.items;e=this.fi=this.wi.resolve(t).getObserver?.(t),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))}else n?.unsubscribe(this),this.fi=void 0}Bi(t){const e=this.ai;this.ci=e.slice();const s=this.pi,i=s.length,n=this.ai=Array(s.length),r=this.ui,o=new Map,a=this.$controller.scope,h=this.bi,l=this.forOf,c=this.local,u=this.xi;if(void 0===t){const t=this.key;if(null!==t){const e=Array(i);if("string"==typeof t)for(let n=0;n<i;++n)e[n]=s[n][t];else for(let n=0;n<i;++n){const i=Gp(s[n],l,a,h,c,u);zp(u,l.declaration,i,h,c,s[n]),e[n]=Kr(t,i,h,null)}for(let t=0;t<i;++t)n[t]=Wp(r,o,e[t],s[t],l,a,h,c,u)}else for(let t=0;t<i;++t)n[t]=Wp(r,o,s[t],s[t],l,a,h,c,u)}else{const r=e.length;for(let o=0;o<i;++o){const i=t[o];n[o]=i>=0&&i<r?e[i]:Gp(s[o],l,a,h,c,u),zp(u,l.declaration,n[o],h,c,s[o])}}r.clear(),this.ui=o}Ci(){const t=this.items;if(c(t))return void(this.pi=t.slice(0));const e=[];this.wi.resolve(t).iterate(t,(t,s)=>{e[s]=t}),this.pi=e}Si(t,e){let s,i,n,r;const{$controller:o,f:a,l:h,ai:c}=this,u=e.length,d=this.views=Array(u);for(let e=0;e<u;++e)n=d[e]=a.create().setLocation(h),n.nodes.unlink(),r=c[e],Bp(r.overrideContext,e,u),i=n.activate(t??n,o,r),l(i)&&(s??=[]).push(i);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}Ai(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),l(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ti(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices.slice().sort(Xp),a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n),l(s)&&(e??(e=[])).push(s);for(h=0;a>h;++h)r.splice(o[h]-h,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ei(t){let e,s,i,n=0;const{$controller:r,f:o,l:a,views:h,ai:c,hi:u}=this,d=t.length;for(;d>n;++n)-2===t[n]&&(i=o.create(),h.splice(n,0,i));if(h.length!==d)throw Xh(814,[h.length,d]);let p=0;for(n=0;n<t.length;++n)-2!==(p=t[n])&&(h[n]=u[p]);const f=function(t){const e=t.length;e>Ip&&(Ip=e,Op=new Int32Array(e),Pp=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,l=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Op[s],n=t[o],-2!==n&&n<i){Pp[r]=o,Op[++s]=r;continue}for(a=0,h=s;a<h;)l=a+h>>1,n=t[Op[l]],-2!==n&&n<i?a=l+1:h=l;n=t[Op[a]],(i<n||-2===n)&&(a>0&&(Pp[r]=Op[a-1]),Op[a]=r)}r=++s;const c=new Int32Array(r);for(i=Op[s-1];s-- >0;)c[s]=i,i=Pp[i];for(;r-- >0;)Op[r]=0;return c}(t);let g,m=f.length-1;for(n=d-1;n>=0;--n)i=h[n],g=h[n+1],-2===t[n]?(i.nodes.link(g?.nodes??a),i.setLocation(a),Bp(c[n].overrideContext,n,d),s=i.activate(i,r,c[n]),l(s)&&(e??(e=[])).push(s)):m<0||n!==f[m]?(i.nodes.link(g?.nodes??a),Bp(i.scope.overrideContext,n,d),i.nodes.insertBefore(i.location)):(Bp(i.scope.overrideContext,n,d),--m);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}dispose(){this.views.forEach(Ap),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}Ep.$au={type:Ll,name:"repeat",isTemplateController:!0,bindables:["items"]};let Ip=16,Op=new Int32Array(Ip),Pp=new Int32Array(Ip);class Mp{get $odd(){return!this.$even}get $even(){return this.$index%2==0}get $first(){return 0===this.$index}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(t=0,e=1){this.$index=t,this.$length=e}}const Bp=(t,e,s)=>{t.$index=e,t.$length=s},jp=el("IRepeatableHandlerResolver",t=>t.singleton(Lp));class Lp{constructor(){this.Mi=ht(Lt(Np))}resolve(t){if(Dp.handles(t))return Dp;if(Vp.handles(t))return Vp;if(Fp.handles(t))return Fp;if(_p.handles(t))return _p;if(qp.handles(t))return qp;const e=this.Mi.find(e=>e.handles(t));return void 0!==e?e:Up}}const Np=el("IRepeatableHandler"),Dp={handles:c,getObserver:Ka,iterate(t,e){const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)}},Vp={handles:u,getObserver:Ka,iterate(t,e){let s,i=0;for(s of t.keys())e(s,i++,t)}},Fp={handles:d,getObserver:Ka,iterate(t,e){let s,i=0;for(s of t.entries())e(s,i++,t)}},_p={handles:t=>"number"==typeof t,iterate(t,e){let s=0;for(;s<t;++s)e(s,s,t)}},qp={handles:t=>null==t,iterate(){}},Up={handles:t=>!1,iterate(t,e){throw Xh(777,t)}},zp=(t,e,s,i,n,r)=>{t?zr(e,s,i,null,r):s.bindingContext[n]=r},Kp=(t,e,s,i,n)=>t?Kr(e,s,i,null):s.bindingContext[n],Hp=(t,e,s,i,n,r)=>"string"==typeof e?Kp(t,s,i,n,r)[e]:Kr(e,i,n,null),Wp=(t,e,s,i,n,r,o,a,h)=>{let l=t.get(s);if(void 0===l?l=Gp(i,n,r,o,a,h):l instanceof _r?t.delete(s):1===l.length?(l=l[0],t.delete(s)):l=l.shift(),e.has(s)){const t=e.get(s);t instanceof _r?e.set(s,[t,l]):t.push(l)}else e.set(s,l);return zp(h,n.declaration,l,o,a,i),l},Gp=(t,e,s,i,n,r)=>{if(r){const n=_r.fromParent(s,new qr,new Mp);zr(e.declaration,n,i,null,t)}return _r.fromParent(s,new qr(n,t),new Mp)},Xp=(t,e)=>t-e;class Jp{constructor(){this.view=ht(Sc).create().setLocation(ht(kd))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=_r.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=_r.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Jp.$au={type:Ll,name:"with",isTemplateController:!0,bindables:["value"]};class Yp{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=ht(Sc),this.l=ht(kd)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue(()=>s.activate(t,i,i.scope)),this.queue(()=>this.swap(t,this.value)),this.promise}detaching(t,e){return this.queue(()=>this.view.deactivate(t,this.$controller)),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(t){this.queue(()=>this.Di(t))}Di(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Pi(null):void 0;if(i>0&&s[0].id<t.id)return;const n=[];let r=t.fallThrough;if(r){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&r;t++){const s=e[t];n.push(s),r=s.fallThrough}}else n.push(t);return P(this.Pi(null,n),()=>(this.activeCases=n,this.qi(null)))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const n=this.defaultCase;return 0===s.length&&void 0!==n&&s.push(n),P(this.activeCases.length>0?this.Pi(t,s):void 0,()=>{if(this.activeCases=s,0!==s.length)return this.qi(t)})}qi(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const n=e.scope;return 1===i?s[0].activate(t,n):M(...s.map(e=>e.activate(t,n)))}Pi(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return P(M(...s.reduce((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s),[])),()=>{s.length=0})}}queue(t){const e=this.promise;let s;s=this.promise=P(P(e,t),()=>{this.promise===s&&(this.promise=void 0)})}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some(e=>e.accept(t))||void 0}}Yp.$au={type:Ll,name:"switch",isTemplateController:!0,bindables:["value"]};let Qp=0;const Zp=["value",{name:"fallThrough",mode:wh,set(t){switch(t){case"true":return!0;case"false":return!1;default:return!!t}}}];class tf{constructor(){this.id=++Qp,this.fallThrough=!1,this.view=void 0,this.f=ht(Sc),this.Ye=ht(Fa),this.l=ht(kd),this.Ii=ht(Yt).scopeTo(`Case-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof Yp))throw Xh(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Ii.debug("isMatch()");const e=this.value;return c(e)?(void 0===this.fi&&(this.fi=this._i(e)),e.includes(t)):e===t}valueChanged(t,e){c(t)?(this.fi?.unsubscribe(this),this.fi=this._i(t)):void 0!==this.fi&&this.fi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.fi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}_i(t){const e=this.Ye.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}}_l({name:"case",bindables:Zp,isTemplateController:!0},tf);class ef extends tf{linkToSwitch(t){if(void 0!==t.defaultCase)throw Xh(816);t.defaultCase=this}}_l({name:"default-case",bindables:Zp,isTemplateController:!0},ef);class sf{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=ht(Sc),this.l=ht(kd),this.p=ht(Il),this.logger=ht(Yt).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return P(s.activate(t,i,this.viewScope=_r.fromParent(i.scope,{})),()=>this.swap(t))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!l(e))return;const s=this.fulfilled,i=this.rejected,n=this.pending,r=this.viewScope;let o;const a=()=>{M(o=(this.preSettledTask=po(()=>M(s?.deactivate(t),i?.deactivate(t),n?.activate(t,r)))).result.catch(t=>{throw t}),e.then(a=>{if(this.value!==e)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=po(()=>M(n?.deactivate(t),i?.deactivate(t),s?.activate(t,r,a)))).result};this.preSettledTask.status===Kh?o.then(h):(this.preSettledTask.cancel(),h())},a=>{if(this.value!==e)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=po(()=>M(n?.deactivate(t),s?.deactivate(t),i?.activate(t,r,a)))).result};this.preSettledTask.status===Kh?o.then(h):(this.preSettledTask.cancel(),h())}))};this.postSettledTask?.status===Kh?this.postSettlePromise.then(a):(this.postSettledTask?.cancel(),a())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}sf.$au={type:Ll,name:"promise",isTemplateController:!0,bindables:["value"]};class nf{constructor(){this.view=void 0,this.f=ht(Sc),this.l=ht(kd)}link(t,e,s,i){af(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}nf.$au={type:Ll,name:"pending",isTemplateController:!0,bindables:{value:{mode:yh}}};class rf{constructor(){this.view=void 0,this.f=ht(Sc),this.l=ht(kd)}link(t,e,s,i){af(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}rf.$au={type:Ll,name:"then",isTemplateController:!0,bindables:{value:{mode:Ch}}};class of{constructor(){this.view=void 0,this.f=ht(Sc),this.l=ht(kd)}link(t,e,s,i){af(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}function af(t){const e=t.parent,s=e?.viewModel;if(s instanceof sf)return s;throw Xh(813)}of.$au={type:Ll,name:"catch",isTemplateController:!0,bindables:{value:{mode:Ch}}};class hf{"promise.resolve"(t,e){return new Yi(t,e,"promise","bind")}}hf[Symbol.metadata]={[J]:en.create([{pattern:"promise.resolve",symbols:""}],hf)};class lf{then(t,e){return new Yi(t,e,"then","from-view")}}lf[Symbol.metadata]={[J]:en.create([{pattern:"then",symbols:""}],lf)};class cf{catch(t,e){return new Yi(t,e,"catch","from-view")}}cf[Symbol.metadata]={[J]:en.create([{pattern:"catch",symbols:""}],cf)};class uf{constructor(){this.Vi=!1,this.qe=ht(Ml),this.p=ht(Il)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Fi():this.Vi=!0}attached(){this.Vi&&(this.Vi=!1,this.Fi()),this.qe.addEventListener("focus",this),this.qe.addEventListener("blur",this)}detaching(){const t=this.qe;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Hi||(this.value=!1)}Fi(){const t=this.qe,e=this.Hi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Hi(){return this.qe===this.p.document.activeElement}}uf.$au={type:Ll,name:"focus",bindables:{value:{mode:$h}}};class df{constructor(){this.position="beforeend",this.strict=!1;const t=ht(Sc),e=ht(kd),s=ht(Il);this.p=s,this.Oi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.$i=Rc(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Td.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)Td.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Oi=this.Ni();return this.Wi(e,this.position),this.ji(t,e)}detaching(t){return this.zi(t,this.Oi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Ni();if(this.Oi===e)return;this.Oi=e;const s=P(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));l(s)&&s.catch(Dh)}positionChanged(){const{$controller:t,Oi:e}=this;if(!t.isActive)return;const s=P(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));l(s)&&s.catch(Dh)}ji(t,e){const{activating:s,callbackContext:i,view:n}=this;return P(s?.call(i,e,n),()=>this.Ui(t,e))}Ui(t,e){const{$controller:s,view:i}=this;return null!==t?P(i.activate(t??i,s,s.scope),()=>this.Gi(e)):(i.nodes.insertBefore(this.$i),this.Gi(e))}Gi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}zi(t,e){const{deactivating:s,callbackContext:i,view:n}=this;return P(s?.call(i,e,n),()=>this.Xi(t,e))}Xi(t,e){const{$controller:s,view:i}=this;return null!==t?P(i.deactivate(t,s),()=>this.Ki(e)):(i.nodes.remove(),this.Ki(e))}Ki(t){const{deactivated:e,callbackContext:s,view:i}=this;return P(e?.call(s,t,i),()=>this.Qi())}Ni(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw Xh(811);return e.body}if(m(s)){let n=e;m(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw Xh(812);return e.body}return s}Qi(){this.$i.remove(),this.$i.$start.remove()}Wi(t,e){const s=this.$i,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":Ec(t,null,r);break;case"afterbegin":Ec(t,t.firstChild,r);break;case"beforebegin":Ec(n,t,r);break;case"afterend":Ec(n,t.nextSibling,r);break;default:throw Xh(779,e)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}let pf;df.$au={type:Ll,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};class ff{constructor(){this.Yi=null,this.Zi=null,this.ne=!1,this.expose=null,this.slotchange=null,this.Ji=new Set,this.fi=null;const t=ht(od),e=ht(kd),s=ht(dn),i=ht(Tu),n=this.name=s.data.name,r=s.projections?.[Pc],o=t.instruction?.projections?.[n],a=t.controller.container;let h,l;null==o?(l=a.createChild({inheritParentResources:!0}),h=i.getViewFactory(r??(pf??=Md.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),l),this.ts=!1):(l=a.createChild(),l.useResources(t.parent.controller.container),rl(l,od,new Et(void 0,t.parent)),h=i.getViewFactory(o,l),this.ts=!0,this.es=a.getAll(jc,!1)?.filter(t=>"*"===t.slotName||t.slotName===n)??Ot),this.ss=(this.es??=Ot).length>0,this.rs=t,this.view=h.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Ji.add(t)}unsubscribe(t){this.Ji.delete(t)}binding(t,e){for(this.Yi=e.scope;"synthetic"===e.vmKind&&e.parent?.viewModel instanceof ff;)e=e.parent.parent;const s=e.scope.bindingContext;let i;this.ts&&(i=this.rs.controller.scope.parent,(this.Zi=_r.fromParent(i,i.bindingContext)).overrideContext.$host=this.expose??s)}attaching(t,e){return P(this.view.activate(t,this.$controller,this.ts?this.Zi:this.Yi),()=>{(this.ss||g(this.slotchange))&&(this.es.forEach(t=>t.watch(this)),this.ei(),this.ls(),this.ne=!0)})}detaching(t,e){return this.ne=!1,this.cs(),this.es.forEach(t=>t.unwatch(this)),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.ts&&null!=this.Zi&&(this.Zi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ei(){if(null!=this.fi)return;const t=this.l,e=t.parentElement;null!=e&&(this.fi=Ic(e,e=>{mf(t,e)&&this.ls()})).observe(e,{childList:!0})}cs(){this.fi?.disconnect(),this.fi=null}ls(){const t=this.nodes,e=new Set(this.Ji);let s;for(s of(this.ne&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}}ff.$au={type:Fd,name:"au-slot",template:null,containerless:!0,processContent(t,e,s){s.name=t.getAttribute("name")??Pc;let i=t.firstChild,n=null;for(;null!==i;)n=i.nextSibling,Oc(i)&&i.hasAttribute("au-slot")&&t.removeChild(i),i=n},bindables:["expose","slotchange"]};const gf=(t,e)=>t.compareDocumentPosition(e),mf=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===gf(t.$start,e)&&2===gf(t,e))return!0;if(i.length>0&&null!=n&&4===gf(t.$start,n)&&2===gf(t,n))return!0}};class vf{constructor(){this.scopeBehavior="auto",this.us=void 0,this.tag=null,this.c=ht(xt),this.parent=ht(rd),this.ds=ht(Ml),this.l=ht(kd),this.p=ht(Il),this.r=ht(Tu),this.gs=ht(dn),this.ps=ht(function(t){return null==t?St:St(t)}(wf)),this.yt=ht(Ni),this.it=ht(od),this.ep=ht(is),this.oL=ht(Fa),this.ne=!1}get composing(){return this.xs}get composition(){return this.us}attaching(t,e){return this.ne=!0,this.xs=P(this.queue(new yf(this.template,this.component,this.model,void 0),t),t=>{this.ps.ys(t)&&(this.xs=void 0)})}detaching(t){this.ne=!1;const e=this.us,s=this.xs;return this.ps.invalidate(),this.us=this.xs=void 0,P(s,()=>e?.deactivate(t))}propertyChanged(t){this.ne&&"composing"!==t&&"composition"!==t&&("model"!==t||null==this.us?"tag"===t&&this.us?.controller.vmKind===Xu||(this.xs=P(this.xs,()=>P(this.queue(new yf(this.template,this.component,this.model,t),void 0),t=>{this.ps.ys(t)&&(this.xs=void 0)}))):this.us.update(this.model))}queue(t,e){const s=this.ps,i=this.us;return P(s.create(t),t=>s.ys(t)?P(this.compose(t),n=>s.ys(t)?P(n.activate(e),()=>s.ys(t)?(this.us=n,P(i?.deactivate(e),()=>t)):P(n.controller.deactivate(n.controller,this.$controller),()=>(n.controller.dispose(),t))):(n.controller.dispose(),t)):t)}compose(t){const{ws:e,bs:s,ks:i}=t.change,{c:n,$controller:r,l:o,gs:a}=this,h=this.Cs(this.it.controller.container,s),l=n.createChild(),c=this.p.document.createElement(null==h?this.tag??"div":h.name);let u;o.parentNode.insertBefore(c,o),u=null==h?null==this.tag?Ad(c):null:h.containerless?Ad(c):null;const d=()=>{if(c.remove(),null!=u){let t=u.$start.nextSibling,e=null;for(;null!==t&&t!==u;)e=t.nextSibling,t.remove(),t=e;u.$start?.remove(),u.remove()}},p=this.Bs(l,"string"==typeof s?h.Type:s,c,u),f=()=>{const s=a.captures??Ot;if(null!==h){const e=h.capture,[i,n]=s.reduce((t,s)=>(t[!(s.target in h.bindables)&&(!0===e||g(e)&&e(s.target))?0:1].push(s),t),[[],[]]),o=ju.$el(l,p,c,{projections:a.projections,captures:i},h,u);return this.Ss(c,h,n).forEach(t=>o.addBinding(t)),new kf(o,t=>o.activate(t??o,r,r.scope.parent),t=>P(o.deactivate(t??o,r),d),t=>p.activate?.(t),t)}{const i=Md.create({name:Xd.generateName(),template:e}),n=this.r.getViewFactory(i,l),o=ju.$view(n,r),a="auto"===this.scopeBehavior?_r.fromParent(this.parent.scope,p):_r.create(p);return o.setHost(c),null==u?this.Ss(c,i,s).forEach(t=>o.addBinding(t)):o.setLocation(u),new kf(o,t=>o.activate(t??o,r,a),t=>P(o.deactivate(t??o,r),d),t=>p.activate?.(t),t)}};return"activate"in p?P(p.activate(i),()=>f()):f()}Bs(t,e,s,i){if(null==e)return new bf;if("object"==typeof e)return e;const n=this.p;Id(t,s,n),rl(t,kd,new Et("IRenderLocation",i));const r=t.invoke(e);return rl(t,e,new Et("au-compose.component",r)),r}Cs(t,e){if("string"==typeof e){const s=Xd.find(t,e);if(null==s)throw Xh(806,e);return s}const s=g(e)?e:e?.constructor;return Xd.isType(s,void 0)?Xd.getDefinition(s,null):null}Ss(t,e,s){const i=new ad(this.$controller,{projections:null,captures:s},this.it.parent);return Lc.create(i,t,e,this.r,this.yt,this.p,this.ep,this.oL)}}vf.$au={type:Fd,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:t=>{if("scoped"===t||"auto"===t)return t;throw Xh(805,t)}},{name:"composing",mode:Ch},{name:"composition",mode:Ch},"tag"]};class bf{}class wf{constructor(){this.id=0}ys(t){return t.id===this.id}create(t){return P(t.load(),t=>new $f(++this.id,t))}invalidate(){this.id++}}class yf{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}load(){return l(this.ws)||l(this.bs)?Promise.all([this.ws,this.bs]).then(([t,e])=>new Cf(t,e,this.ks,this.As)):new Cf(this.ws,this.bs,this.ks,this.As)}}class Cf{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}}class $f{constructor(t,e){this.id=t,this.change=e}}class kf{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw Xh(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw Xh(808);default:this.state=-1}}}const xf=el("ISanitizer",t=>t.singleton(class{sanitize(){throw Xh(99,"sanitize")}}));class Tf{constructor(){this.Rs=ht(xf)}toView(t){return null==t?null:this.Rs.sanitize(t)}}Tf.$au={type:Jl,name:"sanitize"};class Sf{constructor(){this.el=ht(Ml),this.p=ht(Il),this.Ts=!1,this.L=!1,this.$val="",this.$prio="",this.update=()=>{this.L=!1,Boolean(this.value)!==this.Es&&(this.Es===this.Ls?(this.Es=!this.Ls,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Es=this.Ls,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=ht(dn);this.Es=this.Ls="hide"!==t.alias}binding(){this.Ts=!0,this.update()}detaching(){this.Ts=!1,this.L=!1}valueChanged(){this.Ts&&!this.L&&(this.L=!0,uo(this.update))}}Sf.$au={type:Ll,name:"show",bindables:["value"],aliases:["hide"]};const Af=[np,class{static register(t){t.register(V.singleton(this,this),V.aliasTo(this,Ma))}constructor(){this.tracked=[],this.q=null,this.K=0,this.p=ht(Bt),this.check=()=>{if(Ba.disabled)return;if(++this.K<Ba.timeoutsPerCheck)return;this.K=0;const t=this.tracked.slice(0),e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},yo(ja,null)}createProperty(t,e){if(Ba.throw)throw Fr(218,e);return new ja(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.q=(t=>{const e=new mo(t,Math.max(0,0));return so.push(e),e.O(),e})(this.check))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.q.cancel(),this.q=null)}},vp],Rf=[nn,sn,rn,Tc],Ef=[Un,Vn,_n,Fn,qn,zn,Jn,Kn,Hn,Xn,Gn,Wn,Yn],If=[Cl,ml,vl,bl,xl,Sl,wl,Tf,Tp,Sp,Ep,Jp,Yp,tf,ef,sf,nf,rf,of,hf,lf,cf,$p,kp,xp,vf,df,uf,Sf,ff],Of=[iu,nu,eu,su,Jc,Yc,Qc,Zc,tu,au,du,hu,lu,cu,uu,ru,pu,fu],Pf=Mf(Mt);function Mf(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(nl(vo,s.coercingOptions),ns,...Af,...If,...Rf,...Ef,...Of)},customize:e=>Mf(e??t)}}const Bf=vh.getOrCreate(globalThis);class jf extends Zd{constructor(t=function(){return kt.createContainer().register(V.instance(Il,Bf),Pf)}()){super(t)}static app(t){return(new jf).app(t)}static enhance(t){return(new jf).enhance(t)}static register(...t){return(new jf).register(...t)}app(t){if(Xd.isType(t)){const e=Xd.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}const Lf=kt.createInterface("IValidationExpressionHydrator"),Nf=i.get,Df=i.define,Vf=i.delete,{annotation:Ff}=K,_f=Ff.keyFor,qf=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),Uf=Symbol.for("au:validation:explicit-message-key"),zf=kt.createInterface("IValidationMessageProvider"),Kf=Object.freeze({aliasKey:_f("validation-rule-alias-message"),define(t,e,s){this.setDefaultMessage(t,e,s)},setDefaultMessage(t,{aliases:e},s){const i=s?Nf(this.aliasKey,t):void 0;if(void 0!==i){const t={...Object.fromEntries(i.map(({name:t,defaultMessage:e})=>[t,e])),...Object.fromEntries(e.map(({name:t,defaultMessage:e})=>[t,e]))};e=T(Object.entries(t)).map(([t,e])=>({name:t,defaultMessage:e}))}Df(e,t,this.aliasKey)},getDefaultMessages(t){const e=Nf(this.aliasKey,t);return null!=e||t instanceof Function?e:Nf(this.aliasKey,t.constructor)}});class Hf{get messageKey(){return this.t}set messageKey(t){this.t=t}constructor(t=void 0){this.tag=void 0,this.t=t}canExecute(t){return!0}execute(t,e){throw qf(99,"execute")}accept(t){throw qf(99,"accept")}}Hf.$TYPE="";class Wf extends Hf{constructor(){super("required")}execute(t){return null!=t&&!("string"==typeof t&&!/\S/.test(t))}accept(t){return t.visitRequiredRule(this)}}Wf.$TYPE="RequiredRule";class Gf extends Hf{constructor(t,e="matches"){super(e),this.pattern=t}execute(t){return null==t||0===t.length||this.pattern.test(t)}accept(t){return t.visitRegexRule(this)}}Gf.$TYPE="RegexRule";class Xf extends Hf{constructor(t,e){super(e?"maxLength":"minLength"),this.length=t,this.isMax=e}execute(t){return null==t||0===t.length||(this.isMax?t.length<=this.length:t.length>=this.length)}accept(t){return t.visitLengthRule(this)}}Xf.$TYPE="LengthRule";class Jf extends Hf{constructor(t,e){super(e?"maxItems":"minItems"),this.count=t,this.isMax=e}execute(t){return null==t||(this.isMax?t.length<=this.count:t.length>=this.count)}accept(t){return t.visitSizeRule(this)}}Jf.$TYPE="SizeRule";class Yf extends Hf{constructor(t,{min:e,max:s}){super(void 0!==e&&void 0!==s?t?"range":"between":void 0!==e?"min":"max"),this.isInclusive=t,this.min=Number.NEGATIVE_INFINITY,this.max=Number.POSITIVE_INFINITY,this.min=e??this.min,this.max=s??this.max}execute(t,e){return null==t||(this.isInclusive?t>=this.min&&t<=this.max:t>this.min&&t<this.max)}accept(t){return t.visitRangeRule(this)}}Yf.$TYPE="RangeRule";class Qf extends Hf{constructor(t){super("equals"),this.expectedValue=t}execute(t){return null==t||""===t||t===this.expectedValue}accept(t){return t.visitEqualsRule(this)}}Qf.$TYPE="EqualsRule";class Zf extends Hf{get messageKey(){return this.i??this.t??void 0}set messageKey(t){this.i=t}constructor(t,e,s){super(void 0),this.validState=t,this.stateFunction=e,this.messages=s,this.i=null;const i=[];for(const[t,e]of Object.entries(s))i.push({name:t,defaultMessage:e});Kf.setDefaultMessage(this,{aliases:i},!1)}execute(t,e){return P(this.stateFunction(t,e),t=>(this.t=t,t===this.validState))}accept(t){}}Zf.$TYPE="StateRule",Kf.define(Qf,{aliases:[{name:"equals",defaultMessage:"${$displayName} must be ${$rule.expectedValue}."}]},!1),Kf.define(Yf,{aliases:[{name:"min",defaultMessage:"${$displayName} must be at least ${$rule.min}."},{name:"max",defaultMessage:"${$displayName} must be at most ${$rule.max}."},{name:"range",defaultMessage:"${$displayName} must be between or equal to ${$rule.min} and ${$rule.max}."},{name:"between",defaultMessage:"${$displayName} must be between but not equal to ${$rule.min} and ${$rule.max}."}]},!1),Kf.define(Jf,{aliases:[{name:"minItems",defaultMessage:"${$displayName} must contain at least ${$rule.count} item${$rule.count === 1 ? '' : 's'}."},{name:"maxItems",defaultMessage:"${$displayName} cannot contain more than ${$rule.count} item${$rule.count === 1 ? '' : 's'}."}]},!1),Kf.define(Xf,{aliases:[{name:"minLength",defaultMessage:"${$displayName} must be at least ${$rule.length} character${$rule.length === 1 ? '' : 's'}."},{name:"maxLength",defaultMessage:"${$displayName} cannot be longer than ${$rule.length} character${$rule.length === 1 ? '' : 's'}."}]},!1),Kf.define(Gf,{aliases:[{name:"matches",defaultMessage:"${$displayName} is not correctly formatted."},{name:"email",defaultMessage:"${$displayName} is not a valid email."}]},!1),Kf.define(Wf,{aliases:[{name:"required",defaultMessage:"${$displayName} is required."}]},!1),Kf.define(Hf,{aliases:[{name:void 0,defaultMessage:"${$displayName} is invalid."}]},!1);const tg=kt.createInterface("ICustomMessages");class eg{constructor(t,e=void 0,s=void 0){this.expression=t,this.name=e,this.displayName=s}accept(t){return t.visitRuleProperty(this)}}eg.$TYPE="RuleProperty";const sg=Object.freeze({allRulesAnnotations:_f("validation-rules-annotations"),name:"validation-rules",defaultRuleSetName:"__default",set(t,e,s){const i=`${sg.name}:${s??sg.defaultRuleSetName}`;Df(e,t,_f(i));const n=Nf(this.allRulesAnnotations,t);void 0===n?Df([i],t,this.allRulesAnnotations):n.push(i)},get(t,e){const s=_f(sg.name,e??sg.defaultRuleSetName);return Nf(s,t)??Nf(s,t.constructor)},unset(t,e){const s=Nf(this.allRulesAnnotations,t);if(Array.isArray(s))for(const i of s.slice(0))if(i.startsWith(sg.name)&&(void 0===e||i.endsWith(e))){Vf(_f(i),t);const e=s.indexOf(i);e>-1&&s.splice(e,1)}},isValidationRulesSet(t){const e=Nf(this.allRulesAnnotations,t);return void 0!==e&&e.some(t=>t.startsWith(sg.name))}});class ig{constructor(t,e,s,i,n,r){this.messageProvider=t,this.$displayName=e,this.$propertyName=s,this.$value=i,this.$rule=n,this.$object=r}$getDisplayName(t,e){return this.messageProvider.getDisplayName(t,e)}}class ng{constructor(t,e,s,i,n=[[]]){this.validationRules=e,this.messageProvider=s,this.property=i,this.$rules=n,this.l=t}accept(t){return t.visitPropertyRule(this)}addRule(t){return this.getLeafRules().push(this.latestRule=t),this}getLeafRules(){const t=this.$rules.length-1;return this.$rules[t]}async validate(t,e,s){void 0===s&&(s=_r.create({[lg]:t}));const i=this.property.expression;let n;n=void 0===i?t:Kr(i,s,this,null);let r=!0;const o=async s=>{const i=async e=>{let s=e.execute(n,t);s instanceof Promise&&(s=await s),r=r&&s;const{displayName:i,name:o}=this.property;let a;if(!s){const s=_r.create(new ig(this.messageProvider,this.messageProvider.getDisplayName(o,i),o,n,e,t));a=Kr(this.messageProvider.getMessage(e),s,this,null)}return new ug(s,a,o,t,e,this)},o=[];for(const n of s)!n.canExecute(t)||void 0!==e&&n.tag!==e||o.push(i(n));return Promise.all(o)};return this.$rules.reduce(async(t,e)=>t.then(async t=>r?(async(t,e)=>{const s=await o(e);return t.push(...s),t})(t,e):Promise.resolve(t)),Promise.resolve([]))}then(){return this.$rules.push([]),this}withMessageKey(t){return this.assertLatestRule(this.latestRule),this.latestRule.messageKey=t,this}withMessage(t){const e=this.latestRule;return this.assertLatestRule(e),this.messageProvider.setMessage(e,t,Uf),this}when(t){return this.assertLatestRule(this.latestRule),this.latestRule.canExecute=t,this}tag(t){return this.assertLatestRule(this.latestRule),this.latestRule.tag=t,this}assertLatestRule(t){if(void 0===t)throw qf(4101)}displayName(t){return this.property.displayName=t,this}satisfiesState(t,e,s){return this.addRule(new Zf(t,e,s))}satisfies(t){const e=new class extends Hf{constructor(){super(...arguments),this.execute=t}};return this.addRule(e)}satisfiesRule(t){return this.addRule(t)}required(){return this.addRule(new Wf)}matches(t){return this.addRule(new Gf(t))}email(){return this.addRule(new Gf(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"email"))}minLength(t){return this.addRule(new Xf(t,!1))}maxLength(t){return this.addRule(new Xf(t,!0))}minItems(t){return this.addRule(new Jf(t,!1))}maxItems(t){return this.addRule(new Jf(t,!0))}min(t){return this.addRule(new Yf(!0,{min:t}))}max(t){return this.addRule(new Yf(!0,{max:t}))}range(t,e){return this.addRule(new Yf(!0,{min:t,max:e}))}between(t,e){return this.addRule(new Yf(!1,{min:t,max:e}))}equals(t){return this.addRule(new Qf(t))}ensure(t){return this.latestRule=void 0,this.validationRules.ensure(t)}ensureObject(){return this.latestRule=void 0,this.validationRules.ensureObject()}get rules(){return this.validationRules.rules}on(t,e){return this.validationRules.on(t,e)}}ng.$TYPE="PropertyRule",Gr(ng);const rg=kt.createInterface("IValidationRules");class og{constructor(){this.rules=[],this.targets=new Set,this.locator=ht(Tt),this.parser=ht(is),this.messageProvider=ht(zf),this.deserializer=ht(Lf)}ensure(t){const[e,s]=cg(t,this.parser);let i=this.rules.find(t=>t.property.name==e);return void 0===i&&(i=new ng(this.locator,this,this.messageProvider,new eg(s,e)),this.rules.push(i)),i}ensureObject(){const t=new ng(this.locator,this,this.messageProvider,new eg);return this.rules.push(t),t}on(t,e){const s=sg.get(t,e);return Object.is(s,this.rules)||(this.rules=s??[],sg.set(t,this.rules,e),this.targets.add(t)),this}off(t,e){const s=void 0!==t?[t]:Array.from(this.targets);for(const t of s)sg.unset(t,e),sg.isValidationRulesSet(t)||this.targets.delete(t)}applyModelBasedRules(t,e){const s=new Set;for(const i of e){const e=i.tag,n=this.deserializer.hydrateRuleset(i.ruleset,this);sg.set(t,n,e),s.add(e)}}}const ag=/^(?:function)?\s*\(?[$_\w\d]+\)?\s*(?:=>)?\s*\{(?:\s*["']{1}use strict["']{1};)?(?:[$_\s\w\d\/\*.['"\]+;\(\)]+)?\s*return\s+[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)\s*;?\s*\}$/,hg=/^\(?[$_\w\d]+\)?\s*=>\s*[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)$/,lg="$root";function cg(t,e){switch(typeof t){case"string":break;case"function":{const e=t.toString(),s=hg.exec(e)??ag.exec(e);if(null===s)throw qf(4102,e);t=s[1].substring(1);break}default:throw qf(4102,t)}return[t,e.parse(`${lg}.${t}`,"IsProperty")]}class ug{constructor(t,e,s,i,n,r,o=!1){this.valid=t,this.message=e,this.propertyName=s,this.object=i,this.rule=n,this.propertyRule=r,this.isManual=o,this.id=ug.nextId++}toString(){return this.valid?"Valid.":this.message}}ug.nextId=0;const dg=new Set(["displayName","propertyName","value","object","config","getDisplayName"]);class pg{constructor(t=ht(Yt),e=ht(tg)){this.registeredMessages=new WeakMap,this.parser=ht(is),this.logger=t.scopeTo(pg.name);for(const{rule:t,aliases:s}of e)Kf.setDefaultMessage(t,{aliases:s},!0)}getMessage(t){const e=t.messageKey,s=this.registeredMessages.get(t);if(null!=s){const t=s.get(Uf)??s.get(e);if(void 0!==t)return t}const i=Kf.getDefaultMessages(t);let n;return n=1===i.length&&void 0===e?i[0].defaultMessage:i.find(t=>t.name===e)?.defaultMessage,n||(n=Kf.getDefaultMessages(Hf)[0].defaultMessage),this.setMessage(t,n)}setMessage(t,e,s){const i=this.parseMessage(e),n=this.registeredMessages;let r=n.get(t);return void 0===r&&n.set(t,r=new Map),r.set(s??t.messageKey,i),i}parseMessage(t){const e=this.parser.parse(t,"Interpolation");if("Interpolation"===e?.$kind){for(const s of e.expressions){const e=s.name;if(dg.has(e)&&this.logger.warn(`Did you mean to use "$${e}" instead of "${e}" in this validation message template: "${t}"?`),"AccessThis"===s.$kind||s.ancestor>0)throw new Error("$parent is not permitted in validation message expressions.")}return e}return new Fe(t)}getDisplayName(t,e){if(null!=e)return e instanceof Function?e():e;if(void 0===t)return;const s=t.toString().split(/(?=[A-Z])/).join(" ");return s.charAt(0).toUpperCase()+s.slice(1)}}var fg,gg;(gg=fg||(fg={})).BindingBehaviorExpression="BindingBehaviorExpression",gg.ValueConverterExpression="ValueConverterExpression",gg.AssignExpression="AssignExpression",gg.ConditionalExpression="ConditionalExpression",gg.AccessThisExpression="AccessThisExpression",gg.AccessBoundaryExpression="AccessBoundaryExpression",gg.AccessScopeExpression="AccessScopeExpression",gg.AccessMemberExpression="AccessMemberExpression",gg.AccessKeyedExpression="AccessKeyedExpression",gg.CallScopeExpression="CallScopeExpression",gg.CallMemberExpression="CallMemberExpression",gg.CallFunctionExpression="CallFunctionExpression",gg.BinaryExpression="BinaryExpression",gg.UnaryExpression="UnaryExpression",gg.PrimitiveLiteralExpression="PrimitiveLiteralExpression",gg.ArrayLiteralExpression="ArrayLiteralExpression",gg.ObjectLiteralExpression="ObjectLiteralExpression",gg.TemplateExpression="TemplateExpression",gg.TaggedTemplateExpression="TaggedTemplateExpression",gg.ArrayBindingPattern="ArrayBindingPattern",gg.ObjectBindingPattern="ObjectBindingPattern",gg.BindingIdentifier="BindingIdentifier",gg.ForOfStatement="ForOfStatement",gg.Interpolation="Interpolation",gg.DestructuringAssignment="DestructuringAssignment",gg.DestructuringSingleAssignment="DestructuringSingleAssignment",gg.DestructuringRestAssignment="DestructuringRestAssignment",gg.ArrowFunction="ArrowFunction",gg.Custom="Custom";class mg{static deserialize(t){const e=new mg,s=JSON.parse(t);return e.hydrate(s)}hydrate(t){switch(t.$TYPE){case fg.AccessMemberExpression:{const e=t;return new Oe(this.hydrate(e.object),e.name)}case fg.AccessKeyedExpression:{const e=t;return new Pe(this.hydrate(e.object),this.hydrate(e.key))}case fg.AccessThisExpression:return new Ae(t.ancestor);case fg.AccessBoundaryExpression:return new Re;case fg.AccessScopeExpression:{const e=t;return new Ee(e.name,e.ancestor)}case fg.ArrayLiteralExpression:{const e=t;return new _e(this.hydrate(e.elements))}case fg.ObjectLiteralExpression:{const e=t;return new qe(this.hydrate(e.keys),this.hydrate(e.values))}case fg.PrimitiveLiteralExpression:{const e=t;return new Fe(this.hydrate(e.value))}case fg.CallFunctionExpression:{const e=t;return new Le(this.hydrate(e.func),this.hydrate(e.args))}case fg.CallMemberExpression:{const e=t;return new je(this.hydrate(e.object),e.name,this.hydrate(e.args))}case fg.CallScopeExpression:{const e=t;return new Be(e.name,this.hydrate(e.args),e.ancestor)}case fg.TemplateExpression:{const e=t;return new Ue(this.hydrate(e.cooked),this.hydrate(e.expressions))}case fg.TaggedTemplateExpression:{const e=t;return new ze(this.hydrate(e.cooked),this.hydrate(e.raw),this.hydrate(e.func),this.hydrate(e.expressions))}case fg.UnaryExpression:{const e=t;return new Ve(e.operation,this.hydrate(e.expression))}case fg.BinaryExpression:{const e=t;return new De(e.operation,this.hydrate(e.left),this.hydrate(e.right))}case fg.ConditionalExpression:{const e=t;return new Te(this.hydrate(e.condition),this.hydrate(e.yes),this.hydrate(e.no))}case fg.AssignExpression:{const e=t;return new xe(this.hydrate(e.target),this.hydrate(e.value))}case fg.ValueConverterExpression:{const e=t;return new ke(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case fg.BindingBehaviorExpression:{const e=t;return new $e(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case fg.ArrayBindingPattern:{const e=t;return new Ke(this.hydrate(e.elements))}case fg.ObjectBindingPattern:{const e=t;return new He(this.hydrate(e.keys),this.hydrate(e.values))}case fg.BindingIdentifier:return new We(t.name);case fg.ForOfStatement:{const e=t;return new Ge(this.hydrate(e.declaration),this.hydrate(e.iterable),this.hydrate(e.semiIdx))}case fg.Interpolation:{const e=t;return new Xe(this.hydrate(e.cooked),this.hydrate(e.expressions))}case fg.DestructuringAssignment:return new Je(this.hydrate(t.$kind),this.hydrate(t.list),this.hydrate(t.source),this.hydrate(t.initializer));case fg.DestructuringSingleAssignment:return new Ye(this.hydrate(t.target),this.hydrate(t.source),this.hydrate(t.initializer));case fg.DestructuringRestAssignment:return new Qe(this.hydrate(t.target),this.hydrate(t.indexOrProperties));case fg.ArrowFunction:return new Ze(this.hydrate(t.parameters),this.hydrate(t.body),this.hydrate(t.rest));default:if(Array.isArray(t))return"object"==typeof t[0]?this.deserializeExpressions(t):t.map(vg);if("object"!=typeof t)return vg(t);throw qf(4100,t)}}deserializeExpressions(t){const e=[];for(const s of t)e.push(this.hydrate(s));return e}}function vg(t){if("string"==typeof t){if("null"===t)return null;if("undefined"===t)return;return t.substring(1,t.length-1)}return t}class bg{static register(t){this.container=t}static deserialize(t,e){const s=this.container.get(zf),i=this.container.get(is),n=new bg(this.container,s,i),r=JSON.parse(t);return n.hydrate(r,e)}constructor(t=ht(Tt),e=ht(zf),s=ht(is)){this.locator=t,this.messageProvider=e,this.parser=s,this.astDeserializer=new mg}hydrate(t,e){switch(t.$TYPE){case Wf.$TYPE:{const e=t,s=new Wf;return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Gf.$TYPE:{const e=t,s=e.pattern,i=this.astDeserializer,n=new Gf(new RegExp(i.hydrate(s.source),s.flags),e.messageKey);return n.tag=i.hydrate(e.tag),n}case Xf.$TYPE:{const e=t,s=new Xf(e.length,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Jf.$TYPE:{const e=t,s=new Jf(e.count,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Yf.$TYPE:{const e=t,s=new Yf(e.isInclusive,{min:e.min??Number.NEGATIVE_INFINITY,max:e.max??Number.POSITIVE_INFINITY});return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Qf.$TYPE:{const e=t,s=this.astDeserializer,i=new Qf("object"!=typeof e.expectedValue?s.hydrate(e.expectedValue):e.expectedValue);return i.messageKey=e.messageKey,i.tag=s.hydrate(e.tag),i}case eg.$TYPE:{const e=t,s=this.astDeserializer;let i=e.name;i="undefined"===i?void 0:s.hydrate(i);let n=e.expression;null!=n?n=s.hydrate(n):void 0!==i?[,n]=cg(i,this.parser):n=void 0;let r=e.displayName;return r="undefined"===r?void 0:s.hydrate(r),new eg(n,i,r)}case ng.$TYPE:{const s=t;return new ng(this.locator,e,this.messageProvider,this.hydrate(s.property,e),s.$rules.map(t=>t.map(t=>this.hydrate(t,e))))}}}hydrateRuleset(t,e){if(!Array.isArray(t))throw qf(4104);return t.map(t=>this.hydrate(t,e))}}class wg{constructor(){this.astDeserializer=new mg,this.l=ht(Tt),this.messageProvider=ht(zf),this.parser=ht(is)}hydrate(t,e){throw qf(99,"hydrate")}hydrateRuleset(t,e){const s=[],i=(t,n=[])=>{for(const[r,o]of t)if(this.isModelPropertyRule(o)){const t=o.rules.map(t=>Object.entries(t).map(([t,e])=>this.hydrateRule(t,e))),i=n.join("."),a=this.hydrateRuleProperty({name:""!==i?`${i}.${r}`:r,displayName:o.displayName});s.push(new ng(this.l,e,this.messageProvider,a,t))}else i(Object.entries(o),[...n,r])};return i(Object.entries(t)),s}hydrateRule(t,e){switch(t){case"required":return this.hydrateRequiredRule(e);case"regex":return this.hydrateRegexRule(e);case"maxLength":return this.hydrateLengthRule({...e,isMax:!0});case"minLength":return this.hydrateLengthRule({...e,isMax:!1});case"maxItems":return this.hydrateSizeRule({...e,isMax:!0});case"minItems":return this.hydrateSizeRule({...e,isMax:!1});case"range":return this.hydrateRangeRule({...e,isInclusive:!0});case"between":return this.hydrateRangeRule({...e,isInclusive:!1});case"equals":return this.hydrateEqualsRule(e);default:throw qf(4105,t)}}setCommonRuleProperties(t,e){const s=t.messageKey;null!=s&&(e.messageKey=s),e.tag=t.tag;const i=t.when;if(i)if("string"==typeof i){const t=this.parser.parse(i,"None");e.canExecute=e=>Kr(t,_r.create({$object:e}),this,null)}else"function"==typeof i&&(e.canExecute=i)}isModelPropertyRule(t){return"object"==typeof t&&"rules"in t}hydrateRequiredRule(t){const e=new Wf;return this.setCommonRuleProperties(t,e),e}hydrateRegexRule(t){const e=t.pattern,s=new Gf(new RegExp(e.source,e.flags),t.messageKey);return s.tag=t.tag,s}hydrateLengthRule(t){const e=new Xf(t.length,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateSizeRule(t){const e=new Jf(t.count,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateRangeRule(t){const e=new Yf(t.isInclusive,{min:t.min,max:t.max});return this.setCommonRuleProperties(t,e),e}hydrateEqualsRule(t){const e=new Qf(t.expectedValue);return this.setCommonRuleProperties(t,e),e}hydrateRuleProperty(t){const e=t.name;if(!e||"string"!=typeof e)throw qf(4106,typeof e);const[s,i]=cg(e,this.parser);return new eg(i,s,t.displayName)}}ic(wg);class yg{constructor(t=void 0,e=void 0,s=void 0,i=void 0,n=void 0){this.object=t,this.propertyName=e,this.rules=s,this.objectTag=i,this.propertyTag=n}}const Cg=kt.createInterface("IValidator");class $g{async validate(t){const e=t.object;let s=t.propertyName;const i=t.propertyTag,n=t.rules??sg.get(e,t.objectTag)??[],r=_r.create({[lg]:e});if(void 0!==s){let t=n.find(t=>t.property.name===s);return null==t&&"string"==typeof s&&s.startsWith("[")&&s.endsWith("]")&&(s=s.replaceAll("][",".").slice(1,-1),t=n.find(t=>t.property.name===s)),await(t?.validate(e,i,r))??[]}return(await Promise.all(n.map(async t=>t.validate(e,i,r)))).flat()}}function kg(){return{ValidatorType:$g,MessageProviderType:pg,CustomMessages:[],HydratorType:wg}}function xg(t){return{optionsProvider:t,register(e){const s=kg();return t(s),e.register(V.instance(tg,s.CustomMessages),V.singleton(Cg,s.ValidatorType),V.singleton(zf,s.MessageProviderType),V.singleton(Lf,s.HydratorType),V.transient(rg,og),bg),e},customize:e=>xg(e??t)}}const Tg=xg(Mt);function Sg(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function Ag(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}"function"==typeof SuppressedError&&SuppressedError;const Rg=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);class Eg{constructor(t,e,s){this.valid=t,this.results=e,this.instruction=s}}class Ig{constructor(t,e){this.result=t,this.targets=e}}class Og{constructor(t,e,s){this.kind=t,this.addedResults=e,this.removedResults=s}}class Pg{constructor(t,e,s,i,n=void 0){this.sourceObserver=t,this.target=e,this.scope=s,this.rules=i,this.propertyInfo=n}}class Mg{constructor(t,e){this.object=t,this.propertyName=e}}function Bg(t,e){let s=e.propertyInfo;if(void 0!==s)return s;const i=e.scope;let n,r=t.ast.expression,o=!0,a="";for(;void 0!==r&&"AccessScope"!==r?.$kind;){let s;switch(r.$kind){case"BindingBehavior":case"ValueConverter":r=r.expression;continue;case"AccessMember":s=r.name;break;case"AccessKeyed":{const n=r.key;o&&(o="PrimitiveLiteral"===n.$kind),s=`[${Kr(n,i,t,e.sourceObserver).toString()}]`;break}default:throw Rg(4205,r.constructor.name)}const n=a.startsWith("[")?"":".";a=0===a.length?s:`${s}${n}${a}`,r=r.object}if(void 0===r)throw Rg(4206,t.ast.expression);return 0===a.length?(a=r.name,n=i.bindingContext):n=Kr(r,i,t,e.sourceObserver),null!=n?(s=new Mg(n,a),o&&(e.propertyInfo=s),s):void 0}const jg=kt.createInterface("IValidationController");class Lg{constructor(){this.bindings=new Map,this.subscribers=new Set,this.results=[],this.validating=!1,this.elements=new WeakMap,this.objects=new Map,this.validator=ht(Cg),this.parser=ht(is),this.platform=ht(Il),this.locator=ht(Tt)}addObject(t,e){this.objects.set(t,e)}removeObject(t){this.objects.delete(t),this.processResultDelta("reset",this.results.filter(e=>e.object===t),[])}addError(t,e,s){let i;void 0!==s&&([i]=cg(s,this.parser));const n=new ug(!1,t,i,e,void 0,void 0,!0);return this.processResultDelta("validate",[],[n]),n}removeError(t){this.results.includes(t)&&this.processResultDelta("reset",[t],[])}addSubscriber(t){this.subscribers.add(t)}removeSubscriber(t){this.subscribers.delete(t)}registerBinding(t,e){this.bindings.set(t,e)}unregisterBinding(t){this.resetBinding(t),this.bindings.delete(t)}async validate(t){const{object:e,objectTag:s}=t??{};let i;i=void 0!==e?[new yg(e,t?.propertyName,t?.rules??this.objects.get(e),s,t?.propertyTag)]:[...Array.from(this.objects.entries()).map(([t,e])=>new yg(t,void 0,e,s)),...Array.from(this.bindings.entries()).reduce((e,[i,n])=>{if(!i.isBound)return e;const r=Bg(i,n);return void 0===r||this.objects.has(r.object)||e.push(new yg(r.object,r.propertyName,n.rules,s,t?.propertyTag)),e},[])],this.validating=!0;const n=po(async()=>{try{const e=await Promise.all(i.map(async t=>this.validator.validate(t))),s=e.reduce((t,e)=>(t.push(...e),t),[]),n=this.getInstructionPredicate(t),r=this.results.filter(n);return this.processResultDelta("validate",r,s),new Eg(void 0===s.find(t=>!t.valid),s,t)}finally{this.validating=!1}});return n.result}reset(t){const e=this.getInstructionPredicate(t),s=this.results.filter(e);this.processResultDelta("reset",s,[])}async validateBinding(t){if(!t.isBound)return;const e=this.bindings.get(t);if(void 0===e)return;const s=Bg(t,e),i=e.rules;if(void 0===s)return;const{object:n,propertyName:r}=s;await this.validate(new yg(n,r,i))}resetBinding(t){const e=this.bindings.get(t);if(void 0===e)return;const s=Bg(t,e);if(void 0===s)return;e.propertyInfo=void 0;const{object:i,propertyName:n}=s;this.reset(new yg(i,n))}async revalidateErrors(){const t=this.results.reduce((t,{isManual:e,object:s,propertyRule:i,rule:n,valid:r})=>{if(!r&&!e&&void 0!==i&&void 0!==s&&void 0!==n){let e=t.get(s);void 0===e&&t.set(s,e=new Map);let r=e.get(i);void 0===r&&e.set(i,r=[]),r.push(n)}return t},new Map),e=[];for(const[s,i]of t)e.push(this.validate(new yg(s,void 0,Array.from(i).map(([{validationRules:t,messageProvider:e,property:s},i])=>new ng(this.locator,t,e,s,[i])))));await Promise.all(e)}getInstructionPredicate(t){if(void 0===t)return()=>!0;const e=t.propertyName,s=t.rules;return i=>!i.isManual&&i.object===t.object&&(void 0===e||i.propertyName===e)&&(void 0===s||s.includes(i.propertyRule)||s.some(t=>void 0===i.propertyRule||t.$rules.flat().every(t=>i.propertyRule.$rules.flat().includes(t))))}getAssociatedElements({object:t,propertyName:e}){const s=[];for(const[i,n]of this.bindings.entries()){const r=Bg(i,n);void 0!==r&&r.object===t&&r.propertyName===e&&s.push(n.target)}return s}processResultDelta(t,e,s){const i=new Og(t,[],[]);s=s.slice(0);const n=this.elements;for(const t of e){const e=n.get(t);n.delete(t),i.removedResults.push(new Ig(t,e));const r=s.findIndex(e=>e.rule===t.rule&&e.object===t.object&&e.propertyName===t.propertyName);if(-1===r)this.results.splice(this.results.indexOf(t),1);else{const e=s.splice(r,1)[0],o=this.getAssociatedElements(e);n.set(e,o),i.addedResults.push(new Ig(e,o)),this.results.splice(this.results.indexOf(t),1,e)}}for(const t of s){const e=this.getAssociatedElements(t);i.addedResults.push(new Ig(t,e)),n.set(t,e),this.results.push(t)}for(const t of this.subscribers)t.handleValidationEvent(i)}}class Ng{constructor(){this.Type=void 0}registerTransformer(t){return!1}construct(t,e){return t.invoke(Lg,e)}}function Dg(t,e){switch(2&t.compareDocumentPosition(e)){case 0:return 0;case 2:return 1;default:return-1}}const Vg={name:"validation-container",shadowOptions:{mode:"open"},hasSlots:!0};let Fg=(()=>{var t;let e,s,i=[],n=[],r=[],o=[];return t=class{constructor(){this.controller=Ag(this,i,void 0),this.errors=(Ag(this,n),Ag(this,r,[])),this.host=(Ag(this,o),ht(Ml)),this.scopedController=ht(Nt(jg))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errors.findIndex(t=>t.result===e);-1!==t&&this.errors.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errors.push(new Ig(e,t))}this.errors.sort((t,e)=>t.targets[0]===e.targets[0]?0:Dg(t.targets[0],e.targets[0]))}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}},(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[Jh],s=[Jh],Sg(null,null,e,{kind:"field",name:"controller",static:!1,private:!1,access:{has:t=>"controller"in t,get:t=>t.controller,set:(t,e)=>{t.controller=e}},metadata:a},i,n),Sg(null,null,s,{kind:"field",name:"errors",static:!1,private:!1,access:{has:t=>"errors"in t,get:t=>t.errors,set:(t,e)=>{t.errors=e}},metadata:a},r,o),a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t})();class _g{constructor(){this.errors=[],this.errorsInternal=[],this.host=ht(Ml),this.scopedController=ht(Nt(jg))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errorsInternal.findIndex(t=>t.result===e);-1!==t&&this.errorsInternal.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errorsInternal.push(new Ig(e,t))}this.errorsInternal.sort((t,e)=>t.targets[0]===e.targets[0]?0:Dg(t.targets[0],e.targets[0])),this.errors=this.errorsInternal}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}}var qg;Ul.define({name:"validation-errors",bindables:{controller:{},errors:{primary:!0,mode:Li.twoWay}}},_g),function(t){t.manual="manual",t.blur="blur",t.focusout="focusout",t.change="change",t.changeOrBlur="changeOrBlur",t.changeOrFocusout="changeOrFocusout"}(qg||(qg={}));const Ug=kt.createInterface("IDefaultTrigger"),zg=new WeakMap,Kg=new WeakMap;class Hg{constructor(){this.p=ht(Il),this.oL=ht(Fa)}bind(t,e){if(!(e instanceof fc))throw Rg(4200);let s=zg.get(e);null==s&&zg.set(e,s=new Wg(this.p,this.oL,e.get(Ug),e,e.get(xt)));let i=Kg.get(e);null==i&&Kg.set(e,i=new Gg(s,e,e.get(nc))),s.start(t),e.useTargetSubscriber(i)}unbind(t,e){zg.get(e)?.stop()}}dl.define("validate",Hg);class Wg{constructor(t,e,s,i,n){this.isChangeTrigger=!1,this.isDirty=!1,this.validatedOnce=!1,this.triggerEvent=null,this.t=!1,this.propertyBinding=i,this.target=i.target,this.defaultTrigger=s,this.p=t,this.oL=e,this.l=n,this.i=new Jg("handleSourceChange",this,e,n),this.h=new Jg("handleTriggerChange",this,e,n),this.u=new Jg("handleControllerChange",this,e,n),this.V=new Jg("handleRulesChange",this,e,n),n.has(jg,!0)&&(this.scopedController=n.get(jg))}C(){this.isDirty=!0;const t=this.triggerEvent;this.isChangeTrigger&&(null===t||null!==t&&this.validatedOnce)&&this.validateBinding()}handleEvent(t){(!this.isChangeTrigger||this.isChangeTrigger&&this.isDirty)&&this.validateBinding()}start(t){this.scope=t,this.target=this.B();const e=this._();this.R(e)||null==this.bindingInfo||(this.controller?.registerBinding(this.propertyBinding,this.bindingInfo),this.controller?.addSubscriber(this))}stop(){this.t=!1,this.scope=void 0;const t=this.triggerEvent;null!==t&&this.target?.removeEventListener(t,this),this.controller?.resetBinding(this.propertyBinding),this.controller?.unregisterBinding(this.propertyBinding),this.controller?.removeSubscriber(this)}handleTriggerChange(t,e){this.R(new Xg(void 0,this.T(t),void 0))}handleControllerChange(t,e){this.R(new Xg(this.I(t),void 0,void 0))}handleRulesChange(t,e){this.R(new Xg(void 0,void 0,this.P(t)))}handleSourceChange(t,e){this.source!==t&&(this.source=t,this.bindingInfo.propertyInfo=void 0)}handleValidationEvent(t){if(this.validatedOnce||!this.isChangeTrigger)return;if(null===this.triggerEvent)return;const e=this.bindingInfo.propertyInfo?.propertyName;void 0!==e&&(this.validatedOnce=void 0!==t.addedResults.find(t=>t.result.propertyName===e))}_(){const t=this.scope;let e,s,i,n=this.propertyBinding.ast;for(;"validate"!==n.name&&void 0!==n;)n=n.expression;const r=n.args;for(let n=0,o=r.length;n<o;n++){const o=r[n];switch(n){case 0:s=this.T(Kr(o,t,this,this.h));break;case 1:i=this.I(Kr(o,t,this,this.u));break;case 2:e=this.P(Kr(o,t,this,this.V));break;default:throw Rg(4201,n+1,Kr(o,t,this,null))}}return new Xg(this.I(i),this.T(s),e)}validateBinding(){this.t||(this.t=!0,po(()=>(this.t=!1,this.controller.validateBinding(this.propertyBinding))))}R(t){const e=t.trigger??this.trigger,s=t.controller??this.controller,i=t.rules;if(this.trigger!==e){let t=this.triggerEvent;null!==t&&this.target.removeEventListener(t,this),this.validatedOnce=!1,this.isDirty=!1,this.trigger=e,this.isChangeTrigger=e===qg.change||e===qg.changeOrBlur||e===qg.changeOrFocusout,t=this.triggerEvent=this.A(this.trigger),null!==t&&this.target.addEventListener(t,this)}return(this.controller!==s||void 0!==i)&&(this.controller?.removeSubscriber(this),this.controller?.unregisterBinding(this.propertyBinding),this.controller=s,s.registerBinding(this.propertyBinding,this.M(i)),s.addSubscriber(this),!0)}T(t){if(null==t)t=this.defaultTrigger;else if(!Object.values(qg).includes(t))throw Rg(4202,t);return t}I(t){if(null==t)t=this.scopedController;else if(!(t instanceof Lg))throw Rg(4203,t);return t}P(t){if(Array.isArray(t)&&t.every(t=>t instanceof ng))return t}B(){const t=this.propertyBinding.target;if(t instanceof this.p.Node)return t;{const e=t?.$controller;if(void 0===e)throw Rg(4204);return e.host}}A(t){let e=null;switch(t){case qg.blur:case qg.changeOrBlur:e="blur";break;case qg.focusout:case qg.changeOrFocusout:e="focusout"}return e}M(t){return this.bindingInfo=new Pg(this.i,this.target,this.scope,t)}}Io(Wg,null),Gr(Wg);class Gg extends ec{constructor(t,e,s){super(e,s),this.vs=t}handleChange(t,e){super.handleChange(t,e),this.vs.C()}}class Xg{constructor(t,e,s){this.controller=t,this.trigger=e,this.rules=s}}class Jg{constructor(t,e,s,i){this.key=t,this.binding=e,this.oL=s,this.l=i}handleChange(t,e){this.binding[this.key](t,e)}}function Yg(t){return{optionsProvider:t,register(e){const s={...kg(),ValidationControllerFactoryType:Ng,DefaultTrigger:qg.focusout,UseSubscriberCustomAttribute:!0,SubscriberCustomElementTemplate:"\n<slot></slot>\n<slot name='secondary'>\n  <span repeat.for=\"error of errors\">\n    ${error.result.message}\n  </span>\n</slot>\n"};t(s),e.registerFactory(jg,new s.ValidationControllerFactoryType),e.register(Tg.customize(t=>{for(const e of Object.keys(t))e in s&&(t[e]=s[e])}),V.instance(Ug,s.DefaultTrigger),Hg),s.UseSubscriberCustomAttribute&&e.register(_g);const i=s.SubscriberCustomElementTemplate;return i&&e.register(Xd.define({...Vg,template:i},Fg)),e},customize:e=>Yg(e??t)}}Io(Jg,null),Gr(Jg);const Qg=Yg(Mt);function Zg(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function tm(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const em="import-config-columns",sm='<template>\n<div class="row">\n    <div class="row mt-3">\n        <div class="col-sm-12">\n            <label\n                    class="form-label"\n                    for="search-input"\n                    id="search-label">Rechercher une colonne par nom</label>\n            <div class="col  flex justify-content-between">\n                <input\n                        class="form-control"\n                        id="search-input"\n                        type="text"\n                        value.bind="searchText"\n                        aria-describedby="search-label"\n                />\n                <button type="button" click.trigger="search($event)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-r-lg border border-blue-600 flex items-center">\n                    <svg fill="#ffff" height="24px" width="24px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" stroke="#ffff">\n<g id="SVGRepo_bgCarrier" stroke-width="0"/>\n<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>\n<g id="SVGRepo_iconCarrier"> <g> <g> <path d="M281.1,0c-127.318,0-230.9,103.582-230.9,230.9c0,45.12,13.019,87.25,35.483,122.853l-70.654,70.654 c-20.039,20.039-20.039,52.527,0,72.564c20.039,20.039,52.527,20.039,72.564,0l70.654-70.654 c35.605,22.464,77.735,35.483,122.853,35.483c127.318,0,230.9-103.582,230.9-230.9S408.42,0,281.1,0z M281.1,410.489 c-99.025,0-179.589-80.564-179.589-179.589S182.074,51.311,281.1,51.311S460.689,131.875,460.689,230.9 S380.127,410.489,281.1,410.489z"/> </g> </g> </g>\n</svg>\n                </button>\n            </div>\n\n        </div>\n    </div>\n    <div class="row mt-3" if.bind="pagination.pageCount > 0">\n        <div class="col-sm-12">\n            <p>${\'Page : \'+(pagination.page + 1)+\' / \'+pagination.pageCount}</p>\n        </div>\n        <nav class="col-sm-12" aria-label="Pagination">\n            <ul class="pagination">\n                <li class="page-item">\n                    <button type="button" class="bg-success page-link" click.trigger="changePage($event, pagination.page - 1)" disabled.bind="pagination.page <= 0">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7071 4.29289C12.0976 4.68342 12.0976 5.31658 11.7071 5.70711L6.41421 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H6.41421L11.7071 18.2929C12.0976 18.6834 12.0976 19.3166 11.7071 19.7071C11.3166 20.0976 10.6834 20.0976 10.2929 19.7071L3.29289 12.7071C3.10536 12.5196 3 12.2652 3 12C3 11.7348 3.10536 11.4804 3.29289 11.2929L10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289Z" fill="#ffffff"/>\n                        </svg>\n                    </button>\n                </li>\n                <li class="page-item"><p class="page-link">${pagination.page + 1}</p></li>\n                <li class="page-item">\n                    <button type="button" class="bg-success  page-link"  click.trigger="changePage($event, pagination.page + 1)"  disabled.bind="pagination.page >= (pagination.pageCount-1)">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.2929 4.29289C12.6834 3.90237 13.3166 3.90237 13.7071 4.29289L20.7071 11.2929C21.0976 11.6834 21.0976 12.3166 20.7071 12.7071L13.7071 19.7071C13.3166 20.0976 12.6834 20.0976 12.2929 19.7071C11.9024 19.3166 11.9024 18.6834 12.2929 18.2929L17.5858 13H4C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11H17.5858L12.2929 5.70711C11.9024 5.31658 11.9024 4.68342 12.2929 4.29289Z" fill="#ffffff"/>\n                        </svg>\n                    </button>\n                </li>\n            </ul>\n        </nav>\n    </div>\n    <div class="card mt-3" repeat.for="column of columns"  id.bind="column.id">\n        <div class="card-header  row align-items-center">\n            <div class="col-sm-8" innerHTML.bind="\'Colonne-\'+((column.order) ? column.order + 1 : \'en attente\')"></div>\n            <div class="col-sm-4">\n                <div class="row align-items-center">\n                    <div class="col  justify-content-end">\n                        <button type="button" class="btn btn-primary  p-0" click.trigger="move($event, $index, \'up\')" title="Monter" value.bind="$index" disabled.bind="$index == 0">\n                            <svg width="24px"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M15 11L12 8M12 8L9 11M12 8V16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="col  justify-content-end">\n                        <button type="button" class="btn btn-primary  p-0" title="Descendre" click.trigger="move($event, $index, \'down\')" value.bind="$index" disabled.bind="$index == (columns.length - 1)">\n                            <svg width="24px"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M9 13L12 16M12 16L15 13M12 16V8M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="col  justify-content-end ">\n                        <button type="button" class="btn btn-danger  p-0" title="Supprimer" click.trigger="delete($event, column.id, $index)" value.bind="$index">\n                            <svg width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="card-body">\n            <div class="row">\n                <input\n                        id.bind="\'hidden-id-\'+column.id"\n                        value.bind="column.id"\n                        type="hidden"\n                        name.bind="\'ImportConfig[tmpColumns][\'+$index+\'][id]\'"\n                />\n                <input\n                        id.bind="\'hidden-order-\'+column.id"\n                        value.bind="column.order"\n                        type="hidden"\n                        name.bind="\'ImportConfig[tmpColumns][\'+$index+\'][order]\'"\n                />\n                <div class="col-sm--3 form-group p-2" validation-errors.from-view="column.sourceErrors">\n                    <label class="form-label" for.bind="\'source-\'+column.id" id="labelSource">Colonne Source</label>\n                    <select\n                            class="form-control"\n                            id.bind="\'source-\'+column.id"\n                            value.bind="column.source & validate"\n                            name.bind="\'ImportConfig[tmpColumns][\'+$index+\'][source]\'"\n                            class.bind="column.sourceErrors.length ? \'error\' : \'\'"\n                            aria-describedby="labelSource"\n                            aria-required="true"\n                            aria-invalid.bind="column.sourceErrors.length ? \'true\' : \'false\'"\n                            required\n                    >\n                        <option value="">Sélectionner une colonne source</option>\n                        <option repeat.for="tableColumn of tableColumns"  value.bind="tableColumn.source">\n                            ${tableColumn.target}\n                        </option>\n                    </select>\n                    <p class="error-message" repeat.for="error of column.sourceErrors" id.bind="\'column.sourceErrors\'+column.id">${error.result.message}</p>\n\n                </div>\n                <div class="col-sm--3 form-group p-2" validation-errors.from-view="column.targetErrors">\n                    <label class="form-label" for.bind="\'target-\'+column.id" id="labelTarget">Colonne cible</label>\n                    <input\n                        class="form-control"\n                        id.bind="\'target-\'+column.id"\n                        type="text"\n                        name.bind="\'ImportConfig[tmpColumns][\'+$index+\'][target]\'"\n                        value.bind="column.target & validate"\n                        class.bind="column.targetErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labelTarget"\n                        aria-required="true"\n                        aria-invalid.bind="column.targetErrors.length ? \'true\' : \'false\'"\n                        required\n                    />\n                    <p class="error-message" repeat.for="error of column.targetErrors" id.bind="\'column.targetErrors\'+column.id">${error.result.message}</p>\n\n                </div>\n                <div class="col-sm--3 form-group p-2" validation-errors.from-view="column.typeErrors">\n                    <label class="form-label"  for.bind="\'type-\'+column.id" id="labelType">Type de données</label>\n                    <select\n                        class="form-control"\n                        id.bind="\'type-\'+column.id"\n                        value.bind="column.type & validate"\n                        name.bind="\'ImportConfig[tmpColumns][\'+$index+\'][type]\'"\n                        class.bind="column.typeErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labelType"\n                        aria-required="true"\n                        aria-invalid.bind="column.typeErrors.length ? \'true\' : \'false\'"\n                        required\n                    >\n                        <option value="">Sélectionner un type de donnée</option>\n                        <option value="pk">pk</option>\n                        <option value="upk">upk</option>\n                        <option value="bigpk">bigpk</option>\n                        <option value="ubigpk">ubigpk</option>\n                        <option value="char">char</option>\n                        <option value="string">string</option>\n                        <option value="text">text</option>\n                        <option value="tinyint">tinyint</option>\n                        <option value="smallint">smallint</option>\n                        <option value="integer">integer</option>\n                        <option value="bigint">bigint</option>\n                        <option value="float">float</option>\n                        <option value="double">double</option>\n                        <option value="decimal">decimal</option>\n                        <option value="datetime">datetime</option>\n                        <option value="timestamp">timestamp</option>\n                        <option value="time">time</option>\n                        <option value="date">date</option>\n                        <option value="binary">binary</option>\n                        <option value="boolean">boolean</option>\n                        <option value="money">money</option>\n                        <option value="json">json</option>\n                    </select>\n                    <p class="error-message" repeat.for="error of column.typeErrors" id.bind="\'column.typeErrors\'+column.id">${error.result.message}</p>\n\n                </div>\n                <div class="col-sm--3 form-group p-2" validation-errors.from-view="column.defaultErrors">\n                    <label class="form-label" for.bind="\'default-\'+column.id" id="labelDefault">Valeur par défaut</label>\n                    <input\n                        class="form-control"\n                        id.bind="\'default-\'+column.id"\n                        type="text"\n                        name.bind="\'ImportConfig[tmpColumns][\'+$index+\'][default]\'"\n                        value.bind="column.default & validate"\n                        class.bind="column.defaultErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labelDefault"\n                        aria-required="true"\n                        aria-invalid.bind="column.defaultErrors.length ? \'true\' : \'false\'"\n                    />\n                    <p class="error-message" repeat.for="error of column.defaultErrors" id.bind="\'column.defaultErrors\'+column.id">${error.result.message}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row mt-3 items-end">\n        <div class="col-sm-2">\n            <button type="button" class="btn btn-outline-success" title="Ajouter" click.trigger="add($event)">\n                <svg width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M9 12H15" stroke="#198754" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                    <path d="M12 9L12 15" stroke="#198754" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                    <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#198754" stroke-width="2"/>\n                </svg>\n                <span>Ajouter</span>\n            </button>\n        </div>\n    </div>\n</div>\n\n</template>',im=sm,nm=[],rm={};let om;function am(t){om||(om=Xd.define({name:em,template:sm,dependencies:nm,bindables:rm})),t.register(om)}class hm{constructor(){this.cache=new Map,this.delete=t=>this.cache.delete(t),this.has=t=>this.cache.has(t),this.set=(t,e)=>this.cache.set(t,e),this.get=t=>this.cache.get(t),this.clear=()=>this.cache.clear()}}const lm=kt.createInterface(t=>t.singleton(hm));class cm{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null,this.c=ht(xt)}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:um})}withRetry(t){const e=this.c.invoke(Em,[t]);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function um(t){if(!t.ok)throw t;return t}const dm=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),pm=/^([a-z][a-z0-9+\-.]*:)?\/\//i,fm=kt.createInterface("fetch",t=>{if("function"!=typeof fetch)throw dm(5e3);return t.instance(fetch)}),gm=kt.createInterface("IHttpClient",t=>t.aliasTo(mm));class mm{constructor(){this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.t=[],this.i=null,this.h=ht(Dt(cm)),this.u=ht(fm)}get interceptors(){return this.t.slice(0)}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw dm(5002,typeof t);{e=this.h(),e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.t,e.dispatcher=this.i;const s=t(e);if(null!=s){if("object"!=typeof s)throw dm(5001,typeof s);e=s}}}const s=e.defaults;if(s?.headers instanceof Headers)throw dm(5003);const i=e.interceptors;if(i?.length>0){if(i.filter(t=>t instanceof Em).length>1)throw dm(5004);const t=i.findIndex(t=>t instanceof Em);if(t>=0&&t!==i.length-1)throw dm(5005)}return this.baseUrl=e.baseUrl,this.defaults=s,this.t=e.interceptors??[],this.i=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.C();let s=this.buildRequest(t,e);return this.processRequest(s,this.t).then(t=>{let e;if(t instanceof Response)e=Promise.resolve(t);else{if(!(t instanceof Request))throw dm(5006,t);s=t,e=this.u.call(void 0,s)}return this.processResponse(e,this.t,s)}).then(t=>t instanceof Request?this.fetch(t):t).then(t=>(this.R(),t),t=>{throw this.R(),t})}buildRequest(t,e){const s=this.defaults??{};let i,n,r;const o=function(t){const e={},s=t??{};for(const t of Object.keys(s))e[t]="function"==typeof s[t]?s[t]():s[t];return e}(s.headers);if(t instanceof Request)i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(function(t,e){return pm.test(e)?e:(t??"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=e??{};for(const e of Object.keys(s))t.has(e)||t.set(e,s[e])}(i.headers,o),n instanceof Blob&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.I(t,e,s,"POST")}put(t,e,s){return this.I(t,e,s,"PUT")}patch(t,e,s){return this.I(t,e,s,"PATCH")}delete(t,e,s){return this.I(t,e,s,"DELETE")}dispose(){this.t.forEach(t=>t.dispose?.()),this.t.length=0,this.i=null}C(){this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!=this.i&&wm(this.i,ym.started)}R(){this.isRequesting=!! --this.activeRequestCount,this.isRequesting||null==this.i||wm(this.i,ym.drained)}processRequest(t,e){return this.B(t,e,"request","requestError",Request,this)}processResponse(t,e,s){return this.B(t,e,"response","responseError",Response,s,this)}B(t,e,s,i,n,...r){return(e??[]).reduce((t,e)=>{const o=e[s],a=e[i];return t.then(o?t=>t instanceof n?o.call(e,t,...r):t:vm,a?t=>a.call(e,t,...r):bm)},Promise.resolve(t))}I(t,e,s,i){return s||(s={}),s.method=i,null!=e&&(s.body=e),this.fetch(t,s)}}function vm(t){return t}function bm(t){throw t}function wm(t,e){const s=new t.ownerDocument.defaultView.CustomEvent(e,{bubbles:!0,cancelable:!0});setTimeout(()=>{t.dispatchEvent(s)},1)}const ym=Object.freeze({started:"aurelia-fetch-client-request-started",drained:"aurelia-fetch-client-requests-drained"}),Cm=kt.createInterface(t=>t.singleton(km)),$m=Object.freeze({Set:"au:fetch:cache:set",Get:"au:fetch:cache:get",Clear:"au:fetch:cache:clear",Reset:"au:fetch:cache:reset",Dispose:"au:fetch:cache:dispose",CacheHit:"au:fetch:cache:hit",CacheMiss:"au:fetch:cache:miss",CacheStale:"au:fetch:cache:stale",CacheStaleRefreshed:"au:fetch:cache:stale:refreshed",CacheExpired:"au:fetch:cache:expired",CacheBackgroundRefreshed:"au:fetch:cache:background:refreshed",CacheBackgroundRefreshing:"au:fetch:cache:background:refreshing",CacheBackgroundStopped:"au:fetch:cache:background:stopped"});class km{constructor(){this.storage=ht(lm),this.p=ht(Bt),this.ea=ht(le),this.q=ht(gm),this.H=[],this.O=-1,this.j=[],this.T=new Map}subscribe(t,e){const s=this.ea.subscribe(t,e);return this.H.push(s),s}subscribeOnce(t,e){const s=this.ea.subscribeOnce(t,e);return this.H.push(s),s}setStaleTimer(t,e,s){const i=this.p.setTimeout(async()=>{this.delete(t),await this.q.get(s);const e=this.getItem(t);this.ea.publish($m.CacheStaleRefreshed,{key:t,value:e}),this.N(i)},e);this.j.push(i)}startBackgroundRefresh(t){!t||this.O>-1||(this.O=this.p.setInterval(()=>{this.ea.publish($m.CacheBackgroundRefreshing),this.T.forEach((t,e)=>{this.delete(e),this.q.get(t).then(()=>{const t=this.getItem(e);this.ea.publish($m.CacheBackgroundRefreshed,{key:e,value:t})})})},t))}stopBackgroundRefresh(){this.p.clearInterval(this.O),this.O=-1,this.ea.publish($m.CacheBackgroundStopped)}set(t,e,s,i){const n={data:e,...s};this.setItem(t,n,i)}get(t){return this.getItem(t)?.data}setItem(t,e,s){e.lastCached=Date.now(),this.storage.set(t,e),this.T.set(t,s),this.ea.publish($m.Set,{key:t,value:e})}getItem(t){if(!this.storage.has(t))return void this.ea.publish($m.CacheMiss,{key:t});const e=this.storage.get(t);if(!e?.staleTime||!e?.lastCached)return this.ea.publish($m.CacheHit,{key:t,value:e}),e;const s=Date.now();if(s>e.lastCached+(e.staleTime??0))this.ea.publish($m.CacheStale,{key:t,value:e});else{if(!(s>e.lastCached+(e.cacheTime??0)))return this.ea.publish($m.CacheHit,{key:t,value:e}),e;this.ea.publish($m.CacheExpired,{key:t,value:e})}}delete(t){this.storage.delete(t),this.ea.publish($m.Clear,{key:t})}clear(){this.storage.clear(),this.T.clear(),this.ea.publish($m.Reset),this.stopBackgroundRefresh(),this.j.forEach(t=>{this.p.clearTimeout(t)}),this.j.length=0}dispose(){this.clear(),this.H.forEach(t=>t.dispose()),this.ea.publish($m.Dispose)}N(t){this.p.clearTimeout(t);const e=this.j.indexOf(t);e>-1&&this.j.splice(e,1)}}const xm={cacheTime:3e5,staleTime:0,refreshStaleImmediate:!1,refreshInterval:0};class Tm{constructor(t){this.P=ht(Cm),this.cf={...xm,...t??{}}}request(t){if(this.P.startBackgroundRefresh(this.cf.refreshInterval),"GET"!==t.method)return t;const e=this.P.get(this.key(t));return this.mark(e)??t}response(t,e){if(!e)return t;if(t.headers.has(Tm.cacheHeader))return t;const s=this.key(e);return this.P.setItem(s,{data:t,...this.cf},e),this.cf?.refreshStaleImmediate&&this.cf.staleTime>0&&this.P.setStaleTimer(s,this.cf.staleTime,e),t}dispose(){this.P.stopBackgroundRefresh()}key(t){return`${Tm.prefix}${t.url}`}mark(t){return t?.headers.set(Tm.cacheHeader,"hit"),t}}Tm.prefix="au:interceptor:",Tm.cacheHeader="x-au-fetch-cache";class Sm{constructor(){this.cache=ht(Bt).globalThis.indexedDB,this.getStore=()=>this.database.transaction(Sm.cacheName,"readwrite").objectStore(Sm.cacheName),this.delete=t=>{this.getStore().delete(t)},this.has=t=>this.getStore().count(t).result>0,this.set=(t,e)=>this.getStore().put(e,t),this.get=t=>this.getStore().get(t).result,this.clear=()=>{const t=this.getStore();t.getAllKeys().result.forEach(e=>{t.delete(e)})},this.database=this.cache.open(Sm.cacheName).result}}Sm.cacheName="au-cache";const Am=Object.freeze({fixed:0,incremental:1,exponential:2,random:3}),Rm={maxRetries:3,interval:1e3,strategy:Am.fixed};class Em{constructor(t){if(this.p=ht(Bt),this.retryConfig={...Rm,...t??{}},this.retryConfig.strategy===Am.exponential&&this.retryConfig.interval<=1e3)throw dm(5007,this.retryConfig.interval)}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return delete e.retryConfig,t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then(()=>{if(i.counter<i.maxRetries){const r=null==i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then(r=>{if(r){i.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case Am.fixed:return Im[Am.fixed](e);case Am.incremental:return Im[Am.incremental](r,e);case Am.exponential:return Im[Am.exponential](r,e);case Am.random:return Im[Am.random](r,e,i,n);default:throw dm(5008,s)}}(i);return new Promise(e=>this.p.setTimeout(e,isNaN(t)?0:t)).then(()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t}).then(t=>{const e={...t,retryConfig:i};return s.fetch(e)})}throw delete e.retryConfig,t})}throw delete e.retryConfig,t})}}const Im=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s];class Om{constructor(){}getApiBaseUrl(){return this.apiBaseUrl||(this.apiBaseUrl=window.apiBaseUrl?window.apiBaseUrl:"fractal-cms"),this.apiBaseUrl}}const Pm=kt.createInterface("IHttpService",t=>t.singleton(Mm));class Mm{constructor(t=ht(gm),e=ht(Om),s=ht(Yt).scopeTo("HttpService")){this.httpClient=t,this.configService=e,this.logger=s,this.logger.trace("constructor"),this.httpClient.configure(t=>(t.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}).withInterceptor({request:t=>(console.log(`Requesting ${t.method} ${t.url}`),t),response:t=>(console.log(`Received ${t.status} ${t.url}`),t)}).rejectErrorResponses(),t))}delete(t,e=null){return null==e&&(e={headers:{Accept:"application/json","Content-Type":"text/plain"}}),e.method="DELETE",this.fetch(t,null,e)}getJson(t,e=null,s=null){return null===e&&(e={headers:{Accept:"application/json","Content-Type":"application/json"}}),e.method||(e.method="GET"),this.fetch(t,e,s)}fetchJson(t,e=null,s=null){return null===e&&(e={headers:{Accept:"application/json","Content-Type":"application/json"}}),e.method||(e.method="POST"),this.fetch(t,e,s)}fetch(t,e=null,s=null){return null==e&&(e={headers:{Accept:"*/*"}}),null!=s&&(e.body=JSON.stringify(s)),this.httpClient.fetch(t,e).then(t=>{const e=t.headers,s=t.status,i=t.statusText,n=e.get("Content-Type");let r=t;return r=-1!==n.indexOf("json")?t.json():-1!==n.indexOf("text")?t.text():t.blob(),Promise.all([s,i,e,r])}).then(([t,e,s,i])=>{const n={status:t,statusText:e,headers:s,data:i,extras:{}};return n.extras=this.buildExtrasHeaders(s),n})}buildExtrasHeaders(t){const e={pagination:{}},s={page:-1,pageCount:-1,pageSize:-1,totalCount:-1};return t.forEach((t,e)=>{switch(e.trim().toLowerCase()){case"x-pagination-current-page":s.page=parseInt(t);break;case"x-pagination-total-page":s.pageCount=parseInt(t);break;case"x-pagination-per-page":s.pageSize=parseInt(t);break;case"x-pagination-total-entries":s.totalCount=parseInt(t)}}),s.page>-1&&s.pageCount>-1&&s.pageSize>-1&&s.totalCount>-1&&(e.pagination=s),e}}class Bm{constructor(t=ht(gm),e=ht(Om),s=ht(Pm),i=ht(Yt).scopeTo("ApiServices")){this.httpClient=t,this.configService=e,this.httpService=s,this.logger=i,this.logger.trace("constructor")}get(t){return this.httpService.getJson(t,null,null).then(t=>t.data)}post(t,e){return this.httpService.fetchJson(t,null,e).then(t=>t.data)}delete(t){return this.httpService.delete(t,null).then(t=>t.data)}getColumns(t){return this.httpService.getJson(t,null,null).then(t=>{var e;return[t.data,null===(e=t.extras)||void 0===e?void 0:e.pagination]})}getTransformer(t){return this.httpService.getJson(t,null,null).then(t=>t.data)}postColumns(t,e){return this.httpService.fetchJson(t,null,e).then(t=>t.data)}getTableColumns(t){return this.httpService.getJson(t,null,null).then(t=>t.data)}}var jm;!function(t){t.IMPORT_CONFIG_JSON_GET="/api/import-config/{id}",t.IMPORT_CONFIG_JSON_GET_COLUMNS="/api/import-config/{id}/get-columns",t.IMPORT_CONFIG_JSON_POST_COLUMNS="/api/import-config/{id}/post-columns",t.IMPORT_CONFIG_JSON_DELETE_COLUMN="/api/import-config/{id}/columns/{columnId}/delete",t.DB_GET_TABLE_COLUMNS="/api/import-config/{id}/table-columns",t.DB_GET_TABLES="/api/db/tables",t.GET_TRANSFORMERS="/api/import-config/transformers"}(jm||(jm={}));class Lm{constructor(t=ht(Yt),e=ht(rg)){this.logger=t,this.validationRules=e,this.logger=t.scopeTo("Column"),this.logger.trace("constructor"),this.initValidationRules(this.validationRules)}toJson(){return{id:this.id,source:this.source,target:this.target,type:this.type,order:this.order,default:this.default,transform:this.transform}}initValidationRules(t){this.logger.trace("initValidationRules"),t.on(this).ensure("source").required().withMessage("Le source est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)).withMessage("La source doit être une string").ensure("target").required().withMessage("Le target est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)).withMessage("La Cible doit être une string").ensure("type").required().withMessage("Le type est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)).withMessage("Le type doit être une string").ensure("default").then().satisfies((t,e)=>!t||"string"==typeof t).withMessage("Le default doit être une string")}}let Nm=(()=>{let t,s,i,n=[Od(Object.assign(Object.assign({},e),{name:"fractal-cms-import-columns"}))],r=[],o=[],a=[];return s=class{constructor(t=ht(Yt),e=ht(le),s=ht(Il),i=ht(Ml),n=ht(Ut(jg)),r=ht(rg),h=ht(Om),l=ht(Bm)){this.logger=t,this.ea=e,this.platform=s,this.element=i,this.validationController=n,this.validationRules=r,this.configService=h,this.apiServices=l,this.id=tm(this,o,void 0),this.model=tm(this,a),this.logger=t.scopeTo("ImportConfigColumns"),this.logger.trace("constructor"),this.model={},this.columns=[],this.tmpConfigColumns=[],this.tableColumns=[],this.transformers=[],this.pagination={}}binding(){this.logger.trace("binding",this.id)}attached(){this.logger.trace("attached",this.id);const t=this.configService.getApiBaseUrl()+jm.IMPORT_CONFIG_JSON_GET.replace("{id}",this.id),e=this.configService.getApiBaseUrl()+jm.GET_TRANSFORMERS,s=this.configService.getApiBaseUrl()+jm.DB_GET_TABLE_COLUMNS.replace("{id}",this.id),i=this.apiServices.get(t),n=this.apiServices.getTransformer(e),r=this.apiServices.getTableColumns(s);Promise.all([i,n,r]).then(t=>{this.model=t[0],this.transformers=t[1],this.tableColumns=t[2];const e=this.prepareGetUrl(this.id);this.getColumns(e)})}search(t){this.logger.trace("search",this.searchText),t.preventDefault();let e=this.prepareGetUrl(this.id,null,this.searchText);this.getColumns(e)}changePage(t,e){this.logger.trace("changePage",e),this.pagination.page=e,t.preventDefault();let s=this.prepareGetUrl(this.id,e,this.searchText);this.getColumns(s)}getColumns(t){const e=this.apiServices.getColumns(t);Promise.all([e]).then(t=>{this.tmpConfigColumns=t[0][0],this.pagination=t[0][1],this.loadColumns()})}move(t,e,s){this.logger.trace("move",e,s),t.preventDefault();const i="up"==s?e-1:e+1;if(this.columns[e]&&this.columns[i]){const t=this.columns[e].order;this.columns[e].order=this.columns[i].order,this.columns[i].order=t}const n=this.columns.splice(e,1);this.columns.splice(i,0,n[0]),this.platform.taskQueue.queueTask(()=>{this.save()},{delay:50})}delete(t,e,s){if(this.logger.trace("delete",e),t.preventDefault(),e){let t=this.configService.getApiBaseUrl()+jm.IMPORT_CONFIG_JSON_DELETE_COLUMN.replace("{id}",this.id);t=t.replace("{columnId}",e);const s=this.apiServices.delete(t);Promise.all([s]).then(t=>{this.logger.trace("delete : OK",e)})}this.remove(s)}remove(t){this.logger.trace("remove");const e=this.columns.splice(t,1);this.validationController.removeObject(e[0])}add(t){this.logger.trace("add"),t.preventDefault();const e=new Lm(this.logger,this.validationRules);Object.assign(e,{}),this.validationController.addObject(e),this.columns.push(e),this.platform.taskQueue.queueTask(()=>{this.save()},{delay:50})}save(){this.logger.trace("save"),this.validationController.validate().then(t=>{if(t.valid){this.logger.trace("save: success");const t=this.configService.getApiBaseUrl()+jm.IMPORT_CONFIG_JSON_POST_COLUMNS.replace("{id}",this.id),e=this.columns.map((t,e)=>t.toJson());return this.apiServices.post(t,e).then(t=>{this.logger.trace("save")})}this.logger.trace("onSubmit:error",t.results)}).catch(t=>{this.logger.trace("save:error",t)})}loadColumns(){this.tmpConfigColumns&&(this.columns=[],this.logger.trace("loadColumns",this.tmpConfigColumns),this.tmpConfigColumns.forEach((t,e)=>{let s=Object.assign(t,{});const i=new Lm(this.logger,this.validationRules);Object.assign(i,s),this.validationController.addObject(i),this.columns.push(i)}))}prepareGetUrl(t,e=null,s=null){this.logger.trace("prepareGetUrl");let i=this.configService.getApiBaseUrl()+jm.IMPORT_CONFIG_JSON_GET_COLUMNS.replace("{id}",t),n={};e&&(n.page=e),s&&(n.search=s);const r=new URLSearchParams(n).toString();return r&&(i+="?"+r),i}},function(t,e,s){"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}(s,"ImportConfigColumns"),(()=>{const e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[Jh],Zg(null,null,i,{kind:"field",name:"id",static:!1,private:!1,access:{has:t=>"id"in t,get:t=>t.id,set:(t,e)=>{t.id=e}},metadata:e},o,a),Zg(null,t={value:s},n,{kind:"class",name:s.name,metadata:e},null,r),s=t.value,e&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e}),tm(s,r)})(),s})();void 0!==webpackBaseUrl&&(t.p=webpackBaseUrl);const Dm=document.querySelector("body");jf.register(s).register(Qg.customize(t=>{t.DefaultTrigger=qg.blur})).enhance({host:Dm,component:class{constructor(t=ht(Yt)){this.logger=t,this.logger=t.scopeTo("ImportExportApp")}binding(){this.logger.trace("binding")}attaching(){this.logger.trace("Attaching")}}})})();