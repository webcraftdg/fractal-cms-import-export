(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&"SCRIPT"===s.currentScript.tagName.toUpperCase()&&(e=s.currentScript.src),!e)){var i=s.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"})();var e={};t.r(e),t.d(e,{bindables:()=>am,default:()=>rm,dependencies:()=>om,name:()=>im,register:()=>lm,template:()=>nm});var s={};t.r(s),t.d(s,{bindables:()=>Km,default:()=>Um,dependencies:()=>zm,name:()=>_m,register:()=>Gm,template:()=>qm});var i={};t.r(i),t.d(i,{Column:()=>Wm,ImportConfigColumns:()=>Fm});const n={get:(t,e)=>e[Symbol.metadata]?.[t],define(t,e,...s){let i=Object.getOwnPropertyDescriptor(e,Symbol.metadata)?.value;null==i&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=s.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:return void(i[s[0]]=t);case 2:return void(i[s[0]]=i[s[1]]=t);default:for(let e=0;e<n;++e)i[s[e]]=t;return}},has(t,e){const s=e[Symbol.metadata];return null!=s&&t in s},delete(t,e){const s=e[Symbol.metadata];null!=s&&Reflect.deleteProperty(s,t)}},r=Object.freeze,o=Object.assign,a=String,h=n.get,l=n.define,c=t=>t instanceof Promise,u=t=>t instanceof Array,d=t=>t instanceof Set,p=t=>t instanceof Map,f=t=>t instanceof Object;function g(t){return"object"==typeof t&&null!==t||"function"==typeof t}const m=t=>"function"==typeof t,v=t=>"string"==typeof t,b=()=>Object.create(null),w=Object.is,y=(t,...e)=>{const s=a(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(a)}`)},C=(()=>{const t={};let e=!1,s=0,i=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(0|r)===r;case"string":if(e=t[r],void 0!==e)return e;if(s=r.length,0===s)return t[r]=!1;for(i=0,n=0;n<s;++n)if(i=r.charCodeAt(n),0===n&&48===i&&s>1||i<48||i>57)return t[r]=!1;return t[r]=!0;default:return!1}}})(),k=function(){const t=o(b(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,l=t.charAt(0),c=e(l),u=0;for(;u<i;++u)n=h,a=l,h=c,l=t.charAt(u+1),c=e(l),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===c),o+=s(a,r),r=!1);return o}}(),$=function(){const t=b(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=k(s,e)),i}}(),x=function(){const t=b();return e=>{let s=t[e];return void 0===s&&(s=$(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),T=function(){const t=b(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=k(s,e)),i}}(),S=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},A=(t,e)=>{const s=e.name;e.addInitializer(function(){Reflect.defineProperty(this,s,{value:t.bind(this),writable:!0,configurable:!0,enumerable:!1})})},R=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},E=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw y(20)},O=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function I(...t){return o(b(),...t)}const P=(()=>{const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),null==e&&(i=(s=n.toString()).length,e=i>28&&s.indexOf("[native code] }")===i-15,t.set(n,e)),e)})(),M=(t,e)=>c(t)?t.then(e):e(t),B=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],c(e=t[n])&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},j=(t,e)=>new Et(t,1,e),L=(t,e)=>new Et(t,2,e),N=(t,e)=>new Et(e,5,t),D=new WeakMap,V=t=>(e,s,i)=>{let n=D.get(e);if(void 0===n&&D.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r},F={instance:(t,e)=>new Et(t,0,e),singleton:j,transient:L,callback:(t,e)=>new Et(t,3,e),cachedCallback:(t,e)=>new Et(t,3,V(e)),aliasTo:N,defer:(t,...e)=>new It(t,e)},_=function(t){return function(e){e.register(j(this,this),N(this,t))}},q="au:annotation",U=(t,e)=>void 0===e?`${q}:${t}`:`${q}:${t}:${e}`,z="au:resource",K=(t,e,s)=>null==e?`${z}:${t}`:null==s?`${z}:${t}:${e}`:`${z}:${t}:${e}:${s}`,H={annotation:r({name:"au:annotation",appendTo:(t,e)=>{const s=h(q,t);void 0===s?l([e],t,q):s.push(e)},set(t,e,s){l(s,t,U(e))},get:(t,e)=>h(U(e),t),getKeys(t){let e=h(q,t);return void 0===e&&l(e=[],t,q),e},isKey:t=>t.startsWith(q),keyFor:U})},G=Object.prototype.hasOwnProperty;function W(t,e,s,i){let n=h(U(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&G.call(s,t)?n:i()):n):n}function X(t,e,s){let i=h(U(t),e);return void 0===i?(i=e[t],void 0!==i&&G.call(e,t)?i:s()):i}function J(t,e,s){const i=e[t];return void 0===i?s():i}const Y=Symbol.for("au:registrable"),Q={none(t){throw y(2,t)},singleton:t=>new Et(t,1,t),transient:t=>new Et(t,2,t)};class Z{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===Z.DEFAULT?Z.DEFAULT:new Z(t.inheritParentResources??!1,t.defaultResolver??Q.singleton)}}Z.DEFAULT=Z.from({});const tt=t=>new nt(null,Z.from(t)),et=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let st=0,it=null;class nt{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++st,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(Tt,ut)}register(...t){if(100===++this.i)throw y(6,...t);let e,s,i,n,r,o,a=0,l=t.length;for(;a<l;++a)if(e=t[a],g(e))if(dt(e))e.register(this);else if(null!=(o=h(z,e)))o.register(this);else if(ft(e)){const t=e[Symbol.metadata]?.[Y];if(dt(t))t.register(this);else if(v(e.$au?.type)){const t=e.$au,s=(e.aliases??Pt).concat(t.aliases??Pt);let i=`${z}:${t.type}:${t.name}`;if(this.has(i,!1))continue;for(N(e,i).register(this),this.has(e,!1)||j(e,e).register(this),n=0,r=s.length;n<r;++n)i=`${z}:${t.type}:${s[n]}`,this.has(i,!1)||N(e,i).register(this)}else j(e,e).register(this)}else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],g(i)&&(dt(i)?i.register(this):this.register(i));return--this.i,this}registerResolver(t,e,s=!1){at(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),gt(t)){if(void 0!==this.res[t])throw y(7,t);this.res[t]=e}}else n instanceof Et&&4===n.$?n._state.push(e):i.set(t,new Et(t,4,[n,e]));return s&&this.u.set(t,e),e}deregister(t){at(t);const e=this.h.get(t);null!=e&&(this.h.delete(t),gt(t)&&delete this.res[t],this.u.has(t)&&(e.dispose(),this.u.delete(t)))}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(at(t),void 0!==t.resolve)return t;const s=it;let i,n,r=it=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=pt(t)?this:r,e?this.C(t,n):null;r=r.t}}finally{it=s}return null}has(t,e=!1){return this.h.has(t)||gt(t)&&t in this.res||((e&&this.t?.has(t,!0))??!1)}get(t){if(at(t),t.$isResolver)return t.resolve(this,this);const e=it;let s,i,n=it=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=pt(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.t}}finally{it=e}throw y(8,t)}getAll(t,e=!1){at(t);const s=it,i=it=this;let n,r=i,o=Pt;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(ct(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return ct(n,r,i);if(r=r.t,null==r)return Pt}}finally{it=s}return Pt}invoke(t,e){if(P(t))throw y(15,t);const s=it;it=this;try{return void 0===e?new t(...Ct(t).map(ht,this)):new t(...Ct(t).map(ht,this),...e)}finally{it=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(P(t))throw y(15,t);this.R.set(t,e=new rt(t,Ct(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===Z.DEFAULT?new nt(this,this.config):new nt(this,Z.from({...this.config,inheritParentResources:!1})):new nt(this,Z.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose?.(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=v(e)?`${z}:${t}:${e}`:t;let i=this,n=i.res[s];return null==n&&(i=i.root,n=i.res[s]),null==n?null:n.getFactory?.(i)?.Type??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear(),this.root===this&&(this.R.clear(),this.res={})}C(t,e){const s=dt(t);if(!m(t)&&!s)throw y(9,t);if(et.has(t.name))throw y(10,t);if(s){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw y(11,t)}return s}if(t.$isInterface)throw y(12,t.friendlyName);const i=this.config.defaultResolver(t,e);return e.h.set(t,i),i}}class rt{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=it;let i;it=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(ht,t)):new this.Type(...this.dependencies.map(ht,t),...e),null==this.transformers?i:this.transformers.reduce(ot,i)}finally{it=s}}registerTransformer(t){(this.transformers??=[]).push(t)}}function ot(t,e){return e(t)}function at(t){if(null==t)throw y(14)}function ht(t){return this.get(t)}function lt(...t){if(null==it)throw y(16,...t);return 1===t.length?it.get(t[0]):t.map(ht,it)}const ct=(t,e,s)=>{if(t instanceof Et&&4===t.$){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},ut={$isResolver:!0,resolve:(t,e)=>e},dt=t=>m(t?.register),pt=t=>(t=>dt(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,ft=t=>void 0!==t.prototype,gt=t=>v(t)&&t.indexOf(":")>0;class mt{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,V(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Et(i,t,e))}}const vt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],C(n)||(e[n]=t[n]);return e},bt=U("di:paramtypes"),wt=t=>h("design:paramtypes",t),yt=t=>t.metadata[bt]??=[],Ct=t=>{const e=U("di:dependencies");let s=h(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=wt(t),i=(t=>h(bt,t))(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=m(e)&&e!==Function.prototype?vt(Ct(e)):[]}else s=vt(i);else if(void 0===i)s=vt(e);else{s=vt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],C(a)||(s[a]=i[a])}}else s=vt(i);l(s,t,e)}return s},kt=(t,e)=>{const s=m(t)?t:e,i=(v(t)?t:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:null!=s?(t,e)=>s(new mt(t,e??n)):void 0};return n},$t=(...t)=>(e,s)=>{switch(s.kind){case"class":{const e=yt(s);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i);break}case"field":{const e=yt(s),i=t[0];void 0!==i&&(e[s.name]=i);break}default:throw y(22,String(s.name),s.kind)}},xt=(()=>(Symbol.metadata??=Symbol.for("Symbol.metadata"),{createContainer:tt,getDesignParamtypes:wt,getDependencies:Ct,createInterface:kt,inject:$t,transient:t=>(t.register=function(e){return L(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Rt)=>(t.register=function(e){return j(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)}))(),Tt=kt("IContainer"),St=Tt;function At(t,e){return xt.transient(t)}const Rt={scoped:!1};xt.singleton;class Et{get $isResolver(){return!0}constructor(t,e,s){this.j=!1,this.F=null,this.k=t,this.$=e,this._state=s}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.$){case 0:return this._state;case 1:if(this.j)throw y(3,this._state.name);return this.j=!0,this._state=(this.F=t.getFactory(this._state)).construct(e),this.$=0,this.j=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw y(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw y(5,this.$)}}getFactory(t){switch(this.$){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;case 0:return this.F;default:return null}}}class Ot{get friendlyName(){return this.I}constructor(t,e=null,s=null){this.I=t,this.A=e,this.L=s}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw y(13,this.I);return this.A}getFactory(t){return null==this.L?null:t.getFactory(this.L)}dispose(){this.A=null}}class It{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter(t=>"object"==typeof t))}}const Pt=r([]),Mt=r({});function Bt(){}const jt=kt("IPlatform");function Lt(t){return function(e){function s(t,e){$t(s)(t,e)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Nt=(t,e=!1)=>{function s(t,e){$t(s)(t,e)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},Dt=Lt((t,e,s)=>s.has(t,!0)?s.get(t):void 0),Vt=Lt((t,e,s)=>(...i)=>e.getFactory(t).construct(s,i)),Ft=Lt((t,e,s)=>s.has(t,!1)?s.get(t):void 0),_t=Lt((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t)),qt=Lt((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0),Ut=Lt((t,e,s)=>s===s.root?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1)),zt=Lt((t,e,s)=>{const i=Kt(t,e,s),n=new Ot(a(t),i);return s.registerResolver(t,n,!0),i}),Kt=(t,e,s)=>{if(e.hasFactory(t))return e.getFactory(t).construct(s);if(Ht(t)){const i=m(t.register),n=e.getResolver(t,!1);let r;if(null==n?(i&&(r=(Gt??=tt()).getResolver(t,!0)?.getFactory?.(e)),Gt.dispose()):r=n.getFactory?.(e),null!=r)return r.construct(s);throw y(17,t)}return e.getFactory(t).construct(s)},Ht=t=>!0===t?.$isInterface;let Gt;function Wt(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}"function"==typeof SuppressedError&&SuppressedError,r({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Xt=kt("ILogConfig",t=>t.instance(new se("no-colors",3))),Jt=kt("ISink"),Yt=kt("ILogEventFactory",t=>t.singleton(ae)),Qt=kt("ILogger",t=>t.singleton(he)),Zt=kt("ILogScope"),te=r({key:U("logger-sink-handles"),define(t,e){l(e.handles,t,this.key)},getHandles(t){return h(this.key,t.constructor)}}),ee=I({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class se{constructor(t,e){this.colorOptions=t,this.level=e}}const ie=function(){const t={"no-colors":I({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:I({TRC:ee.grey("TRC"),DBG:ee.grey("DBG"),INF:ee.white("INF"),WRN:ee.yellow("WRN"),ERR:ee.red("ERR"),FTL:ee.red("FTL"),QQQ:ee.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),ne=(t,e)=>"no-colors"===e?t.join("."):t.map(ee.cyan).join("."),re=(t,e)=>"no-colors"===e?new Date(t).toISOString():ee.grey(new Date(t).toISOString());class oe{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${re(n,i)} [${ie(t,i)}] ${e}`:`${re(n,i)} [${ie(t,i)} ${ne(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const l=0===i.length?"":` ${ne(i,n)}`;let c=`${re(r,n)} [${ie(e,n)}${l}] ${h}`;if(void 0===o||0===o.length)return null===a?[c]:[c,a];let u=0;for(;c.includes("%s");)c=c.replace("%s",String(o[u++]));return null!==a?[c,a,...o.slice(u)]:[c,...o.slice(u)]}}class ae{constructor(){this.config=lt(Xt)}createLogEvent(t,e,s,i){return new oe(e,s,i,t.scope,this.config.colorOptions,Date.now())}}let he=(()=>{var t;let e,s,i,n,r,o,a=[];return t=class{constructor(t=lt(Xt),e=lt(Yt),s=lt(Nt(Jt)),i=lt(Dt(Zt))??[],n=null){let r,o,h,l,c,u;if(this.scope=(function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(this,a),i),this._=b(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.M=[],o=this.T=[],h=this.P=[],l=this.K=[],c=this.N=[],u=this.G=[];for(const t of s){const e=te.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&h.push(t),(e?.includes(3)??1)&&l.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.M=n.M,o=this.T=n.T,h=this.P=n.P,l=this.K=n.K,c=this.N=n.N,u=this.G=n.G}trace(t,...e){this.config.level<=0&&this.W(this.M,0,t,e)}debug(t,...e){this.config.level<=1&&this.W(this.T,1,t,e)}info(t,...e){this.config.level<=2&&this.W(this.P,2,t,e)}warn(t,...e){this.config.level<=3&&this.W(this.K,3,t,e)}error(t,...e){this.config.level<=4&&this.W(this.N,4,t,e)}fatal(t,...e){this.config.level<=5&&this.W(this.G,5,t,e)}scopeTo(e){const s=this._;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,null,this.scope.concat(e),this)),i}W(t,e,s,i){const n=m(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}},(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[A],s=[A],i=[A],n=[A],r=[A],o=[A],Wt(t,null,e,{kind:"method",name:"trace",static:!1,private:!1,access:{has:t=>"trace"in t,get:t=>t.trace},metadata:h},null,a),Wt(t,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:t=>"debug"in t,get:t=>t.debug},metadata:h},null,a),Wt(t,null,i,{kind:"method",name:"info",static:!1,private:!1,access:{has:t=>"info"in t,get:t=>t.info},metadata:h},null,a),Wt(t,null,n,{kind:"method",name:"warn",static:!1,private:!1,access:{has:t=>"warn"in t,get:t=>t.warn},metadata:h},null,a),Wt(t,null,r,{kind:"method",name:"error",static:!1,private:!1,access:{has:t=>"error"in t,get:t=>t.error},metadata:h},null,a),Wt(t,null,o,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:t=>"fatal"in t,get:t=>t.fatal},metadata:h},null,a),h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),t})();class le{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const ce=kt("IEventAggregator",t=>t.singleton(ue));class ue{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw y(18,t);if(v(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();const i=s.length;for(let n=0;n<i;n++)s[n](e,t)}}else{const e=this.messageHandlers.slice(),s=e.length;for(let i=0;i<s;i++)e[i].handle(t)}}subscribe(t,e){if(!t)throw y(19,t);let s,i;return v(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new le(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,(t,i)=>{s.dispose(),e(t,i)});return s}}const de="AccessThis",pe="AccessGlobal",fe="AccessScope",ge="AccessMember",me="AccessKeyed",ve="ArrayBindingPattern",be="ObjectBindingPattern",we="BindingIdentifier",ye="ArrayDestructuring",Ce="DestructuringAssignmentLeaf";class ke{constructor(t){this.value=t,this.$kind="Custom"}evaluate(...t){return this.value}assign(...t){return t}bind(...t){}unbind(...t){}accept(t){}}class $e{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="BindingBehavior",this.key=`_bb_${e}`}}class xe{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="ValueConverter"}}class Te{constructor(t,e,s="="){this.target=t,this.value=e,this.op=s,this.$kind="Assign"}}class Se{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind="Conditional"}}class Ae{constructor(t){this.name=t,this.$kind=pe}}class Re{constructor(t=0){this.ancestor=t,this.$kind=de}}class Ee{constructor(){this.$kind="AccessBoundary"}}class Oe{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=fe}}const Ie=t=>t.$kind===pe||(t.$kind===ge||t.$kind===me)&&t.accessGlobal;class Pe{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=ge,this.accessGlobal=Ie(t)}}class Me{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=me,this.accessGlobal=Ie(t)}}class Be{constructor(t,e){this.func=t,this.args=e,this.$kind="New"}}class je{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind="CallScope"}}class Le{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind="CallMember"}}class Ne{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind="CallFunction"}}class De{constructor(t,e){this.name=t,this.args=e,this.$kind="CallGlobal"}}class Ve{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind="Binary"}}class Fe{constructor(t,e,s=0){this.operation=t,this.expression=e,this.pos=s,this.$kind="Unary"}}class _e{constructor(t){this.value=t,this.$kind="PrimitiveLiteral"}}_e.$undefined=new _e(void 0),_e.$null=new _e(null),_e.$true=new _e(!0),_e.$false=new _e(!1),_e.$empty=new _e("");class qe{constructor(t){this.elements=t,this.$kind="ArrayLiteral"}}qe.$empty=new qe(Pt);class Ue{constructor(t,e){this.keys=t,this.values=e,this.$kind="ObjectLiteral"}}Ue.$empty=new Ue(Pt,Pt);class ze{constructor(t,e=Pt){this.cooked=t,this.expressions=e,this.$kind="Template"}}ze.$empty=new ze([""]);class Ke{constructor(t,e,s,i=Pt){this.cooked=t,this.func=s,this.expressions=i,this.$kind="TaggedTemplate",t.raw=e}}class He{constructor(t){this.elements=t,this.$kind=ve}}class Ge{constructor(t,e){this.keys=t,this.values=e,this.$kind=be}}class We{constructor(t){this.name=t,this.$kind=we}}class Xe{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind="ForOfStatement"}}class Je{constructor(t,e=Pt){this.parts=t,this.expressions=e,this.$kind="Interpolation",this.isMulti=e.length>1,this.firstExpression=e[0]}}class Ye{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class Qe{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=Ce}}class Ze{constructor(t,e){this.target=t,this.indexOrProperties=e,this.$kind=Ce}}class ts{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind="ArrowFunction"}}const es=String,ss=()=>Object.create(null),is=(t,...e)=>new Error(`AUR${es(t).padStart(4,"0")}:${e.map(es)}`),ns=xt.createInterface("IExpressionParser");class rs{constructor(){this.t=ss(),this.i=ss(),this.h=ss()}parse(t,e){let s;switch(e){case ys:return new ke(t);case gs:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case ms:return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===bs||e===ws)return _e.$empty;throw ri()}return s=this.t[t],void 0===s&&(s=this.t[t]=this.$parse(t,e)),s}}$parse(t,e){return ks=t,$s=0,xs=t.length,Ts=0,Ss=0,As=6291456,Rs="",Cs=Bs(0),Es=!0,Os=!1,Is=!0,Ps=-1,Ns(61,void 0===e?ws:e)}}function os(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}rs.register=_(ns);const as=_e.$false,hs=_e.$true,ls=_e.$null,cs=_e.$undefined,us=new Re(0),ds=new Re(1),ps=new Ee,fs="None",gs="Interpolation",ms="IsIterator",vs="IsChainable",bs="IsFunction",ws="IsProperty",ys="IsCustom";let Cs,ks="",$s=0,xs=0,Ts=0,Ss=0,As=6291456,Rs="",Es=!0,Os=!1,Is=!0,Ps=-1;const Ms=String.fromCharCode,Bs=t=>ks.charCodeAt(t),js=()=>ks.slice(Ss,$s),Ls="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Ns(t,e){if(e===ys)return new ke(ks);if(0===$s){if(e===gs)return function(){const t=[],e=[],s=xs;let i="";for(;$s<s;){switch(Cs){case 36:if(123===Bs($s+1)){t.push(i),i="",$s+=2,Cs=Bs($s),Ks();const s=Ns(61,gs);e.push(s);continue}i+="$";break;case 92:i+=Ms(os(Hs()));break;default:i+=Ms(Cs)}Hs()}return e.length?(t.push(i),new Je(t,e)):null}();if(Ks(),4194304&As)throw Zs()}Es=577>t,Os=!1,Is=579>t;let s,i=!1,n=0;if(131072&As){const t=Ti[63&As];Ks(),s=new Fe(t,Ns(579,e)),Es=!1}else{t:switch(As){case 12296:n=Ts,Es=!1,Is=!1;do{switch(Ks(),++n,As){case 65547:if(Ks(),!(12288&As))throw ei();break;case 12:case 13:throw ei();case 2162702:if(Os=!0,Ks(),!(12288&As)){s=0===n?us:1===n?ds:new Re(n),i=!0;break t}break;default:if(2097152&As){s=0===n?us:1===n?ds:new Re(n);break t}throw si()}}while(12296===As);case 4096:{const t=Rs;if(e===ms)s=new We(t);else if(Is&&Ls.includes(t))s=new Ae(t);else{if(Is&&"import"===t)throw ci();s=new Oe(t,n)}if(Es=!Os,Ks(),Ys(53)){if(524298===As)throw $i();const e=Os,i=Ts;++Ts;const n=Ns(62,fs);Os=e,Ts=i,Es=!1,s=new ts([new We(t)],n)}break}case 12:throw xi();case 13:throw ti();case 12293:switch(Es=!1,Ks(),Ts){case 0:s=us;break;case 1:s=ds;break;default:s=new Re(Ts)}break;case 12294:Es=!1,Ks(),s=ps;break;case 2688009:s=function(t){Ks();const e=$s,s=Ss,i=As,n=Cs,r=Rs,o=Os,a=[];let h=1,l=!1;e:for(;;){if(13===As){if(Ks(),4096!==As)throw ei();if(a.push(new We(Rs)),Ks(),6291475===As)throw ki();if(7340048!==As)throw ti();if(Ks(),53!==As)throw ti();Ks();const t=Os,e=Ts;++Ts;const s=Ns(62,fs);return Os=t,Ts=e,Es=!1,new ts(a,s,!0)}switch(As){case 4096:a.push(new We(Rs)),Ks();break;case 7340048:Ks();break e;case 524298:case 2688020:Ks(),h=4;break;case 6291475:h=2,l=!0;break e;case 2688009:h=2;break e;default:Ks(),h=2}switch(As){case 6291475:if(Ks(),l=!0,1===h)break;break e;case 7340048:Ks();break e;case 4194352:1===h&&(h=3);break e;case 53:if(l)throw wi();Ks(),h=2;break e;default:1===h&&(h=2);break e}}if(53===As){if(1===h){if(Ks(),524298===As)throw $i();const t=Os,e=Ts;++Ts;const s=Ns(62,fs);return Os=t,Ts=e,Es=!1,new ts(a,s)}throw wi()}if(1===h&&0===a.length)throw gi();if(l)switch(h){case 2:throw wi();case 3:throw yi();case 4:throw Ci()}$s=e,Ss=s,As=i,Cs=n,Rs=r,Os=o;const c=Os,u=Ns(62,t);if(Os=c,Qs(7340048),53===As)switch(h){case 2:throw wi();case 3:throw yi();case 4:throw Ci()}return u}(e);break;case 2688020:s=ks.search(/\s+of\s+/)>$s?function(){const t=[],e=new Ye(ye,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(Ks(),As){case 7340053:i=!1,r();break;case 6291475:r();break;case 4096:s=js();break;default:throw mi()}return Qs(7340053),e;function r(){""!==s?(t.push(new Qe(new Pe(us,s),new Me(us,new _e(n++)),void 0)),s=""):n++}}():function(t){const e=Os;Ks();const s=new Array;for(;7340053!==As;)if(Ys(6291475)){if(s.push(cs),7340053===As)break}else{if(s.push(Ns(62,t===ms?fs:t)),!Ys(6291475))break;if(7340053===As)break}return Os=e,Qs(7340053),t===ms?new He(s):(Es=!1,new qe(s))}(e);break;case 524298:s=function(t){const e=Os,s=new Array,i=new Array;for(Ks();7340047!==As;){if(s.push(Rs),49152&As)Ks(),Qs(6291478),i.push(Ns(62,t===ms?fs:t));else{if(!(12288&As))throw di();{const e=Cs,s=As,n=$s;Ks(),Ys(6291478)?i.push(Ns(62,t===ms?fs:t)):(Cs=e,As=s,$s=n,i.push(Ns(580,t===ms?fs:t)))}}7340047!==As&&Qs(6291475)}return Os=e,Qs(7340047),t===ms?new Ge(s,i):(Es=!1,new Ue(s,i))}(e);break;case 2163762:s=new ze([Rs]),Es=!1,Ks();break;case 2163763:s=Us(e,s,!1);break;case 16384:case 32768:s=new _e(Rs),Es=!1,Ks();break;case 8194:case 8195:case 8193:case 8192:s=Ti[63&As],Es=!1,Ks();break;case 8196:{Ks();const t=Ns(578,e);let i;2688009===As?i=Ds():(i=[],Ks()),s=new Be(t,i),Es=!1;break}default:throw $s>=xs?ii():ni()}if(e===ms)return function(t){if(!qs.includes(t.$kind))throw ui(t.$kind);if(4204596!==As)throw ui(t.$kind);Ks();const e=t,s=Ns(61,vs);return new Xe(e,s,Ps)}(s);switch(As){case 2228282:case 2228283:s=new Fe(Ti[63&As],s,1),Ks(),Es=!1}if(579<t)return s;if(12===As||13===As)throw ei();if(s.$kind===de)switch(As){case 2162702:if(Os=!0,Es=!1,Ks(),!(13312&As))throw vi();if(12288&As)s=new Oe(Rs,s.ancestor),Ks();else if(2688009===As)s=new Ne(s,Ds(),!0);else{if(2688020!==As)throw bi();s=Vs(s,!0)}break;case 65547:if(Es=!Os,Ks(),!(12288&As))throw ei();s=new Oe(Rs,s.ancestor),Ks();break;case 12:case 13:throw ei();case 2688009:s=new Ne(s,Ds(),i);break;case 2688020:s=Vs(s,i);break;case 2163762:s=zs(s);break;case 2163763:s=Us(e,s,!0)}for(;(65536&As)>0;)switch(As){case 2162702:s=Fs(s);break;case 65547:if(Ks(),!(12288&As))throw ei();s=_s(s,!1);break;case 12:case 13:throw ei();case 2688009:if(578===t)return s;s=s.$kind===fe?new je(s.name,Ds(),s.ancestor,!1):s.$kind===ge?new Le(s.object,s.name,Ds(),s.optional,!1):s.$kind===pe?new De(s.name,Ds()):new Ne(s,Ds(),!1);break;case 2688020:s=Vs(s,!1);break;case 2163762:if(Os)throw bi();s=zs(s);break;case 2163763:if(Os)throw bi();s=Us(e,s,!0)}}if(12===As||13===As)throw ei();if(577<t)return s;for(;(262144&As)>0;){const i=As;if((960&i)<=t)break;Ks(),s=new Ve(Ti[63&i],s,Ns(960&i,e)),Es=!1}if(63<t)return s;if(Ys(6291480)){const t=Ns(62,e);Qs(6291478),s=new Se(s,t,Ns(62,e)),Es=!1}if(62<t)return s;switch(As){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!Es)throw oi();const t=Ti[63&As];Ks(),s=new Te(s,Ns(62,e),t);break}}if(61<t)return s;for(;Ys(6291482);){if(6291456===As)throw ai();const t=Rs;Ks();const i=new Array;for(;Ys(6291478);)i.push(Ns(62,e));s=new xe(s,t,i)}for(;Ys(6291481);){if(6291456===As)throw hi();const t=Rs;Ks();const i=new Array;for(;Ys(6291478);)i.push(Ns(62,e));s=new $e(s,t,i)}if(6291456!==As){if(e===gs&&7340047===As)return s;if(e===vs&&6291479===As){if($s===xs)throw ni();return Ps=$s-1,s}if("of"===js())throw li();throw ni()}return s}function Ds(){const t=Os;Ks();const e=[];for(;7340048!==As&&(e.push(Ns(62,fs)),Ys(6291475)););return Qs(7340048),Es=!1,Os=t,e}function Vs(t,e){const s=Os;return Ks(),t=new Me(t,Ns(62,fs),e),Qs(7340053),Es=!s,Os=s,t}function Fs(t){if(Os=!0,Es=!1,Ks(),!(13312&As))throw vi();if(12288&As)return _s(t,!0);if(2688009===As)return t.$kind===fe?new je(t.name,Ds(),t.ancestor,!0):t.$kind===ge?new Le(t.object,t.name,Ds(),t.optional,!0):new Ne(t,Ds(),!0);if(2688020===As)return Vs(t,!0);throw bi()}function _s(t,e){const s=Rs;switch(As){case 2162702:{Os=!0,Es=!1;const i=$s,n=Ss,r=As,o=Cs,a=Rs,h=Es,l=Os;if(Ks(),!(13312&As))throw vi();return 2688009===As?new Le(t,s,Ds(),e,!0):($s=i,Ss=n,As=r,Cs=o,Rs=a,Es=h,Os=l,new Pe(t,s,e))}case 2688009:return Es=!1,new Le(t,s,Ds(),e,!1);default:return Es=!Os,Ks(),new Pe(t,s,e)}}const qs=[ve,be,we,ye,"ObjectDestructuring"];function Us(t,e,s){const i=Os,n=[Rs];Qs(2163763);const r=[Ns(62,t)];for(;2163762!==(As=Js());)n.push(Rs),Qs(2163763),r.push(Ns(62,t));return n.push(Rs),Es=!1,Os=i,s?(Ks(),new Ke(n,n,e,r)):(Ks(),new ze(n,r))}function zs(t){Es=!1;const e=[Rs];return Ks(),new Ke(e,e,t)}function Ks(){for(;$s<xs;)if(Ss=$s,null!=(As=Ai[Cs]()))return;As=6291456}function Hs(){return Cs=Bs(++$s)}function Gs(){for(;Ri[Hs()];);const t=Si[Rs=js()];return void 0===t?4096:t}function Ws(t){let e=Cs;if(!1===t){do{e=Hs()}while(e<=57&&e>=48);if(46!==e)return Rs=parseInt(js(),10),32768;if(e=Hs(),$s>=xs)return Rs=parseInt(js().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Hs()}while(e<=57&&e>=48);else Cs=Bs(--$s);return Rs=parseFloat(js()),32768}function Xs(){let t=!0,e="";for(;96!==Hs();)if(36===Cs){if($s+1<xs&&123===Bs($s+1)){$s++,t=!1;break}e+="$"}else if(92===Cs)e+=Ms(os(Hs()));else{if($s>=xs)throw fi();e+=Ms(Cs)}return Hs(),Rs=e,t?2163762:2163763}const Js=()=>{if($s>=xs)throw fi();return $s--,Xs()},Ys=t=>As===t&&(Ks(),!0),Qs=t=>{if(As!==t)throw gi();Ks()},Zs=()=>is(151,ks),ti=()=>is(152,ks),ei=()=>is(153,ks),si=()=>is(154,ks),ii=()=>is(155,ks),ni=()=>is(156,js(),$s,ks),ri=()=>is(157),oi=()=>is(158,ks),ai=()=>is(159,ks),hi=()=>is(160,ks),li=()=>is(161,ks),ci=()=>is(162,ks),ui=t=>is(163,ks,t),di=()=>is(164,ks),pi=()=>is(165,ks),fi=()=>is(166,ks),gi=t=>is(167,ks),mi=()=>is(170,ks),vi=()=>is(171,ks),bi=()=>is(172,ks),wi=()=>is(173,ks),yi=()=>is(174,ks),Ci=()=>is(175,ks),ki=()=>is(176,ks),$i=()=>is(178,ks),xi=()=>is(179,ks),Ti=[as,hs,ls,cs,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],Si=Object.assign(ss(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:Ai,IdParts:Ri}=(()=>{const t=()=>{throw is(168,ks)};t.notMapped=!0;const e=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],s=[48,58],i=(t,e,s,i)=>{const n=s.length;for(let e=0;e<n;e+=2){const n=s[e];let r=s[e+1];r=r>0?r:n+1,t&&t.fill(i,n,r)}},n=(t=>(i(t,0,e,1),i(t,0,s,1),t))(new Uint8Array(65535)),r=t=>()=>(Hs(),t),o=new Array(65535);return o.fill(t,0,65535),i(o,0,[0,33,127,161],()=>(Hs(),null)),i(o,0,e,Gs),i(o,0,s,()=>Ws(!1)),o[34]=o[39]=()=>function(){const t=Cs;Hs();let e=0;const s=new Array;let i=$s;for(;Cs!==t;)if(92===Cs)s.push(ks.slice(i,$s)),Hs(),e=os(Cs),Hs(),s.push(Ms(e)),i=$s;else{if($s>=xs)throw pi();Hs()}const n=ks.slice(i,$s);Hs(),s.push(n);const r=s.join("");return Rs=r,16384}(),o[96]=()=>Xs(),o[33]=()=>61!==Hs()?131121:61!==Hs()?6553951:(Hs(),6553953),o[61]=()=>62===Hs()?(Hs(),53):61!==Cs?4194352:61!==Hs()?6553950:(Hs(),6553952),o[38]=()=>38!==Hs()?6291481:(Hs(),6553885),o[124]=()=>124!==Hs()?6291482:(Hs(),6553820),o[63]=()=>{if(46===Hs()){const t=Bs($s+1);return t<=48||t>=57?(Hs(),2162702):6291480}return 63!==Cs?6291480:(Hs(),6553755)},o[46]=()=>Hs()<=57&&Cs>=48?Ws(!0):46===Cs?46!==Hs()?12:(Hs(),13):65547,o[60]=()=>61!==Hs()?6554018:(Hs(),6554020),o[62]=()=>61!==Hs()?6554019:(Hs(),6554021),o[37]=r(6554157),o[40]=r(2688009),o[41]=r(7340048),o[42]=()=>61===Hs()?(Hs(),4194360):42===Cs?(Hs(),6554223):6554156,o[43]=()=>43===Hs()?(Hs(),2228282):61!==Cs?2490856:(Hs(),4194358),o[44]=r(6291475),o[45]=()=>45===Hs()?(Hs(),2228283):61!==Cs?2490857:(Hs(),4194359),o[47]=()=>61!==Hs()?6554158:(Hs(),4194361),o[58]=r(6291478),o[59]=r(6291479),o[91]=r(2688020),o[93]=r(7340053),o[123]=r(524298),o[125]=r(7340047),{CharScanners:o,IdParts:n}})(),Ei=xt.createInterface,Oi=Object.freeze,{aliasTo:Ii,singleton:Pi}=F,Mi="Interpolation",Bi="IsFunction",ji="IsProperty",Li="custom-element",Ni=Oi({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),Di=Ei("ITemplateCompiler"),Vi=Ei("IAttrMapper"),Fi=(t,...e)=>{const s=String(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(String)}`)};class _i{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.i;break;case 1:this.has=this.u;break;default:this.has=this.A}else switch(t.length){case 0:this.has=this.I;break;case 1:this.has=this.B;break;default:this.has=this.P}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}P(t){return this.chars.includes(t)}B(t){return this.chars===t}I(t){return!1}A(t){return!this.chars.includes(t)}u(t){return this.chars!==t}i(t){return!0}}class qi{constructor(){this.parts=Pt,this.C="",this.T={},this.R={}}get pattern(){const t=this.C;return""===t?null:t}set pattern(t){null==t?(this.C="",this.parts=Pt):(this.C=t,this.parts=this.R[t])}append(t,e){const s=this.T;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.T;let s;void 0!==e[t]&&(s=this.R,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Ui{get C(){return this._?this.L[0]:null}constructor(t,...e){this.charSpec=t,this.V=[],this.H=null,this._=!1,this.L=e}findChild(t){const e=this.V,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.L;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Ui(t,e),this.V.push(i),t.repeat&&i.V.push(i)),i}findMatches(t,e){const s=[],i=this.V,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.L.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.L[h]);else for(;h<r;++h)e.append(o.L[h],t);return s}}class zi{constructor(t){this.text=t;const e=this.M=t.length,s=this.$=[];let i=0;for(;e>i;++i)s.push(new _i(t[i],!1,!1,!1))}eachChar(t){const e=this.M,s=this.$;let i=0;for(;e>i;++i)t(s[i])}}class Ki{constructor(t){this.text="PART",this.F=new _i(t,!0,!1,!0)}eachChar(t){t(this.F)}}class Hi{constructor(t){this.text=t,this.F=new _i(t,!1,!0,!1)}eachChar(t){t(this.F)}}class Gi{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Wi=Ei("ISyntaxInterpreter",t=>t.singleton(Xi));class Xi{constructor(){this.O=new Ui(null),this.W=[this.O]}add(t){t=t.slice(0).sort((t,e)=>t.pattern>e.pattern?1:-1);const e=t.length;let s,i,n,r,o,a,h,l,c=0;for(;e>c;){for(s=this.O,i=t[c],n=i.pattern,r=new Gi,o=this.N(i,r),a=o.length,h=t=>s=s.append(t,n),l=0;a>l;++l)o[l].eachChar(h);s.H=r,s._=!0,++c}}interpret(t){const e=new qi,s=t.length;let i,n=this.W,r=0;for(;r<s&&(n=this.j(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(Ji),n.length>0&&(n.sort(Yi),i=n[0],i.charSpec.isSymbol||e.next(i.C),e.pattern=i.C),e}j(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}N(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new zi(i.slice(a,o))),++e.statics,a=o):(s.push(new Hi(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new Ki(r)),++e.dynamics):++o;return a!==o&&(s.push(new zi(i.slice(a,o))),++e.statics),s}}function Ji(t){return t._}function Yi(t,e){const s=t.H,i=e.H;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class Qi{constructor(t,e,s,i,n=null){this.rawName=t,this.rawValue=e,this.target=s,this.command=i,this.parts=n}}const Zi=Ei("IAttributePattern"),tn=Ei("IAttributeParser",t=>t.singleton(en));class en{constructor(){this.U={},this.L={},this.q=!1,this.G=[],this.J=lt(Wi),this.c=lt(Tt)}registerPattern(t,e){if(this.q)throw Fi(88);const s=this.L;for(const{pattern:i}of t){if(null!=s[i])throw Fi(89,i);s[i]={patternType:e}}this.G.push(...t)}K(){this.J.add(this.G);const t=this.c;for(const[,e]of Object.entries(this.L))e.pattern=t.get(e.patternType)}parse(t,e){this.q||(this.K(),this.q=!0);let s=this.U[t];null==s&&(s=this.U[t]=this.J.interpret(t));const i=s.pattern;return null==i?new Qi(t,e,t,null,null):this.L[i].pattern[i](t,e,s.parts)}}const sn=Oi({name:K("attribute-pattern"),create:(t,e)=>({register(s){s.get(tn).registerPattern(t,e),Pi(Zi,e).register(s)}})});class nn{"PART.PART"(t,e,s){return new Qi(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Qi(t,e,`${s[0]}.${s[1]}`,s[2])}}nn[Symbol.metadata]={[Y]:sn.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],nn)};class rn{ref(t,e,s){return new Qi(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new Qi(t,e,i,"ref")}}rn[Symbol.metadata]={[Y]:sn.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],rn)};class on{"PART.trigger:PART"(t,e,s){return new Qi(t,e,s[0],"trigger",s)}"PART.capture:PART"(t,e,s){return new Qi(t,e,s[0],"capture",s)}}on[Symbol.metadata]={[Y]:sn.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],on)};class an{":PART"(t,e,s){return new Qi(t,e,s[0],"bind")}}an[Symbol.metadata]={[Y]:sn.create([{pattern:":PART",symbols:":"}],an)};class hn{"@PART"(t,e,s){return new Qi(t,e,s[0],"trigger")}"@PART:PART"(t,e,s){return new Qi(t,e,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}hn[Symbol.metadata]={[Y]:sn.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],hn)};const ln=n.get,cn=n.define,un="rg",dn=Oi({hydrateElement:"ra",hydrateAttribute:"rb",hydrateTemplateController:"rc",hydrateLetElement:"rd",setProperty:"re",interpolation:"rf",propertyBinding:un,letBinding:"ri",refBinding:"rj",iteratorBinding:"rk",multiAttr:"rl",textBinding:"ha",listenerBinding:"hb",attributeBinding:"hc",stylePropertyBinding:"hd",setAttribute:"he",setClassAttribute:"hf",setStyleAttribute:"hg",spreadTransferedBinding:"hs",spreadElementProp:"hp",spreadValueBinding:"svb"}),pn=Ei("Instruction");class fn{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class gn{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=un}}class mn{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class vn{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class bn{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class wn{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class yn{constructor(t,e,s,i,n,r){this.res=t,this.props=e,this.projections=s,this.containerless=i,this.captures=n,this.data=r,this.type="ra"}}class Cn{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class kn{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class $n{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class xn{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class Tn{constructor(t){this.from=t,this.type="ha"}}class Sn{constructor(t,e,s,i){this.from=t,this.to=e,this.capture=s,this.modifier=i,this.type="hb"}}class An{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class Rn{constructor(t){this.value=t,this.type="hf"}}class En{constructor(t){this.value=t,this.type="hg"}}class On{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class In{constructor(){this.type="hs"}}class Pn{constructor(t){this.instruction=t,this.type="hp"}}class Mn{constructor(t,e){this.target=t,this.from=e,this.type="svb"}}class Bn{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return v(t)?(s=t,i={name:s}):(s=t.name,i=t),new Bn(e,E(Dn(e,"name"),s),R(Dn(e,"aliases"),i.aliases,e.aliases),Nn(s))}register(t,e){const s=this.Type,i="string"==typeof e?Nn(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Pi(s,s),Ii(s,i),...n.map(t=>Ii(s,Nn(t))))}}const jn="binding-command",Ln=K(jn),Nn=t=>`${Ln}:${t}`,Dn=(t,e)=>ln(H.annotation.keyFor(e),t),Vn=(()=>{const t="__au_static_resource__",e=(e,s,i)=>{let n=ln(t,e);return null==n&&e.$au?.type===s&&(n=i(e.$au,e),cn(n,e,t)),n};return Oi({name:Ln,keyFrom:Nn,define(t,e){const s=Bn.create(t,e),i=s.Type;return cn(s,i,Ln,z),i},getAnnotation:Dn,find(t,s){const i=t.find(jn,s);return null==i?null:ln(Ln,i)??e(i,jn,Bn.create)??null},get:(t,e)=>t.get(_t(Nn(e)))})})();class Fn{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return n=""===n?$(i):n,i=null==t.bindable?s.map(t.node,i)??$(i):t.bindable.name,new gn(e.parse(n,ji),i,1)}}Fn.$au={type:jn,name:"one-time"};class _n{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return n=""===n?$(i):n,i=null==t.bindable?s.map(t.node,i)??$(i):t.bindable.name,new gn(e.parse(n,ji),i,2)}}_n.$au={type:jn,name:"to-view"};class qn{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return r=""===r?$(n):r,n=null==t.bindable?s.map(t.node,n)??$(n):t.bindable.name,new gn(e.parse(r,ji),n,4)}}qn.$au={type:jn,name:"from-view"};class Un{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return r=""===r?$(n):r,n=null==t.bindable?s.map(t.node,n)??$(n):t.bindable.name,new gn(e.parse(r,ji),n,6)}}Un.$au={type:jn,name:"two-way"};class zn{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr,n=t.bindable;let r,o,a=i.rawValue,h=i.target;return a=""===a?$(h):a,null==n?(o=s.isTwoWay(t.node,h)?6:2,h=s.map(t.node,h)??$(h)):(r=t.def.defaultBindingMode??0,o=0===n.mode||null==n.mode?null==r||0===r?2:r:n.mode,h=n.name),new gn(e.parse(a,ji),h,v(o)?Ni[o]??0:o)}}zn.$au={type:jn,name:"bind"};class Kn{constructor(){this.X=lt(tn)}get ignoreAttr(){return!1}build(t,e){const s=null===t.bindable?$(t.attr.target):t.bindable.name,i=e.parse(t.attr.rawValue,"IsIterator");let n=Pt;if(i.semiIdx>-1){const e=t.attr.rawValue.slice(i.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),r=this.X.parse(t,i);n=[new wn(i,r.target,r.command)]}}return new mn(i,s,n)}}Kn.$au={type:jn,name:"for"};class Hn{get ignoreAttr(){return!0}build(t,e){return new Sn(e.parse(t.attr.rawValue,Bi),t.attr.target,!1,t.attr.parts?.[2]??null)}}Hn.$au={type:jn,name:"trigger"};class Gn{get ignoreAttr(){return!0}build(t,e){return new Sn(e.parse(t.attr.rawValue,Bi),t.attr.target,!0,t.attr.parts?.[2]??null)}}Gn.$au={type:jn,name:"capture"};class Wn{get ignoreAttr(){return!0}build(t,e){const s=t.attr,i=s.target;let n=s.rawValue;return n=""===n?$(i):n,new On(i,e.parse(n,ji),i)}}Wn.$au={type:jn,name:"attr"};class Xn{get ignoreAttr(){return!0}build(t,e){return new On("style",e.parse(t.attr.rawValue,ji),t.attr.target)}}Xn.$au={type:jn,name:"style"};class Jn{get ignoreAttr(){return!0}build(t,e){let s=t.attr.target;if(s.includes(",")){const t=s.split(",").filter(t=>t.length>0);if(0===t.length)throw Fi(723);s=t.join(" ")}return new On("class",e.parse(t.attr.rawValue,ji),s)}}Jn.$au={type:jn,name:"class"};class Yn{get ignoreAttr(){return!0}build(t,e){return new vn(e.parse(t.attr.rawValue,ji),t.attr.target)}}Yn.$au={type:jn,name:"ref"};class Qn{get ignoreAttr(){return!1}build(t){return new Mn(t.attr.target,t.attr.rawValue)}}Qn.$au={type:jn,name:"spread"},"function"==typeof SuppressedError&&SuppressedError;const Zn=Ei("ITemplateElementFactory",t=>t.singleton(er)),tr={};class er{constructor(){this.p=lt(jt),this.Y=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(v(t)){let e=tr[t];if(void 0===e){const s=this.Y;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.Y=this.t(),e=s),tr[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const sr="au-start",ir="au-end",nr=(t,e,s)=>t.insertBefore(e,s),rr=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},or=(t,e)=>t.content.appendChild(e),ar=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},hr=t=>1===t.nodeType,lr=t=>3===t.nodeType,cr="au-slot",ur="default",dr=(pr=0,()=>"anonymous-"+ ++pr);var pr;class fr{constructor(){this.debug=!1,this.resolveResources=!0}compile(t,e){if(null==t.template||!1===t.needsCompile)return t;const s=new vr(t,e,null,null,void 0),i=v(t.template)||!t.enhance?s.Z.createTemplate(t.template):t.template,n=i.nodeName===gr&&null!=i.content,r=n?i.content:i,o=Or.findAll(e),a=o.length;let h=0;if(a>0)for(;a>h;)o[h].compiling?.(i),++h;if(i.hasAttribute(Ar))throw Fi(701,t);return this.tt(r,s),this.et(r,s),{...t,name:t.name||dr(),dependencies:(t.dependencies??Pt).concat(s.deps??Pt),instructions:s.rows,surrogates:n?this.nt(i,s):Pt,template:i,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(t,e,s,i,n){const r=new vr(t,s,null,null,void 0),o=[],a=n??r.it(i.nodeName.toLowerCase()),h=null!==a,l=r.ep,c=e.length;let u,d,p,f,g,m,v,b,w,y,C=0,k=null,x=null;for(;c>C;++C)if(u=e[C],w=u.target,y=u.rawValue,"...$attrs"!==w)if(x=r.rt(u),null!==x&&x.ignoreAttr)Cr.node=i,Cr.attr=u,Cr.bindable=null,Cr.def=null,o.push(x.build(Cr,r.ep,r.m));else if(h&&(f=r.st(a),g=f.attrs[w],void 0!==g))null==x?(v=l.parse(y,Mi),o.push(new Pn(null==v?new bn(y,g.name):new fn(v,g.name)))):(Cr.node=i,Cr.attr=u,Cr.bindable=g,Cr.def=a,o.push(new Pn(x.build(Cr,r.ep,r.m))));else if(k=r.lt(w),null===k)if(null==x)if(v=l.parse(y,Mi),null!=v)o.push(new fn(v,r.m.map(i,w)??$(w)));else switch(w){case"class":o.push(new Rn(y));break;case"style":o.push(new En(y));break;default:o.push(new An(y,w))}else Cr.node=i,Cr.attr=u,Cr.bindable=null,Cr.def=null,o.push(x.build(Cr,r.ep,r.m));else{if(k.isTemplateController)throw Fi(9998,w);f=r.st(k),b=!1===k.noMultiBindings&&null===x&&br(y),b?p=this.ot(i,y,k,r):(m=f.primary,null===x?(v=l.parse(y,Mi),p=[null===v?new bn(y,m.name):new fn(v,m.name)]):(Cr.node=i,Cr.attr=u,Cr.bindable=m,Cr.def=k,p=[x.build(Cr,r.ep,r.m)])),(d??=[]).push(new Cn(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(w)?w:void 0,p))}else o.push(new In);return wr(),null!=d?d.concat(o):o}nt(t,e){const s=[],i=t.attributes,n=e.ep;let r,o,a,h,l,c,u,d,p,f,g,m,v=i.length,b=0,w=null,y=null;for(;v>b;++b){if(r=i[b],o=r.name,a=r.value,h=e.X.parse(o,a),g=h.target,m=h.rawValue,kr[g])throw Fi(702,o);if(y=e.rt(h),null!==y&&y.ignoreAttr)Cr.node=t,Cr.attr=h,Cr.bindable=null,Cr.def=null,s.push(y.build(Cr,e.ep,e.m));else if(w=e.lt(g),null===w)if(null===y)if(p=n.parse(m,Mi),null!=p)t.removeAttribute(o),--b,--v,s.push(new fn(p,e.m.map(t,g)??$(g)));else switch(o){case"class":s.push(new Rn(m));break;case"style":s.push(new En(m));break;default:s.push(new An(m,o))}else Cr.node=t,Cr.attr=h,Cr.bindable=null,Cr.def=null,s.push(y.build(Cr,e.ep,e.m));else{if(w.isTemplateController)throw Fi(703,g);u=e.st(w),f=!1===w.noMultiBindings&&null===y&&br(m),f?c=this.ot(t,m,w,e):(d=u.primary,null===y?(p=n.parse(m,Mi),c=null===p?""===m?[]:[new bn(m,d.name)]:[new fn(p,d.name)]):(Cr.node=t,Cr.attr=h,Cr.bindable=d,Cr.def=w,c=[y.build(Cr,e.ep,e.m)])),t.removeAttribute(o),--b,--v,(l??=[]).push(new Cn(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(g)?g:void 0,c))}}return wr(),null!=l?l.concat(s):s}et(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.ut(t,e):this.ct(t,e);case 3:return this.ht(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.et(s,e);break}}return t.nextSibling}ut(t,e){const s=t.attributes,i=s.length,n=[],r=e.ep;let o,a,h,l,c,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=s[g],h=o.name,l=o.value,"to-binding-context"!==h)if(a=e.X.parse(h,l),u=a.target,d=a.rawValue,c=e.rt(a),null===c)p=r.parse(d,Mi),n.push(new xn(null===p?new _e(d):p,$(u)));else{if("bind"!==a.command)throw Fi(704,a);n.push(new xn(r.parse(d,ji),$(u)))}else f=!0;return e.rows.push([new $n(n,f)]),this.dt(t,e).nextSibling}ct(t,e){const s=t.nextSibling,i=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),n=e.it(i),r=null!==n,o=r&&null!=n.shadowOptions,a=n?.capture,h=null!=a&&"boolean"!=typeof a,l=a?[]:Pt,c=e.ep,u=this.debug?Bt:()=>{t.removeAttribute(f),--j,--B};let d,p,f,g,m,v,b,w,y,C,k,x,T,S,A,R,E,O,I,P,M=t.attributes,B=M.length,j=0,L=null,N=!1,D=null,V=!0,F=!1,_=!1,q=!1,U=0;if("slot"===i){if(null==e.root.def.shadowOptions)throw Fi(717,e.root.def.name);e.root.hasSlot=!0}for(r&&(I={},V=n.processContent?.call(n.Type,t,e.p,I),M=t.attributes,B=M.length);B>j;++j){switch(p=M[j],f=p.name,g=p.value,f){case"as-element":case"containerless":u(),F=F||"containerless"===f;continue}if(m=e.X.parse(f,g),D=e.rt(m),E=m.target,O=m.rawValue,a&&(!h||h&&a(E))){if(null!=D&&D.ignoreAttr){u(),l.push(m);continue}if(_=E!==cr&&"slot"!==E&&(-1===(U=E.indexOf("..."))||0===U&&"...$attrs"===E),_&&(A=e.st(n),null==A.attrs[E]&&!e.lt(E)?.isTemplateController)){u(),l.push(m);continue}}if("...$attrs"!==E)if(D?.ignoreAttr)Cr.node=t,Cr.attr=m,Cr.bindable=null,Cr.def=null,(v??=[]).push(D.build(Cr,e.ep,e.m)),u();else{if(0===E.indexOf("...")){if(r&&"$element"!==(E=E.slice(3))){(b??=[]).push(new Mn("$bindables","$bindables"===E?O:E)),u();continue}throw Fi(720,E)}if(r){if(A=e.st(n),w=A.attrs[E],void 0!==w){null===D?(T=c.parse(O,Mi),(b??=[]).push(null==T?new bn(O,w.name):new fn(T,w.name))):(Cr.node=t,Cr.attr=m,Cr.bindable=w,Cr.def=n,(b??=[]).push(D.build(Cr,e.ep,e.m))),u();continue}if("$bindables"===E){null!=D&&(Cr.node=t,Cr.attr=m,Cr.bindable=null,Cr.def=n,(b??=[]).push(D.build(Cr,e.ep,e.m))),u();continue}}if("$bindables"===E)throw Fi(721,t.nodeName,E,O);L=e.lt(E),null===L?null!==D?(Cr.node=t,Cr.attr=m,Cr.bindable=null,Cr.def=null,(v??=[]).push(D.build(Cr,e.ep,e.m)),u()):(T=c.parse(O,Mi),null!=T&&(u(),(v??=[]).push(new fn(T,e.m.map(t,E)??$(E))))):(A=e.st(L),N=!1===L.noMultiBindings&&null===D&&br(O),N?C=this.ot(t,O,L,e):(R=A.primary,null===D?(T=c.parse(O,Mi),C=null===T?""===O?[]:[new bn(O,R.name)]:[new fn(T,R.name)]):(Cr.node=t,Cr.attr=m,Cr.bindable=R,Cr.def=L,C=[D.build(Cr,e.ep,e.m)])),u(),L.isTemplateController?(k??=[]).push(new kn(yr,this.resolveResources?L:L.name,void 0,C)):(y??=[]).push(new Cn(this.resolveResources?L:L.name,null!=L.aliases&&L.aliases.includes(E)?E:void 0,C)))}else(v??=[]).push(new In),u()}if(wr(),this.ft(t,v)&&null!=v&&v.length>1&&this.gt(t,v),r&&(S=new yn(this.resolveResources?n:n.name,b??Pt,null,F,l,I)),null==v&&null==S&&null==y||(d=Pt.concat(S??Pt,y??Pt,v??Pt),q=!0),null!=k){let s;B=k.length-1,j=B,x=k[j],mr(t)?(s=e.t(),ar(s,[e.wt(),e.bt(sr),e.bt(ir)])):(this.At(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),or(s,t)));const a=s,h=e.yt(null==d?[]:[d]);let l,c,u,p,f,g,m,v,b=!1,w=0,y=0,C=t.firstChild,$=!1;if(!1!==V)for(;null!==C;){if(c=hr(C)?C.getAttribute(cr):null,b=null!==c||r&&!o,l=C.nextSibling,b){if(!r)throw Fi(706,c,i);C.removeAttribute?.(cr),$=lr(C)&&""===C.textContent.trim(),$||((p??={})[c||ur]??=[]).push(C),t.removeChild(C)}C=l}if(null!=p){for(c in u={},p){for(s=e.t(),f=p[c],w=0,y=f.length;y>w;++w)g=f[w],"TEMPLATE"===g.nodeName?g.attributes.length>0?or(s,g):or(s,g.content):or(s,g);v=e.yt(),this.et(s.content,v),u[c]={name:dr(),type:Li,template:s,instructions:v.rows,needsCompile:!1}}S.projections=u}if(q&&(r&&(F||n.containerless)?this.At(t,e):this.dt(t,e)),P=!r||!n.containerless&&!F&&!1!==V,P)if(t.nodeName===gr)this.et(t.content,h);else for(C=t.firstChild;null!==C;)C=this.et(C,h);for(x.def={name:dr(),type:Li,template:a,instructions:h.rows,needsCompile:!1};j-- >0;)x=k[j],s=e.t(),m=e.wt(),ar(s,[m,e.bt(sr),e.bt(ir)]),x.def={name:dr(),type:Li,template:s,needsCompile:!1,instructions:[[k[j+1]]]};e.rows.push([x])}else{null!=d&&e.rows.push(d);let s,a,h,l,c,u,p,f=t.firstChild,g=!1,m=null,v=!1,b=0,w=0;if(!1!==V)for(;null!==f;){if(a=hr(f)?f.getAttribute(cr):null,g=null!==a||r&&!o,s=f.nextSibling,g){if(!r)throw Fi(706,a,i);f.removeAttribute?.(cr),v=lr(f)&&""===f.textContent.trim(),v||((h??={})[a||ur]??=[]).push(f),t.removeChild(f)}f=s}if(null!=h){for(a in m={},h){for(u=e.t(),l=h[a],b=0,w=l.length;w>b;++b)c=l[b],c.nodeName===gr?c.attributes.length>0?or(u,c):or(u,c.content):or(u,c);p=e.yt(),this.et(u.content,p),m[a]={name:dr(),type:Li,template:u,instructions:p.rows,needsCompile:!1}}S.projections=m}if(q&&(r&&(F||n.containerless)?this.At(t,e):this.dt(t,e)),P=!r||!n.containerless&&!F&&!1!==V,P&&t.childNodes.length>0)for(f=t.firstChild;null!==f;)f=this.et(f,e)}return s}ht(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,Mi),n=t.nextSibling;let r,o,a,h,l;if(null!==i){for(({parts:r,expressions:o}=i),(l=r[0])&&nr(s,e.It(l),t),a=0,h=o.length;h>a;++a)rr(s,t,[e.wt(),e.It(" ")]),(l=r[a+1])&&nr(s,e.It(l),t),e.rows.push([new Tn(o[a])]);s.removeChild(t)}return n}ot(t,e,s,i){const n=i.st(s),r=e.length,o=[];let a,h,l,c,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),c=i.X.parse(a,h),u=i.rt(c),d=n.attrs[c.target],null==d)throw Fi(707,c.target,s.name);for(null===u?(l=i.ep.parse(h,Mi),o.push(null===l?new bn(h,d.name):new fn(l,d.name))):(Cr.node=t,Cr.attr=c,Cr.bindable=d,Cr.def=s,o.push(u.build(Cr,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return wr(),o}tt(t,e){const s=e.root.def.name,i=t,n=S(i.querySelectorAll("template[as-custom-element]")),r=n.length;if(0===r)return;if(r===i.childElementCount)throw Fi(708,s);const o=new Set,a=[];for(const t of n){if(t.parentNode!==i)throw Fi(709,s);const e=Rr(s,t,o),n=t.content,r=S(n.querySelectorAll("bindable")),h=new Set,l=new Set,c=r.reduce((t,s)=>{if(s.parentNode!==n)throw Fi(710,e);const i=s.getAttribute("name");if(null===i)throw Fi(711,s,e);const r=s.getAttribute("attribute");if(null!==r&&l.has(r)||h.has(i))throw Fi(712,h,r);null!==r&&l.add(r),h.add(i);const o=S(s.attributes).filter(t=>!Sr.includes(t.name));return o.length,s.remove(),t[i]={name:i,attribute:r??void 0,mode:s.getAttribute("mode")??"default"},t},{});class u{}u.$au={type:Li,name:e,template:t,bindables:c},Reflect.defineProperty(u,"name",{value:x(e)}),a.push(u),i.removeChild(t)}const h=(e.root.def.dependencies??[]).concat(null==e.root.def.Type?Pt:[e.root.def.Type]);for(const t of a)t.dependencies=h.concat(a.filter(e=>e!==t)),e.St(t)}ft(t,e){const s=t.nodeName;return"INPUT"===s&&1===$r[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some(t=>t.type===un&&"multiple"===t.to))}gt(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}dt(t,e){return nr(t.parentNode,e.bt("au*"),t),t}At(t,e){if(mr(t))return t;const s=t.parentNode,i=e.wt();return rr(s,t,[i,e.bt(sr),e.bt(ir)]),s.removeChild(t),i}}fr.register=_(Di);const gr="TEMPLATE",mr=t=>"au*"===t.nodeValue;class vr{constructor(t,e,s,i,n){this.hasSlot=!1,this.deps=null;const r=null!==s;if(this.c=e,this.root=null===i?this:i,this.def=t,this.parent=s,this.Bt=r?s.Bt:e.get(xr),this.Pt=r?s.Pt:e.get(Tr),this.Z=r?s.Z:e.get(Zn),this.X=r?s.X:e.get(tn),this.ep=r?s.ep:e.get(ns),this.m=r?s.m:e.get(Vi),this.Ct=r?s.Ct:e.get(Qt),"number"!=typeof(this.p=r?s.p:e.get(jt)).document?.nodeType)throw Fi(722);this.localEls=r?s.localEls:new Set,this.rows=n??[]}St(t){return(this.root.deps??=[]).push(t),this.root.c.register(t),this}It(t){return this.p.document.createTextNode(t)}bt(t){return this.p.document.createComment(t)}wt(){return this.bt("au*")}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}it(t){return this.Bt.el(this.c,t)}lt(t){return this.Bt.attr(this.c,t)}st(t){return this.Bt.bindables(t)}yt(t){return new vr(this.def,this.c,this,this.root,t)}rt(t){const e=t.command;return null===e?null:this.Pt.get(this.c,e)}}const br=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},wr=()=>{Cr.node=Cr.attr=Cr.bindable=Cr.def=null},yr={name:"unnamed",type:Li},Cr={node:null,attr:null,bindable:null,def:null},kr={id:!0,name:!0,"au-slot":!0,"as-element":!0},$r={checkbox:1,radio:1},xr=Ei("IResourceResolver"),Tr=Ei("IBindingCommandResolver",t=>t.singleton(class{constructor(){this.U=new WeakMap}get(t,e){let s=this.U.get(t);return s||this.U.set(t,s={}),e in s?s[e]:s[e]=Vn.get(t,e)}})),Sr=Oi(["name","attribute","mode"]),Ar="as-custom-element",Rr=(t,e,s)=>{const i=e.getAttribute(Ar);if(null===i||""===i)throw Fi(715,t);if(s.has(i))throw Fi(716,i,t);return s.add(i),e.removeAttribute(Ar),i},Er=Ei("ITemplateCompilerHooks"),Or=Oi({name:K("compiler-hooks"),define:t=>({register(e){Pi(Er,t).register(e)}}),findAll:t=>t.get(Ut(Er))}),Ir=Object.prototype.hasOwnProperty,Pr=Reflect.defineProperty;function Mr(t,e,s){return Pr(t,e,{configurable:!0,writable:!0,value:s}),s}function Br(t,e,s){e in t||Mr(t,e,s)}const jr=Object.assign,Lr=Object.freeze,Nr=String,Dr=xt.createInterface,Vr=n.get,Fr=n.define,_r=(t,...e)=>new Error(`AUR${Nr(t).padStart(4,"0")}:${e.map(Nr)}`);class qr{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw _r(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw _r(204);return new qr(null,t,e??new zr,s??!1)}static fromParent(t,e,s=new zr){if(null==t)throw _r(203);return new qr(t,e,s,!1)}}class Ur{constructor(t,e){void 0!==t&&(this[t]=e)}}class zr{}const{astAssign:Kr,astEvaluate:Hr,astBind:Gr,astUnbind:Wr}=(()=>{const t="AccessScope",e="AccessMember",s="AccessKeyed",i="Assign",n="ValueConverter",r="BindingBehavior",o="ForOfStatement",a="ArrayDestructuring",h="ObjectDestructuring",l="DestructuringAssignmentLeaf",c="Custom",d=qr.getContext;function p(b,w,y,C){switch(b.$kind){case"AccessThis":{let t=w.overrideContext,e=w,s=b.ancestor;for(;s--&&t;)e=e.parent,t=e?.overrideContext??null;return s<1&&e?e.bindingContext:void 0}case"AccessBoundary":{let t=w;for(;null!=t&&!t.isBoundary;)t=t.parent;return t?t.bindingContext:void 0}case t:{const t=d(w,b.name,b.ancestor);null!==C&&C.observe(t,b.name);const e=t[b.name];if(null==e){if("$host"===b.name)throw _r(105);return e}return y?.boundFn&&m(e)?e.bind(t):e}case"AccessGlobal":return globalThis[b.name];case"CallGlobal":{const t=globalThis[b.name];if(m(t))return t(...b.args.map(t=>p(t,w,y,C)));if(!y?.strict&&null==t)return;throw _r(107)}case"ArrayLiteral":return b.elements.map(t=>p(t,w,y,C));case"ObjectLiteral":{const t={};for(let e=0;e<b.keys.length;++e)t[b.keys[e]]=p(b.values[e],w,y,C);return t}case"PrimitiveLiteral":return b.value;case"New":{const t=p(b.func,w,y,C);if(m(t))return new t(...b.args.map(t=>p(t,w,y,C)));throw _r(107)}case"Template":{let t=b.cooked[0];for(let e=0;e<b.expressions.length;++e)t+=Nr(p(b.expressions[e],w,y,C)),t+=b.cooked[e+1];return t}case"Unary":{const t=p(b.expression,w,y,C);switch(b.operation){case"void":return;case"typeof":return typeof t;case"!":return!t;case"-":return-t;case"+":return+t;case"--":if(null!=C)throw _r(113);return f(b.expression,w,y,C,t-1)+b.pos;case"++":if(null!=C)throw _r(113);return f(b.expression,w,y,C,t+1)-b.pos;default:throw _r(109,b.operation)}}case"CallScope":{const t=d(w,b.name,b.ancestor);if(null==t){if(y?.strict)throw _r(114,b.name,t);return}const e=t[b.name];if(m(e))return e.apply(t,b.args.map(t=>p(t,w,y,C)));if(null==e){if(y?.strict&&!b.optional)throw _r(111,b.name);return}throw _r(111,b.name)}case"CallMember":{const t=p(b.object,w,y,C);if(null==t&&y?.strict&&!b.optionalMember)throw _r(114,b.name,t);const e=t?.[b.name];if(null==e){if(!b.optionalCall&&y?.strict)throw _r(111,b.name);return}if(!m(e))throw _r(111,b.name);const s=e.apply(t,b.args.map(t=>p(t,w,y,C)));return u(t)&&v.includes(b.name)&&C?.observeCollection(t),s}case"CallFunction":{const t=p(b.func,w,y,C);if(m(t))return t(...b.args.map(t=>p(t,w,y,C)));if(null==t){if(!b.optional&&y?.strict)throw _r(107);return}throw _r(107)}case"ArrowFunction":{const t=(...t)=>{const e=b.args,s=b.rest,i=e.length-1,n=e.reduce((e,n,r)=>(e[n.name]=s&&r===i?t.slice(r):t[r],e),{}),r=qr.fromParent(w,n);return p(b.body,r,y,C)};return t}case e:{const t=p(b.object,w,y,C);if(null==t){if(!b.optional&&y?.strict)throw _r(114,b.name,t);return}null===C||b.accessGlobal||C.observe(t,b.name);const e=t[b.name];return y?.boundFn&&m(e)?e.bind(t):e}case s:{const t=p(b.object,w,y,C),e=p(b.key,w,y,C);if(null==t){if(!b.optional&&y?.strict)throw _r(115,e,t);return}return null===C||b.accessGlobal||C.observe(t,e),t[e]}case"TaggedTemplate":{const t=b.expressions.map(t=>p(t,w,y,C)),e=p(b.func,w,y,C);if(!m(e))throw _r(110);return e(b.cooked,...t)}case"Binary":{const t=b.left,e=b.right;switch(b.operation){case"&&":return p(t,w,y,C)&&p(e,w,y,C);case"||":return p(t,w,y,C)||p(e,w,y,C);case"??":return p(t,w,y,C)??p(e,w,y,C);case"==":return p(t,w,y,C)==p(e,w,y,C);case"===":return p(t,w,y,C)===p(e,w,y,C);case"!=":return p(t,w,y,C)!=p(e,w,y,C);case"!==":return p(t,w,y,C)!==p(e,w,y,C);case"instanceof":{const s=p(e,w,y,C);return!!m(s)&&p(t,w,y,C)instanceof s}case"in":{const s=p(e,w,y,C);return!!g(s)&&p(t,w,y,C)in s}case"+":return p(t,w,y,C)+p(e,w,y,C);case"-":return p(t,w,y,C)-p(e,w,y,C);case"*":return p(t,w,y,C)*p(e,w,y,C);case"/":return p(t,w,y,C)/p(e,w,y,C);case"%":return p(t,w,y,C)%p(e,w,y,C);case"**":return p(t,w,y,C)**p(e,w,y,C);case"<":return p(t,w,y,C)<p(e,w,y,C);case">":return p(t,w,y,C)>p(e,w,y,C);case"<=":return p(t,w,y,C)<=p(e,w,y,C);case">=":return p(t,w,y,C)>=p(e,w,y,C);default:throw _r(108,b.operation)}}case"Conditional":return p(b.condition,w,y,C)?p(b.yes,w,y,C):p(b.no,w,y,C);case i:{let t=p(b.value,w,y,C);if("="!==b.op){if(null!=C)throw _r(113);const e=p(b.target,w,y,C);switch(b.op){case"/=":t=e/t;break;case"*=":t*=e;break;case"+=":t=e+t;break;case"-=":t=e-t;break;default:throw _r(108,b.op)}}return f(b.target,w,y,C,t)}case n:return y?.useConverter?.(b.name,"toView",p(b.expression,w,y,C),b.args.map(t=>p(t,w,y,C)));case r:return p(b.expression,w,y,C);case"BindingIdentifier":return b.name;case o:return p(b.iterable,w,y,C);case"Interpolation":if(b.isMulti){let t=b.parts[0],e=0;for(;e<b.expressions.length;++e)t+=Nr(p(b.expressions[e],w,y,C)),t+=b.parts[e+1];return t}return`${b.parts[0]}${p(b.firstExpression,w,y,C)}${b.parts[1]}`;case l:return p(b.target,w,y,C);case a:return b.list.map(t=>p(t,w,y,C));case"ArrayBindingPattern":case"ObjectBindingPattern":case h:default:return;case c:return b.evaluate(w,y,C)}}function f(o,m,v,b,w){switch(o.$kind){case t:if("$host"===o.name)throw _r(106);return d(m,o.name,o.ancestor)[o.name]=w;case e:{const t=p(o.object,m,v,b);if(null==t){if(v?.strict)throw _r(116,o.name);f(o.object,m,v,b,{[o.name]:w})}else g(t)&&("length"===o.name&&u(t)&&!isNaN(w)?t.splice(w):t[o.name]=w);return w}case s:{const t=p(o.object,m,v,b),e=p(o.key,m,v,b);if(null==t){if(v?.strict)throw _r(116,e);return f(o.object,m,v,b,{[e]:w}),w}if(u(t)){if("length"===e&&!isNaN(w))return t.splice(w),w;if(C(e))return t.splice(e,1,w),w}return t[e]=w}case i:return f(o.value,m,v,b,w),f(o.target,m,v,b,w);case n:return w=v?.useConverter?.(o.name,"fromView",w,o.args.map(t=>p(t,m,v,b))),f(o.expression,m,v,b,w);case r:return f(o.expression,m,v,b,w);case a:case h:{const t=o.list,e=t.length;let s,i;for(s=0;s<e;s++)switch(i=t[s],i.$kind){case l:f(i,m,v,b,w);break;case a:case h:{if("object"!=typeof w||null===w)throw _r(112);let t=p(i.source,qr.create(w),v,null);void 0===t&&i.initializer&&(t=p(i.initializer,m,v,null)),f(i,m,v,b,t);break}}break}case l:if(o instanceof Qe){if(null==w)return;if("object"!=typeof w)throw _r(112);let t=p(o.source,qr.create(w),v,b);void 0===t&&o.initializer&&(t=p(o.initializer,m,v,b)),f(o.target,m,v,b,t)}else{if(null==w)return;if("object"!=typeof w)throw _r(112);const t=o.indexOrProperties;let e;if(C(t)){if(!Array.isArray(w))throw _r(112);e=w.slice(t)}else e=Object.entries(w).reduce((e,[s,i])=>(t.includes(s)||(e[s]=i),e),{});f(o.target,m,v,b,e)}break;case c:return o.assign(m,v,w);default:return}}const v="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:p,astAssign:f,astBind:function t(e,s,i){switch(e.$kind){case r:i.bindBehavior?.(e.name,s,e.args.map(t=>p(t,s,i,null))),t(e.expression,s,i);break;case n:i.bindConverter?.(e.name),t(e.expression,s,i);break;case o:t(e.iterable,s,i);break;case c:e.bind?.(s,i)}},astUnbind:function t(e,s,i){switch(e.$kind){case r:i.unbindBehavior?.(e.name,s),t(e.expression,s,i);break;case n:i.unbindConverter?.(e.name),t(e.expression,s,i);break;case o:t(e.iterable,s,i);break;case c:e.unbind?.(s,i)}}}})(),Xr=t=>{const e=t.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{Mr(e,t,()=>{throw _r(99,t)})})},Jr="pending",Yr="completed",Qr="canceled",Zr=Promise.resolve();let to=!1,eo=!1;const so=[],io=[];let no=0,ro=null,oo=[],ao=null,ho=null;const lo=()=>{to||(to=!0,Zr.then(()=>{to=!1,eo=!0,uo()}))},co=t=>{if(ro&&0===so.length&&0===no)if(ro=null,oo.length>0){const t=oo;oo=[],1===t.length?ho(t[0]):ho(new AggregateError(t,"One or more tasks failed."))}else ao(t)},uo=()=>{const t=!eo;eo=!1,ro??=new Promise((t,e)=>{ao=t,ho=e});let e=-so.length;const s=0===so.length;for(;so.length>0;){if(++e>1e4){const t=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw so.length=0,ho?.(t),ro=null,t}const s=so.shift();if("function"==typeof s)try{s()}catch(t){oo.push(t)}else s.run()}const i=oo.slice();if(co(!s),t&&i.length>0)throw 1===i.length?i[0]:new AggregateError(i,"One or more tasks failed.")},po=t=>{lo(),so.push(t)},fo=(t,e)=>{const s=new mo(t,e?.delay);return null!=s.delay&&s.delay>0?(++no,s.t=setTimeout(()=>{--no,s.t=void 0,s.status!==Qr?(so.push(s),lo()):co(!0)},s.delay)):(so.push(s),lo()),s};class go extends Error{constructor(t){super(`Task ${t.id} was canceled.`),this.task=t}}class mo{get result(){return this.i}get status(){return this.u}constructor(t,e){this.callback=t,this.delay=e,this.id=++mo.h,this.u=Jr,this.i=new Promise((t,e)=>{this.C=t,this.A=e})}run(){if(this.u!==Jr)throw new Error(`Cannot run task in ${this.u} state`);let t;this.u="running";try{t=this.callback()}catch(t){return this.u=Qr,this.A(t),void oo.push(t)}t instanceof Promise?(++no,t.then(t=>{this.u=Yr,this.C(t)}).catch(t=>{this.u=Qr,this.A(t),oo.push(t)}).finally(()=>{--no,co(!0)})):(this.u=Yr,this.C(t))}cancel(){if(void 0!==this.t){clearTimeout(this.t),--no,this.t=void 0,this.u=Qr;const t=new go(this);return this.A(t),this.i.catch(Bt),co(!0),!0}if(this.u===Jr){const t=so.indexOf(this);if(t>-1){so.splice(t,1),this.u=Qr;const e=new go(this);return this.A(e),this.i.catch(Bt),co(!0),!0}}return!1}}mo.h=0;class vo{constructor(t,e){this.cb=t,this.P=e,this.id=++vo.R,this.I=!1,this._=[]}run(){try{this.cb()}catch(t){return void oo.push(t)}}O(){this.I||(this.t=setTimeout(()=>{this.M(),this.I||this.O()},this.P))}M(){so.push(this),lo();const t=this._.splice(0);for(const e of t)e()}next(){return this.I?Promise.resolve():new Promise(t=>this._.push(t))}cancel(){this.I=!0,void 0!==this.t&&(clearTimeout(this.t),this.t=void 0);const t=io.indexOf(this);t>-1&&io.splice(t,1);const e=this._.splice(0);for(const t of e)t()}}vo.R=0;const bo=xt.createInterface("ICoercionConfiguration"),wo=Lr({None:0,Observer:1,Node:2,Layout:4});function yo(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;const Co=(()=>{function t(){return Mr(this,"subs",new r)}function e(t){return this.subs.add(t)}function s(t){return this.subs.remove(t)}const i=new WeakSet;function n(n,r){if(!i.has(n)){i.add(n);const r=n.prototype;Pr(r,"subs",{get:t}),Br(r,"subscribe",e),Br(r,"unsubscribe",s)}return n}class r{constructor(){this.count=0,this.T=[],this.L=[],this.N=!1}add(t){return!this.T.includes(t)&&(this.T[this.T.length]=t,"handleDirty"in t&&(this.L[this.L.length]=t,this.N=!0),++this.count,!0)}remove(t){let e=this.T.indexOf(t);return-1!==e&&(this.T.splice(e,1),e=this.L.indexOf(t),-1!==e&&(this.L.splice(e,1),this.N=this.L.length>0),--this.count,!0)}notify(t,e){for(const s of this.T.slice(0))s.handleChange(t,e)}notifyCollection(t,e){const s=this.T.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}notifyDirty(){if(this.N)for(const t of this.L.slice(0))t.handleDirty()}}return function(t,e){return null==t?n:n(t)}})();class ko{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleDirty(){this.v!==this.o.length&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&(this.subs.notifyDirty(),this.subs.notify(this.v,s))}}xo(ko);class $o{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw _r(220)}handleDirty(){this.v!==this.o.size&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function xo(t){const e=t.prototype;return Br(e,"subscribe",To),Br(e,"unsubscribe",So),Co(t,null)}function To(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function So(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}xo($o);const Ao=(()=>{const t=Symbol.for("__au_arr_obs__"),e=Array[t]??Mr(Array,t,new WeakMap);function s(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function i(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function n(t,e,s,i,n){let r,o,a,h,l,c,u;for(c=s+1;c<i;c++){for(r=t[c],o=e[c],u=c-1;u>=s&&(a=t[u],h=e[u],l=n(a,r),l>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function r(t,e,s,i,o){let a,h,l,c,u,d,p,f,g,m,v,b,w,y,C,k,$,x,T,S=0,A=0;for(;;){if(i-s<=10)return void n(t,e,s,i,o);S=s+(i-s>>1),a=t[s],c=e[s],h=t[i-1],u=e[i-1],l=t[S],d=e[S],p=o(a,h),p>0&&(m=a,v=c,a=h,c=u,h=m,u=v),f=o(a,l),f>=0?(m=a,v=c,a=l,c=d,l=h,d=u,h=m,u=v):(g=o(h,l),g>0&&(m=h,v=u,h=l,u=d,l=m,d=v)),t[s]=a,e[s]=c,t[i-1]=l,e[i-1]=d,b=h,w=u,y=s+1,C=i-1,t[S]=t[y],e[S]=e[y],t[y]=b,e[y]=w;t:for(A=y+1;A<C;A++)if(k=t[A],$=e[A],x=o(k,b),x<0)t[A]=t[y],e[A]=e[y],t[y]=k,e[y]=$,y++;else if(x>0){do{if(C--,C==A)break t;T=t[C],x=o(T,b)}while(x>0);t[A]=t[C],e[A]=e[C],t[C]=k,e[C]=$,x<0&&(k=t[A],$=e[A],t[A]=t[y],e[A]=e[y],t[y]=k,e[y]=$,y++)}i-C<y-s?(r(t,e,C,i,o),i=y):(r(t,e,s,y,o),s=C)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let h,l=!1;const c="__au_arr_on__";function u(){if(void 0===h&&function(){const t=o.push,n=o.unshift,l=o.pop,c=o.shift,u=o.splice,d=o.reverse,p=o.sort;h={push:function(...s){const i=e.get(this);if(void 0===i)return t.apply(this,s);const n=this.length,r=s.length;if(0===r)return n;this.length=i.indexMap.length=n+r;let o=n;for(;o<this.length;)this[o]=s[o-n],i.indexMap[o]=-2,o++;return i.notify(),this.length},unshift:function(...t){const s=e.get(this);if(void 0===s)return n.apply(this,t);const i=t.length,r=new Array(i);let o=0;for(;o<i;)r[o++]=-2;n.apply(s.indexMap,r);const a=n.apply(this,t);return s.notify(),a},pop:function(){const t=e.get(this);if(void 0===t)return l.call(this);const s=t.indexMap,i=l.call(this),n=s.length-1;return s[n]>-1&&(s.deletedIndices.push(s[n]),s.deletedItems.push(i)),l.call(s),t.notify(),i},shift:function(){const t=e.get(this);if(void 0===t)return c.call(this);const s=t.indexMap,i=c.call(this);return s[0]>-1&&(s.deletedIndices.push(s[0]),s.deletedItems.push(i)),c.call(s),t.notify(),i},splice:function(...t){const s=t[0],i=t[1],n=e.get(this);if(void 0===n)return u.apply(this,t);const r=this.length,o=0|s,a=o<0?Math.max(r+o,0):Math.min(o,r),h=n.indexMap,l=t.length,c=0===l?0:1===l?r-a:i;let d=a;if(c>0){const t=d+c;for(;d<t;)h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(this[d])),d++}if(d=0,l>2){const t=l-2,e=new Array(t);for(;d<t;)e[d++]=-2;u.call(h,s,i,...e)}else u.apply(h,t);const p=u.apply(this,t);return(c>0||d>0)&&n.notify(),p},reverse:function(){const t=e.get(this);if(void 0===t)return d.call(this),this;const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const e=s-n-1,i=this[n],r=t.indexMap[n],o=this[e],a=t.indexMap[e];this[n]=o,t.indexMap[n]=a,this[e]=i,t.indexMap[e]=r,n++}return t.notify(),this},sort:function(t){const n=e.get(this);if(void 0===n)return p.call(this,t),this;let o=this.length;if(o<2)return this;r(this,n.indexMap,0,o,i);let a=0;for(;a<o&&void 0!==this[a];)a++;void 0!==t&&m(t)||(t=s),r(this,n.indexMap,0,a,t);let h=!1;for(a=0,o=n.indexMap.length;o>a;++a)if(n.indexMap[a]!==a){h=!0;break}return h&&n.notify(),this}};for(const t of a)Pr(h[t],"observing",{value:!0})}(),!Vr(c,Array)){Fr(!0,Array,c);for(const t of a)!0!==o[t].observing&&Mr(o,t,h[t])}}class d{constructor(t){this.type=1,l||(l=!0,u()),this.indexObservers={},this.collection=t,this.indexMap=yo(t.length),this.lenObs=void 0,e.set(t,this)}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.length;this.indexMap=yo(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new ko(this)}getIndexObserver(t){return this.indexObservers[t]??=new p(this,t)}}Co(d,null);class p{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}return Co(p,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new d(t)),u()),s}})(),Ro=(()=>{const t=Symbol.for("__au_set_obs__"),e=Set[t]??Mr(Set,t,new WeakMap),{add:s,clear:i,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(t){const i=e.get(this);if(void 0===i)return s.call(this,t),this;const n=this.size;return s.call(this,t),this.size===n||(i.indexMap[n]=-2,i.notify()),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}i++}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=yo(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=yo(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new $o(this)}}return Co(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)Mr(t,e,o[e])}(t)),s}})(),Eo=(()=>{const t=Symbol.for("__au_map_obs__"),e=Map[t]??Mr(Map,t,new WeakMap),{set:s,clear:i,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(t,i){const n=e.get(this);if(void 0===n)return s.call(this,t,i),this;const r=this.get(t),o=this.size;if(s.call(this,t,i),this.size===o){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==r&&(n.indexMap.deletedIndices.push(n.indexMap[e]),n.indexMap.deletedItems.push(s),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[o]=-2,n.notify(),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}++i}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=yo(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=yo(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new $o(this)}}return Co(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)Mr(t,e,o[e])}(t)),s}})(),Oo=(()=>{class t{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(s,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(t,e){e.unsubscribe(this.b)}function s(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function i(){return Mr(this,"obs",new t(this))}function n(t,e){this.obs.add(this.oL.getObserver(t,e))}function r(t){let e;if(u(t))e=Ao(t);else if(d(t))e=Ro(t);else{if(!p(t))throw _r(210,t);e=Eo(t)}this.obs.add(e)}function o(t){this.obs.add(t)}function a(){throw _r(99,"handleChange")}function h(){throw _r(99,"handleCollectionChange")}return function(t,e){const s=t.prototype;return Br(s,"observe",n),Br(s,"observeCollection",r),Br(s,"subscribeTo",o),Pr(s,"obs",{get:i}),Br(s,"handleChange",a),Br(s,"handleCollectionChange",h),t}})();function Io(t,e){return null==t?Oo:Oo(t,e)}let Po=null;const Mo=[];let Bo=!1;function jo(){return Po}function Lo(t){if(null==t)throw _r(206);if(null==Po)return Po=t,Mo[0]=Po,void(Bo=!0);if(Po===t)throw _r(207);Mo.push(t),Po=t,Bo=!0}function No(t){if(null==t)throw _r(208);if(Po!==t)throw _r(209);Mo.pop(),Po=Mo.length>0?Mo[Mo.length-1]:null,Bo=null!=Po}const Do=Lr({get current(){return Po},get connecting(){return Bo},enter:Lo,exit:No,pause:function(){Bo=!1},resume:function(){Bo=!0}}),Vo=Reflect.get,Fo=Object.prototype.toString,_o=new WeakMap;function qo(t){switch(Fo.call(t)){case"[object Object]":return!0!==t.constructor.__au_nw__;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Uo="__raw__";function zo(t){return qo(t)?Ko(t):t}function Ko(t){return _o.get(t)??function(t){const e=u(t)?Jo:p(t)||d(t)?wa:Xo,s=new Proxy(t,e);return _o.set(t,s),_o.set(s,s),s}(t)}function Ho(t){return t[Uo]??t}function Go(t){return qo(t)&&t[Uo]||t}function Wo(t,e){if("constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${Nr(e)}__`])return!0;const s=Reflect.getOwnPropertyDescriptor(t,e);return!1===s?.configurable&&!1===s.writable}const Xo={get(t,e,s){if(e===Uo)return t;const i=jo();return!Bo||Wo(t,e)||null==i?Vo(t,e,s):(i.observe(t,e),zo(Vo(t,e,s)))},deleteProperty:(t,e)=>delete t[e]},Jo={get(t,e,s){if(e===Uo)return t;if(!Bo||Wo(t,e)||null==Po)return Vo(t,e,s);switch(e){case"length":return Po.observe(t,"length"),t.length;case"map":return Yo;case"includes":return ta;case"indexOf":return ea;case"lastIndexOf":return sa;case"every":return Qo;case"filter":return Zo;case"find":return na;case"findIndex":return ia;case"flat":return ra;case"flatMap":return oa;case"join":return aa;case"push":return la;case"pop":return ha;case"reduce":return va;case"reduceRight":return ba;case"reverse":return pa;case"shift":return ca;case"unshift":return ua;case"slice":return ma;case"splice":return da;case"some":return fa;case"sort":return ga;case"keys":return Aa;case"values":case Symbol.iterator:return Ra;case"entries":return Ea}return Po.observe(t,e),zo(Vo(t,e,s))},ownKeys:t=>(jo()?.observe(t,"length"),Reflect.ownKeys(t))};function Yo(t,e){const s=Ho(this),i=s.map((s,i)=>Go(t.call(e,zo(s),i,this)));return Oa(Po,s),zo(i)}function Qo(t,e){const s=Ho(this),i=s.every((s,i)=>t.call(e,zo(s),i,this));return Oa(Po,s),i}function Zo(t,e){const s=Ho(this),i=s.filter((s,i)=>Go(t.call(e,zo(s),i,this)));return Oa(Po,s),zo(i)}function ta(t){const e=Ho(this),s=e.includes(Go(t));return Oa(Po,e),s}function ea(t){const e=Ho(this),s=e.indexOf(Go(t));return Oa(Po,e),s}function sa(t){const e=Ho(this),s=e.lastIndexOf(Go(t));return Oa(Po,e),s}function ia(t,e){const s=Ho(this),i=s.findIndex((s,i)=>Go(t.call(e,zo(s),i,this)));return Oa(Po,s),i}function na(t,e){const s=Ho(this),i=s.find((e,s)=>t(zo(e),s,this),e);return Oa(Po,s),zo(i)}function ra(){const t=Ho(this);return Oa(Po,t),zo(t.flat())}function oa(t,e){const s=Ho(this);return Oa(Po,s),Ko(s.flatMap((s,i)=>zo(t.call(e,zo(s),i,this))))}function aa(t){const e=Ho(this);return Oa(Po,e),e.join(t)}function ha(){return zo(Ho(this).pop())}function la(...t){return Ho(this).push(...t)}function ca(){return zo(Ho(this).shift())}function ua(...t){return Ho(this).unshift(...t)}function da(...t){return zo(Ho(this).splice(...t))}function pa(...t){return zo(Ho(this).reverse())}function fa(t,e){const s=Ho(this),i=s.some((s,i)=>Go(t.call(e,zo(s),i,this)));return Oa(Po,s),i}function ga(t){const e=Ho(this),s=e.sort(t);return Oa(Po,e),zo(s)}function ma(t,e){const s=Ho(this);return Oa(Po,s),Ko(s.slice(t,e))}function va(t,e){const s=Ho(this),i=s.reduce((e,s,i)=>t(e,zo(s),i,this),e);return Oa(Po,s),zo(i)}function ba(t,e){const s=Ho(this),i=s.reduceRight((e,s,i)=>t(e,zo(s),i,this),e);return Oa(Po,s),zo(i)}const wa={get(t,e,s){if(e===Uo)return t;const i=jo();if(!Bo||Wo(t,e)||null==i)return Vo(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Ta;case"delete":return Sa;case"forEach":return ya;case"add":if(d(t))return xa;break;case"get":if(p(t))return ka;break;case"set":if(p(t))return $a;break;case"has":return Ca;case"keys":return Aa;case"values":return Ra;case"entries":return Ea;case Symbol.iterator:return p(t)?Ea:Ra}return zo(Vo(t,e,s))}};function ya(t,e){const s=Ho(this);return Oa(Po,s),s.forEach((s,i)=>{t.call(e,zo(s),zo(i),this)})}function Ca(t){const e=Ho(this);return Oa(Po,e),e.has(Go(t))}function ka(t){const e=Ho(this);return Oa(Po,e),zo(e.get(Go(t)))}function $a(t,e){return zo(Ho(this).set(Go(t),Go(e)))}function xa(t){return zo(Ho(this).add(Go(t)))}function Ta(){return zo(Ho(this).clear())}function Sa(t){return zo(Ho(this).delete(Go(t)))}function Aa(){const t=Ho(this);Oa(Po,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:zo(s),done:i}},[Symbol.iterator](){return this}}}function Ra(){const t=Ho(this);Oa(Po,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:zo(s),done:i}},[Symbol.iterator](){return this}}}function Ea(){const t=Ho(this);Oa(Po,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[zo(s[0]),zo(s[1])],done:i}},[Symbol.iterator](){return this}}}const Oa=(t,e)=>t?.observeCollection(e),Ia=Lr({getProxy:Ko,getRaw:Ho,wrap:zo,unwrap:Go,rawKey:Uo});class Pa{constructor(t,e,s,i,n="async"){this.type=1,this.ov=void 0,this.v=void 0,this.V=!1,this.B=!1,this.D=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.H=zo(t),this.$get=e,this.$set=s,this.oL=i,this.$=n}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1,this.V=!1),this.v)}setValue(t){if(!m(this.$set))throw _r(221);void 0!==this.j&&(t=this.j.call(null,t,this.F)),w(t,this.v)||(this.$set.call(this.o,t),this.run())}useCoercer(t,e){return this.j=t,this.F=e,!0}useCallback(t){return this.cb=t,!0}handleDirty(){this.D||(this.D=!0,this.subs.notifyDirty())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.compute(),this.D=!1,this.V=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll(),this.ov=void 0,this.V=!0)}run(){"sync"!==this.$?this.B||(this.B=!0,po(()=>{this.B=!1,this.U()})):this.U()}U(){const t=this.v,e=this.ov,s=this.compute();this.D=!1,this.V&&w(s,t)||(this.cb?.(s,e),this.subs.notify(s,e),this.ov=this.v=s,this.V=!0)}compute(){this.obs.version++;try{return Lo(this),this.v=Go(this.$get.call(this.H,this.H,this))}finally{this.obs.clear(),No(this)}}}Io(Pa,null),Co(Pa,null),"function"==typeof SuppressedError&&SuppressedError;const Ma=(()=>{const t=new WeakMap,e=t=>(t=>"symbol"==typeof t)(t)?t:String(t);return{get:(s,i)=>t.get(s)?.get(e(i)),W:(s,i)=>t.get(s)?.get(e(i))?.flush,set:(s,i,n)=>{t.has(s)||t.set(s,new Map),t.get(s).set(e(i),n)}}})(),Ba=Dr("IDirtyChecker",void 0),ja={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class La{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.G=t}getValue(){return this.obj[this.key]}setValue(t){throw _r(219,this.key)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.G.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.G.removeProperty(this)}}class Na{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Da{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class Va{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){void 0!==this.j&&(t=this.j.call(void 0,t,this.F));const e=this.v;if(this.iO){if(w(t,this.v))return;this.v=t,this.subs.notifyDirty(),this.subs.notify(t,e),w(t,this.v)&&this.cb?.(t,e)}else this.v=this.o[this.k]=t,this.cb?.(t,e)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.j=t,this.F=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Pr(this.o,this.k,{enumerable:!0,configurable:!0,get:jr(()=>this.getValue(),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(Pr(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}Co(Va,null);const Fa=new Da,_a=Dr("IObserverLocator",t=>t.singleton(Ka)),qa=Dr("INodeObserverLocator",t=>t.cachedCallback(t=>new Ua));class Ua{handles(){return!1}getObserver(){return Fa}getAccessor(){return Fa}}const za=Dr("IComputedObserverLocator",t=>t.singleton(class{getObserver(t,e,s,i){const n=new Pa(t,s.get,s.set,i,Ma.W(t,e));return Pr(t,e,{enumerable:s.enumerable,configurable:!0,get:jr(()=>n.getValue(),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}}));class Ka{constructor(){this.J=[],this.G=lt(Ba),this.X=lt(qa),this.Y=lt(za)}addAdapter(t){this.J.push(t)}getObserver(t,e){if(null==t)throw _r(199,e);if(!f(t))return new Na(t,m(e)?"":e);if(m(e))return new Pa(t,e,void 0,this);const s=Xa(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.X.handles(t,e,this)?this.X.getAccessor(t,e,this):Fa}getArrayObserver(t){return Ao(t)}getMapObserver(t){return Eo(t)}getSetObserver(t){return Ro(t)}createObserver(t,e){if(this.X.handles(t,e,this))return this.X.getObserver(t,e,this);switch(e){case"length":if(u(t))return Ao(t).getLengthObserver();break;case"size":if(p(t))return Eo(t).getLengthObserver();if(d(t))return Ro(t).getLengthObserver();break;default:if(u(t)&&C(e))return Ao(t).getIndexObserver(Number(e))}let s=Wa(t,e);if(void 0===s){let i=Ga(t);for(;null!==i&&(s=Wa(i,e),void 0===s);)i=Ga(i)}if(void 0!==s&&!Ir.call(s,"value")){let i=this.Z(t,e,s);return null==i&&(i=(s.get?.getObserver)?.(t)),null==i?s.configurable?this.Y.getObserver(t,e,s,this):this.G.createProperty(t,e):i}return new Va(t,e)}Z(t,e,s){if(this.J.length>0)for(const i of this.J){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}const Ha=t=>{let e;return u(t)?e=Ao(t):p(t)?e=Eo(t):d(t)&&(e=Ro(t)),e},Ga=Object.getPrototypeOf,Wa=Object.getOwnPropertyDescriptor,Xa=t=>{let e=t.$observers;return void 0===e&&Pr(t,"$observers",{value:e=b()}),e};Io(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this.et=void 0,this.run=()=>{if(this.stopped)throw _r(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{this.et?.call(void 0),Lo(this),this.et=this.fn(this)}finally{this.obs.clear(),this.running=!1,No(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,_r(226);this.run()}else this.runCount=0}},this.stop=()=>{this.et?.call(void 0),this.et=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}},null);class Ja{constructor(t,e,s,i){this.oL=e,this.v=void 0,this.boundFn=!1,this.s=t,this.ast=s,this.cb=i}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const t=this.v,e=Hr(this.ast,this.s,this,this);this.obs.clear(),w(e,t)||(this.v=e,this.cb.call(void 0,e,t))}stop(){this.obs.clearAll(),this.v=void 0}}Io(Ja,null),Xr(Ja);const Ya="pending",Qa="running",Za="completed",th="canceled",eh=new Map,sh=t=>()=>{throw vh(`AUR1005:${t}`)};class ih{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??sh(s)}),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??sh("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new nh(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=eh.get(t);return void 0===s&&eh.set(t,s=new ih(t,e)),s}static set(t,e){eh.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class nh{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(fh)&&this.h.every(fh)&&this.u.every(fh)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.M=0,this.P=0,this.U=()=>{this.R||(this.R=!0,this.M=this.q(),this.$request())},this.q=t.performanceNow,this.I=new hh(t.console)}flush(t=this.q()){if(this.R=!1,this.P=t,void 0===this.$){let e,s;if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));for(;this.i.length>0;)if((s=this.i.shift()).run(),s.status===Qa){if(!0===s.suspend)return this.$=s,void this.U();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));if((this.i.length>0||this.u.length>0||this.t>0)&&this.U(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.U()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=ph()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,suspend:r}={...lh,...e};if(i){if(s>0)throw gh();if(n)throw mh()}0===this.i.length&&this.U();const o=this.q(),a=new ah(this.I,this,o,o+s,i,n,r,t);return i?this.i[this.i.length]=a:0===s?this.h[this.h.length]=a:this.u[this.u.length]=a,a}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw vh(`Task #${t.id} could not be found`);this.u.splice(e,1)}}_(t){t.reset(this.q()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}C(t){if(!0===t.suspend){if(this.$!==t)throw vh(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class rh extends Error{constructor(t){super("Task was canceled."),this.task=t}}let oh=0;class ah{get result(){const t=this.N;if(void 0===t)switch(this.j){case Ya:{const t=this.N=ph();return this.F=t.resolve,this.O=t.reject,t}case Qa:throw vh("Trying to await task from within task will cause a deadlock.");case Za:return this.N=Promise.resolve();case th:return this.N=Promise.reject(new rh(this))}return t}get status(){return this.j}constructor(t,e,s,i,n,r,o,a){this.taskQueue=e,this.createdTime=s,this.queueTime=i,this.preempt=n,this.persistent=r,this.suspend=o,this.callback=a,this.id=++oh,this.F=void 0,this.O=void 0,this.N=void 0,this.j=Ya,this.I=t}run(t=this.taskQueue.platform.performanceNow()){if(this.j!==Ya)throw vh(`Cannot run task in ${this.j} state`);const{persistent:e,taskQueue:s,callback:i,F:n,O:r,createdTime:o}=this;let a;this.j=Qa;try{a=i(t-o),a instanceof Promise?a.then(t=>{this.persistent?s._(this):(this.j=e?th:Za,this.dispose()),s.C(this),void 0!==n&&n(t)}).catch(t=>{if(this.persistent||this.dispose(),s.C(this),void 0===r)throw t;r(t)}):(this.persistent?s._(this):(this.j=e?th:Za,this.dispose()),void 0!==n&&n(a))}catch(t){if(this.persistent||this.dispose(),void 0===r)throw t;r(t)}}cancel(){if(this.j===Ya){const t=this.taskQueue,e=this.O;return t.remove(this),t.isEmpty&&t.cancel(),this.j=th,this.dispose(),void 0!==e&&e(new rh(this)),!0}return!(this.j!==Qa||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.j=Ya,this.F=void 0,this.O=void 0,this.N=void 0}dispose(){this.callback=void 0,this.F=void 0,this.O=void 0,this.N=void 0}}class hh{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof nh){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.persistent,h=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${a} status=${e.j} suspend=${h}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const lh={delay:0,preempt:!1,persistent:!1,suspend:!1};let ch,uh;const dh=(t,e)=>{ch=t,uh=e},ph=()=>{const t=new Promise(dh);return t.resolve=ch,t.reject=uh,t},fh=t=>t.persistent,gh=()=>vh("AUR1006"),mh=()=>vh("AUR1007"),vh=t=>new Error(t);class bh extends ih{static getOrCreate(t,e={}){let s=bh.t.get(t);return void 0===s&&bh.t.set(t,s=new bh(t,e)),s}static set(t,e){bh.t.set(t,e)}get domWriteQueue(){return this.domQueue}get domReadQueue(){return this.domQueue}constructor(t,e={}){super(t,e),"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]?.bind(t)??(t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)})(s)),this.domQueue=(()=>{let t=!1,e=-1;const s=()=>{e=-1,!0===t&&(t=!1,i.flush())},i=new nh(this,()=>{t=!0,-1===e&&(e=this.requestAnimationFrame(s))},()=>{t=!1,e>-1&&(this.cancelAnimationFrame(e),e=-1)});return i})()}}bh.t=new WeakMap,"function"==typeof SuppressedError&&SuppressedError;const{default:wh,oneTime:yh,toView:Ch,fromView:kh,twoWay:$h}=Ni,xh=n.get,Th=n.has,Sh=n.define,{annotation:Ah}=H,Rh=Ah.keyFor,Eh=Object,Oh=String,Ih=Eh.prototype,Ph=Ih.hasOwnProperty,Mh=Eh.freeze,Bh=Eh.assign,jh=Eh.getOwnPropertyNames,Lh=Eh.keys,Nh=b(),Dh=(t,e,s)=>{if(!0===Nh[e])return!0;if(!v(e))return!1;const i=e.slice(0,5);return Nh[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},Vh=t=>{throw t},Fh=Reflect.defineProperty,_h=(t,e,s)=>(Fh(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),qh=(t,e,s)=>t.addSignalListener(e,s),Uh=(t,e,s)=>t.removeSignalListener(e,s),zh="IsProperty",Kh="pending",Hh="running",Gh=wo.Observer,Wh=wo.Node,Xh=wo.Layout,Jh=(t,...e)=>{const s=Oh(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(Oh)}`)};function Yh(t,e){let s;function i(t,e){let i;switch(e.kind){case"getter":case"field":{const t=e.name;if("string"!=typeof t)throw Jh(227);i=t;break}case"class":if(null==s)throw Jh(228);if("string"==typeof s)i=s;else{const t=s.name;if(!t)throw Jh(229);if("string"!=typeof t)throw Jh(227);i=t}}const n=null==s||"string"==typeof s?{name:i}:s;(e.metadata[Qh]??=b())[i]=tl.create(i,n)}return arguments.length>1?(s={},void i(0,e)):v(t)?(s=t,i):(s=void 0===t?{}:t,i)}const Qh=Rh("bindables"),Zh=Mh({name:Qh,keyFrom:t=>`${Qh}:${t}`,from(...t){const e={},s=Array.isArray;function i(t,s){e[t]=s instanceof tl?s:tl.create(t,!0===s?{}:s)}return t.forEach(function(t){s(t)?t.forEach(t=>v(t)?function(t){e[t]=tl.create(t)}(t):i(t.name,t)):t instanceof tl?e[t.name]=t:void 0!==t&&Lh(t).forEach(e=>i(e,t[e]))}),e},getAll(t){const e=[],s=O(t);let i,n=s.length;for(;--n>=0;){i=s[n];const t=xh(Qh,i);null!=t&&e.push(...Object.values(t))}return e},i(t,e){let s=xh(Qh,e);null==s&&Sh(s=b(),e,Qh),s[t.name]=t}});class tl{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e={}){const s=e.mode??Ch;return new tl(e.attribute??T(t),e.callback??`${t}Changed`,v(s)?Ni[s]??wh:s,e.primary??!1,e.name??t,e.set??function(t={}){const e=t.type??null;if(null==e)return Bt;let s;switch(e){case Number:case Boolean:case String:case BigInt:s=e;break;default:{const t=e.coerce;s="function"==typeof t?t.bind(e):el.for(e)??Bt;break}}return s===Bt?s:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(s,t.nullable)}(e))}}const el={key:Rh("coercer"),define(t,e){Sh(t[e].bind(t),t,el.key)},for:t=>xh(el.key,t)},sl=xt.createInterface,il=F.singleton,nl=F.aliasTo,rl=F.instance,ol=(t,e,s)=>t.registerResolver(e,s),al=(t,e,s,i="__au_static_resource__")=>{let n=xh(i,t);return null==n&&t.$au?.type===e&&(n=s(t.$au,t),Sh(n,t,i)),n};class hl{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return v(t)?(s=t,i={name:s}):(s=t.name,i=t),new hl(e,E(ul(e,"name"),s),R(ul(e,"aliases"),i.aliases,e.aliases),pl.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?dl(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:il(s,s),nl(s,i),...n.map(t=>nl(s,dl(t))))}}const ll="binding-behavior",cl=K(ll),ul=(t,e)=>xh(Rh(e),t),dl=t=>`${cl}:${t}`,pl=Mh({name:cl,keyFrom:dl,isType:t=>m(t)&&(Th(cl,t)||t.$au?.type===ll),define(t,e){const s=hl.create(t,e),i=s.Type;return Sh(s,i,cl,z),i},getDefinition(t){const e=xh(cl,t)??al(t,ll,hl.create);if(void 0===e)throw Jh(151,t);return e},find(t,e){const s=t.find(ll,e);return null==s?null:xh(cl,s)??al(s,ll,hl.create)??null},get:(t,e)=>t.get(_t(dl(e)))}),fl=new Map,gl=t=>({type:ll,name:t});class ml{bind(t,e){fl.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=fl.get(e),fl.delete(e)}}class vl extends ml{get mode(){return yh}}vl.$au=gl("oneTime");class bl extends ml{get mode(){return Ch}}bl.$au=gl("toView");class wl extends ml{get mode(){return kh}}wl.$au=gl("fromView");class yl extends ml{get mode(){return $h}}yl.$au=gl("twoWay");const Cl=new WeakMap;class kl{constructor(){this.p=lt(jt)}bind(t,e,s,i){const n={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:v(i)?[i]:i??Pt},r=e.limit?.(n);null==r||Cl.set(e,r)}unbind(t,e){Cl.get(e)?.dispose(),Cl.delete(e)}}kl.$au={type:ll,name:"debounce"};const $l=sl("ISignaler",t=>t.singleton(xl));class xl{constructor(){this.signals=b()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){(this.signals[t]??=new Set).add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}class Tl{constructor(){this.h=new Map,this.u=lt($l)}bind(t,e,...s){if(!("handleChange"in e))throw Jh(817);if(0===s.length)throw Jh(818);let i;for(i of(this.h.set(e,s),s))qh(this.u,i,e)}unbind(t,e){const s=this.h.get(e);let i;for(i of(this.h.delete(e),s))Uh(this.u,i,e)}}Tl.$au={type:ll,name:"signal"};const Sl=new WeakMap;class Al{constructor(){({performanceNow:this.C,taskQueue:this.B}=lt(jt))}bind(t,e,s,i){const n={type:"throttle",delay:s??200,now:this.C,queue:this.B,signals:v(i)?[i]:i??Pt},r=e.limit?.(n);null==r||Sl.set(e,r)}unbind(t,e){Sl.get(e)?.dispose(),Sl.delete(e)}}Al.$au={type:ll,name:"throttle"};const Rl=sl("IAppTask");class El{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(rl(Rl,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}function Ol(t){return function(e,s){return m(s)?new El(t,e,s):new El(t,null,e)}}Mh({creating:Ol("creating"),hydrating:Ol("hydrating"),hydrated:Ol("hydrated"),activating:Ol("activating"),activated:Ol("activated"),deactivating:Ol("deactivating"),deactivated:Ol("deactivated")});const Il=jt;class Pl{}const Ml=(()=>{const t=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(e,s){return t.get(e)?.[s]??null}set(s,i,n){const r=t.get(s)??(t.set(s,new Pl),t.get(s));if(i in r)throw new Error(`Node already associated with a controller, remove the ref "${i}" first before associating with another controller`);return e||(s.$au??=r),r[i]=n}}})(),Bl=sl("INode"),jl=(()=>{const t=new WeakMap;return Mh({add(e,s){let i=t.get(e);null==i&&t.set(e,i=[]),i.push(s)},getDefinitions:e=>t.get(e)??Pt})})();class Ll{get type(){return"custom-attribute"}constructor(t,e,s,i,n,r,o,a,h,l,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=l,this.containerStrategy=c}static create(t,e){let s,i;v(t)?(s=t,i={name:s}):(s=t.name,i=t);const n=E(Fl(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,Ch);for(const t of Object.values(Zh.from(i.bindables)))Zh.i(t,e);return new Ll(e,E(Fl(e,"name"),s),R(Fl(e,"aliases"),i.aliases,e.aliases),Vl(s),v(n)?Ni[n]??wh:n,E(Fl(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Zh.from(...Zh.getAll(e),Fl(e,"bindables"),e.bindables,i.bindables),E(Fl(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),R(jl.getDefinitions(e),e.watches),R(Fl(e,"dependencies"),i.dependencies,e.dependencies),E(Fl(e,"containerStrategy"),i.containerStrategy,e.containerStrategy,"reuse"))}register(t,e){const s=this.Type,i="string"==typeof e?Vl(e):this.key,n=this.aliases;t.has(i,!1)?Ll.warnDuplicate&&t.get(Qt).warn(Jh(154,this.name)):t.register(t.has(s,!1)?null:il(s,s),nl(s,i),...n.map(t=>nl(s,Vl(t))))}toString(){return`au:ca:${this.name}`}}Ll.warnDuplicate=!0;const Nl="custom-attribute",Dl=K(Nl),Vl=t=>`${Dl}:${t}`,Fl=(t,e)=>xh(Rh(e),t),_l=(t,e)=>Ml.get(t,Vl(e))??void 0,ql=(t,e)=>{const s=Ll.create(t,e),i=s.Type;return Sh(s,i,Dl,z),i},Ul=t=>{const e=xh(Dl,t)??al(t,Nl,Ll.create);if(void 0===e)throw Jh(759,t);return e},zl=Mh({name:Dl,keyFrom:Vl,isType:t=>m(t)&&(Th(Dl,t)||t.$au?.type===Nl),for:_l,closest:(t,e)=>{let s="",i="";if(v(e))s=Vl(e),i=e;else{const t=Ul(e);s=t.key,i=t.name}let n=t;for(;null!==n;){const t=Ml.get(n,s);if(t?.is(i))return t;n=Ad(n)}return null},define:ql,getDefinition:Ul,annotate(t,e,s){Sh(s,t,Rh(e))},getAnnotation:Fl,find(t,e){const s=t.find(Nl,e);return null===s?null:xh(Dl,s)??al(s,Nl,Ll.create)??null}}),Kl=sl("ILifecycleHooks");class Hl{constructor(t,e){this.definition=t,this.instance=e}}class Gl{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==Ih;){for(const t of jh(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Gl(e,s)}}const Wl=(()=>{const t=new WeakMap,e=new WeakMap;return Mh({define(t,s){const i=Gl.create(t,s),n=i.Type;return e.set(n,i),{register(t){il(Kl,n).register(t)}}},resolve(s){let i=t.get(s);if(void 0===i){t.set(s,i=new Xl);const n=s.root,r=n===s?s.getAll(Kl):s.has(Kl,!1)?n.getAll(Kl).concat(s.getAll(Kl)):n.getAll(Kl);let o,a,h,l,c;for(o of r)for(l of(a=e.get(o.constructor),h=new Hl(a,o),a.propertyNames))c=i[l],void 0===c?i[l]=[h]:c.push(h)}return i}})})();class Xl{}class Jl{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return v(t)?(s=t,i={name:s}):(s=t.name,i=t),new Jl(e,E(Zl(e,"name"),s),R(Zl(e,"aliases"),i.aliases,e.aliases),ec.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?tc(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:il(s,s),nl(s,i),...n.map(t=>nl(s,tc(t))))}}const Yl="value-converter",Ql=K(Yl),Zl=(t,e)=>xh(Rh(e),t),tc=t=>`${Ql}:${t}`,ec=Mh({name:Ql,keyFrom:tc,isType:t=>m(t)&&(Th(Ql,t)||t.$au?.type===Yl),define(t,e){const s=Jl.create(t,e),i=s.Type;return Sh(s,i,Ql,z),i},getDefinition(t){const e=xh(Ql,t)??al(t,Yl,Jl.create);if(void 0===e)throw Jh(152,t);return e},annotate(t,e,s){Sh(s,t,Rh(e))},getAnnotation:Zl,find(t,e){const s=t.find(Yl,e);return null==s?null:xh(Ql,s)??al(s,Yl,Jl.create)??null},get:(t,e)=>t.get(_t(tc(e)))});class sc{constructor(t,e){this.v=void 0,this.b=t,this.A=e}flush(){this.b.isBound&&this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==Hr(s.ast,s.s,s,null)&&(this.v=t,this.A.add(this))}}const ic=(()=>{function t(t){this.s=t}return e=>{_h(e.prototype,"useScope",t)}})(),nc=(()=>{class t{}const e=new WeakMap,s=new WeakMap,i=new WeakMap;function n(t){return this.l.get(t)}function r(e,i){let n=s.get(e);return null==n&&s.set(e,n=new t),n[i]??=pl.get(e.l,i)}function o(t,e,s){const n=r(this,t);if(null==n)throw Jh(101,t);let o=i.get(this);if(null==o&&i.set(this,o={}),o[t])throw Jh(102,t);n.bind?.(e,this,...s)}function a(t,e){const s=r(this,t),n=i.get(this);s?.unbind?.(e,this),null!=n&&(n[t]=!1)}function h(s,i){let n=e.get(s);return null==n&&e.set(s,n=new t),n[i]??=ec.get(s.l,i)}function l(t){const e=h(this,t);if(null==e)throw Jh(103,t);const s=e.signals;if(null!=s){const t=this.l.get($l),e=s.length;let i=0;for(;i<e;++i)t.addSignalListener(s[i],this)}}function c(t){const e=h(this,t);if(void 0===e?.signals)return;const s=this.l.get($l);let i=0;for(;i<e.signals.length;++i)s.removeSignalListener(e.signals[i],this)}function u(t,e,s,i){const n=h(this,t);if(null==n)throw Jh(103,t);const r=!0===n.withContext;let o=null;switch(r&&(o={source:this.l.get(ad).controller.viewModel,binding:this}),e){case"toView":return"toView"in n?r?n.toView(s,o,...i):n.toView(s,...i):s;case"fromView":return"fromView"in n?r?n.fromView?.(s,o,...i):n.fromView?.(s,...i):s}}return t=>{const e=t.prototype;_h(e,"get",n),_h(e,"bindBehavior",o),_h(e,"unbindBehavior",a),_h(e,"bindConverter",l),_h(e,"unbindConverter",c),_h(e,"useConverter",u)}})(),rc=sl("IFlushQueue",t=>t.singleton(oc));class oc{constructor(){this.R=!1,this.T=new Set}get count(){return this.T.size}add(t){if(this.T.add(t),!this.R){this.R=!0;try{this.T.forEach(ac)}finally{this.R=!1}}}clear(){this.T.clear(),this.R=!1}}const ac=function(t,e,s){s.delete(t),t.flush()},hc=(()=>{const t=new WeakSet;return(e,s)=>{_h(e.prototype,"limit",function(e){if(t.has(this))throw Jh(9996);t.add(this);const i=s(this,e),n=e.signals,r=n.length>0?this.get($l):null,o=this[i],a=(...t)=>o.call(this,...t),h="debounce"===e.type?((t,e,s)=>{let i,n,r,o=!1;const a=()=>e(r),h=e=>{r=e,s.isBound?(n=i,i=fo(a,{delay:t.delay}),n?.cancel()):a()},l=h.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return h.flush=()=>{o=i?.status===Kh,l(),o&&a()},h})(e,a,this):((t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const l=()=>t.now(),c=()=>e(r),u=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),c()):i=fo(()=>{o=l(),c()},{delay:t.delay-a}),n?.cancel()):c()},d=u.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return u.flush=()=>{h=i?.status===Kh,d(),h&&c()},u})(e,a,this),l=r?{handleChange:h.flush}:null;return this[i]=h,r&&n.forEach(t=>qh(r,t,l)),{dispose:()=>{r&&n.forEach(t=>Uh(r,t,l)),t.delete(this),h.dispose(),delete this[i]}}})}})(),lc=((t=new WeakSet)=>e=>function(){t.has(this)||(t.add(this),e.call(this))})();class cc{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=r,this.targetProperty=o,this.mode=a,this.strict=h,this.isBound=!1,this.s=void 0,this.L=!1,this.v=void 0,this.boundFn=!1,this.M=!1,this.l=e,this.ast=i,this.P=t,this.target=n,this.oL=s,(this.M=o.indexOf(" ")>-1)&&!cc.q.has(o)&&cc.q.set(o,o.split(" "))}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":if(this.M){const s=!!t;for(const t of cc.q.get(i))e.classList.toggle(t,s)}else e.classList.toggle(i,!!t);break;case"style":{let s="",n=Oh(t);v(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,Oh(t))}}handleChange(){this.isBound&&(this.L||(this.L=!0,po(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null);this.obs.clear(),t!==this.v&&(this.v=t,this.updateTarget(t))})))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Gr(this.ast,t,this),this.mode&(Ch|yh)&&this.updateTarget(this.v=Hr(this.ast,t,this,(this.mode&Ch)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.obs.clearAll())}}cc.mix=lc(()=>{ic(cc),hc(cc,()=>"updateTarget"),Io(cc,null),nc(cc)}),cc.q=new Map;class uc{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.L=!1,this.P=t,this.oL=s,this.I=s.getAccessor(n,r);const h=i.expressions,l=this.partBindings=Array(h.length),c=h.length;let u=0;for(;c>u;++u)l[u]=new dc(h[u],n,r,e,s,a,this)}_(){if(this.isBound)if(this.P.state!==td&&(this.I.type&Xh)>0){if(this.L)return;this.L=!0,po(()=>{this.L=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast,s=this.target,i=this.targetProperty,n=e.parts,r=t.length;let o="",a=0;if(1===r)o=n[0]+t[0].V()+n[1];else for(o=n[0];r>a;++a)o+=t[a].V()+n[a+1];this.I.setValue(o,s,i)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind()}useAccessor(t){this.I=t}}class dc{constructor(t,e,s,i,n,r,o){this.ast=t,this.target=e,this.targetProperty=s,this.strict=r,this.owner=o,this.mode=Ch,this.isBound=!1,this.v="",this.boundFn=!1,this.D=!1,this.l=i,this.oL=n}updateTarget(){this.owner._()}handleChange(){this.isBound&&(this.D=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this.D=!0,this.updateTarget())}V(){if(!this.D)return this.v;this.obs.version++;const t=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null);return this.obs.clear(),this.v=t,u(t)&&this.observeCollection(t),this.D=!1,this.v}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Gr(this.ast,t,this),this.v=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null),u(this.v)&&this.observeCollection(this.v),this.D=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.v=void 0,this.D=!1,Wr(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}dc.mix=lc(()=>{ic(dc),hc(dc,()=>"updateTarget"),Io(dc,null),nc(dc)});class pc{constructor(t,e,s,i,n,r,o){this.p=i,this.ast=n,this.target=r,this.strict=o,this.isBound=!1,this.mode=Ch,this.L=!1,this.v="",this.F=!1,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.F&&(s.parentNode?.removeChild(s),this.F=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.F=!0),e.textContent=Oh(t??"")}handleChange(){this.isBound&&(this.L||(this.L=!0,po(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null);this.obs.clear(),t!==this.v&&this.updateTarget(t)})))}handleCollectionChange(){this.isBound&&(this.L||(this.L=!0,po(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=this.v=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null);this.obs.clear(),u(t)&&this.observeCollection(t),this.updateTarget(t)})))}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Gr(this.ast,t,this);const e=this.v=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null);u(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.F&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll())}}pc.mix=lc(()=>{ic(pc),hc(pc,()=>"updateTarget"),Io(pc,null),nc(pc)});class fc{constructor(t,e,s,i,n,r){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.strict=r,this.H=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=Hr(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.H?t.bindingContext:t.overrideContext,Gr(this.ast,t,this),this.v=Hr(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}fc.mix=lc(()=>{ic(fc),hc(fc,()=>"updateTarget"),Io(fc,null),nc(fc)});class gc{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.I=void 0,this.L=!1,this.O=null,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){this.I.setValue(t,this.target,this.targetProperty)}updateSource(t){Kr(this.ast,this.s,this,null,t)}handleChange(){if(this.isBound)if(this.P.state!==td&&(this.I.type&Xh)>0){if(this.L)return;this.L=!0,po(()=>{this.L=!1,this.isBound&&this.$()})}else this.$()}$(){this.obs.version++;const t=Hr(this.ast,this.s,this,(this.mode&Ch)>0?this:null);this.obs.clear(),this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Gr(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.I;i||(i=s&kh?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.I=i);const n=(s&Ch)>0;s&(Ch|yh)&&this.updateTarget(Hr(this.ast,this.s,this,n?this:null)),s&kh&&(i.subscribe(this.O??=new sc(this,this.l.get(rc))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.O&&(this.I.unsubscribe(this.O),this.O=null),Wr(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}useTargetObserver(t){this.I?.unsubscribe(this),(this.I=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.O)throw Jh(9995);this.O=t}}gc.mix=lc(()=>{ic(gc),hc(gc,t=>t.mode&kh?"updateSource":"updateTarget"),Io(gc,null),nc(gc)});class mc{constructor(t,e,s,i,n){this.oL=e,this.ast=s,this.target=i,this.strict=n,this.isBound=!1,this.s=void 0,this.l=t}updateSource(){this.isBound?(this.obs.version++,Kr(this.ast,this.s,this,this,this.target),this.obs.clear()):Kr(this.ast,this.s,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Gr(this.ast,t,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),Hr(this.ast,this.s,this,null)===this.target&&this.updateSource(),Wr(this.ast,this.s,this),this.s=void 0)}}mc.mix=lc(()=>{Io(mc,null),hc(mc,()=>"updateSource"),ic(mc),nc(mc)});class vc{constructor(t,e=!1,s){this.prevent=t,this.capture=e,this.onError=s}}class bc{constructor(t,e,s,i,n,r,o){this.ast=e,this.target=s,this.targetEvent=i,this.strict=o,this.isBound=!1,this.self=!1,this.boundFn=!0,this.N=null,this.l=t,this.W=n,this.N=r}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=Hr(this.ast,this.s,this,null);delete e.$event,m(s)&&(s=s(t)),!0!==s&&this.W.prevent&&t.preventDefault()}handleEvent(t){if((!this.self||this.target===t.composedPath()[0])&&!1!==this.N?.(t))try{this.callSource(t)}catch(e){this.W.onError(t,e)}}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Gr(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.W),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.W))}}bc.mix=lc(function(){ic(bc),hc(bc,()=>"callSource"),nc(bc)});const wc=sl("IEventModifier"),yc=sl("IKeyMapping",t=>t.instance({meta:Mh(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((t,e,s)=>{let i=String.fromCharCode(s+65);return t[s+65]=i,i=String.fromCharCode(s+97),t[s+97]=t[i]=i,t},{})}}));class Cc{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this.j=lt(yc),this.U=["left","middle","right"]}static register(t){t.register(il(wc,Cc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue;case"left":case"middle":case"right":if(t.button!==this.U.indexOf(s))return!1;continue}if(this.j.meta.includes(s)&&!0!==t[`${s}Key`])return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class kc{constructor(){this.j=lt(yc),this.type=["keydown","keyup"]}static register(t){t.register(il(wc,kc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}if(this.j.meta.includes(s)){if(!0!==t[`${s}Key`])return!1}else if(this.j.keys[s]!==t.key)return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class $c{constructor(){this.type=["$ALL"]}static register(t){t.register(il(wc,$c))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e)switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}const xc=sl("IEventModifierHandler",t=>t.instance({getHandler:()=>null}));class Tc{constructor(){this.G=lt(Nt(wc)).reduce((t,e)=>((u(e.type)?e.type:[e.type]).forEach(s=>t[s]=e),t),{})}static register(t){t.register(il(xc,Tc))}getHandler(t,e){return v(e)?(this.G[t]??this.G.$ALL)?.getHandler(e)??null:null}}const Sc={register(t){t.register(Tc,Cc,kc,$c)}},Ac=sl("IViewFactory");class Rc{constructor(t,e){this.isCaching=!1,this.X=null,this.K=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=Rc.maxCacheSize:v(t)&&(t=parseInt(t,10)),-1!==this.K&&e||(this.K=t)),this.K>0?this.X=[]:this.X=null,this.isCaching=this.K>0}canReturnToCache(t){return null!=this.X&&this.X.length<this.K}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.X.push(t),!0)}create(t){const e=this.X;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=Lu.$view(this,t),s)}}Rc.maxCacheSize=65535;const Ec=(()=>{const t=(t,e)=>t.document.createComment(e);return e=>{const s=t(e,"au-end");return s.$start=t(e,"au-start"),s}})(),Oc=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Ic=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),Pc=t=>1===t.nodeType,Mc="default",Bc=sl("IAuSlotsInfo");class jc{constructor(t){this.projectedSlots=t}}const Lc=sl("IAuSlotWatcher");class Nc{static create(t,e,s,i,n,r,o,a){const h=[],l=i.renderers,c=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw Jh(9999);return i},u=t=>{const i=c(t),d=new Nc(i),p=n.compileSpread(i.controller.definition,i.instruction?.captures??Pt,i.controller.container,e,s);let f;for(f of p)switch(f.type){case dn.spreadTransferedBinding:u(t+1);break;case dn.spreadElementProp:l[f.instruction.type].render(d,Hd(e),f.instruction,r,o,a);break;default:l[f.type].render(d,e,f,r,o,a)}h.push(d)};return u(0),h}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.isBound=!1,this.et=[],this.locator=(this.$controller=(this.it=t).controller).container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.it.controller.scope.parent??void 0;if(null==e)throw Jh(9999);this.et.forEach(t=>t.bind(e))}unbind(){this.et.forEach(t=>t.unbind()),this.isBound=!1}addBinding(t){this.et.push(t)}addChild(t){if(t.vmKind!==Yu)throw Jh(9998);this.$controller.addChild(t)}}class Dc{constructor(t,e,s,i,n,r,o){this.target=e,this.targetKeys=s,this.ast=i,this.strict=o,this.isBound=!1,this.s=void 0,this.boundFn=!1,this.st={},this.nt=new WeakMap,this.P=t,this.oL=n,this.l=r}updateTarget(){this.obs.version++;const t=Hr(this.ast,this.s,this,this);this.obs.clear(),this.rt(t,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.isBound=!0,this.s=t,Gr(this.ast,t,this);const e=Hr(this.ast,t,this,this);this.rt(e,!1)}unbind(){if(!this.isBound)return;let t;for(t in this.isBound=!1,Wr(this.ast,this.s,this),this.s=void 0,this.st)this.st[t].unbind()}rt(t,e){let s,i;if(!f(t)){for(s in this.st)this.st[s]?.unbind();return}let n=this.nt.get(t);for(s of(null==n&&this.nt.set(t,n=qr.fromParent(this.s,t)),this.targetKeys))i=this.st[s],s in t?(null==i&&(i=this.st[s]=new gc(this.P,this.l,this.oL,Dc.ot[s]??=new Oe(s,0),this.target,s,Ni.toView,this.strict)),i.bind(n)):e&&i?.unbind()}}Dc.mix=lc(()=>{ic(Dc),hc(Dc,()=>"updateTarget"),Io(Dc,null),nc(Dc)}),Dc.ot={};const Vc=(t,e,s,i)=>{t.addEventListener(e,s,i)},Fc=(t,e,s,i)=>{t.removeEventListener(e,s,i)},_c=t=>{let e;const s=t.prototype;_h(s,"subscribe",function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Vc(this.lt,e,this);this.ht=!0,this.ct?.()}}),_h(s,"unsubscribe",function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)Fc(this.lt,e,this);this.ht=!1,this.ut?.()}}),_h(s,"useConfig",function(t){if(this.cf=t,this.ht){for(e of this.cf.events)Fc(this.lt,e,this);for(e of this.cf.events)Vc(this.lt,e,this)}})},qc=t=>{_h(t.prototype,"subscribe",Bt),_h(t.prototype,"unsubscribe",Bt)};class Uc{get doNotCache(){return!0}constructor(t,e={}){this.obj=t,this.mapping=e,this.type=Wh|Xh,this.v="",this.ft={},this.dt=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.gt())}gt(){const t=this.ft,e=++this.dt,s=this.obj.classList,i=zc(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],r=this.mapping[r]||r,0!==r.length&&(t[r]=this.dt,s.add(r));if(1!==e)for(r in t)r=this.mapping[r]||r,t[r]!==e&&s.remove(r)}}function zc(t){if(v(t))return Kc(t);if("object"!=typeof t)return Pt;if(u(t)){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...zc(t[i]));return s}return Pt}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Kc(s)):e.push(s));return e}function Kc(t){const e=t.match(/\S+/g);return null===e?Pt:e}qc(Uc);const Hc=t=>({$isResolver:!0,resolve:(e,s)=>s.get(ad).controller.container.get(Ft(t))}),Gc=sl("IRenderer");function Wc(t,e){return(e?.metadata??(t[Symbol.metadata]??=Object.create(null)))[Y]={register(e){il(Gc,t).register(e)}},t}function Xc(t,e,s){return v(e)?t.parse(e,s):e}function Jc(t){return null!=t.viewModel?t.viewModel:t}const Yc=Wc(class{constructor(){this.target=dn.setProperty}render(t,e,s){const i=Jc(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}},null),Qc=Wc(class{constructor(){this.r=lt(Su),this.target=dn.hydrateElement}render(t,e,s,i,n,r){let o,a,h;const l=s.res,c=s.projections,u=t.container;if("string"==typeof l){if(o=Jd.find(u,l),null==o)throw Jh(752,s,t)}else o=l;const d=s.containerless||o.containerless?Rd(e):null,p=function(t,e,s,i,n,r){const o=e.container.createChild();return Id(o,s,t),ol(o,od,new Ot(mu,e)),ol(o,pn,new Ot(vu,i)),ol(o,xd,null==n?$u:new ku(n)),ol(o,Ac,xu),ol(o,Bc,null==r?Tu:new Ot(wu,r)),o}(i,t,e,s,d,null==c?void 0:new jc(Lh(c)));a=p.invoke(o.Type),h=Lu.$el(p,a,e,s,o,d);const f=this.r.renderers,g=s.props,m=g.length;let v,b=0;for(;m>b;)v=g[b],f[v.type].render(t,h,v,i,n,r),++b;t.addChild(h)}},null),Zc=Wc(class{constructor(){this.r=lt(Su),this.target=dn.hydrateAttribute}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=zl.find(a,s.res),null==o)throw Jh(753,s,t)}else o=s.res;const h=Cu(i,o,t,e,s,void 0,void 0),l=Lu.$attr(h.ctn,h.vm,e,o);Ml.set(e,o.key,l);const c=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],c[p.type].render(t,l,p,i,n,r),++f;t.addChild(l)}},null),tu=Wc(class{constructor(){this.r=lt(Su),this.target=dn.hydrateTemplateController}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=zl.find(a,s.res),null==o)throw Jh(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,"new"===o.containerStrategy?a.createChild({inheritParentResources:!0}):a),l=Rd(e),c=Cu(i,o,t,e,s,h,l),u=Lu.$attr(c.ctn,c.vm,e,o);Ml.set(l,o.key,u),c.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,m=0;for(;f>m;)g=p[m],d[g.type].render(t,u,g,i,n,r),++m;t.addChild(u)}},null),eu=Wc(class{constructor(){this.target=dn.hydrateLetElement,fc.mix()}render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,l=o.length;let c,u,d=0;for(;l>d;)c=o[d],u=Xc(n,c.from,zh),t.addBinding(new fc(h,r,u,c.to,a,t.strict??!1)),++d}},null),su=Wc(class{constructor(){this.target=dn.refBinding,mc.mix()}render(t,e,s,i,n,r){t.addBinding(new mc(t.container,r,Xc(n,s.from,zh),function(t,e){if("element"===e)return t;switch(e){case"controller":return Hd(t);case"view":throw Jh(750);case"component":return Hd(t).viewModel;default:{const s=_l(t,e);if(void 0!==s)return s.viewModel;const i=Hd(t,{name:e});if(void 0===i)throw Jh(751,e);return i.viewModel}}}(e,s.to),t.strict??!1))}},null),iu=Wc(class{constructor(){this.target=dn.interpolation,dc.mix()}render(t,e,s,i,n,r){const o=t.container,a=new uc(t,o,r,Xc(n,s.from,"Interpolation"),Jc(e),s.to,Ch,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(Hc(Td));a.useAccessor(new Uc(a.target,t))}t.addBinding(a)}},null),nu=Wc(class{constructor(){this.target=dn.propertyBinding,gc.mix()}render(t,e,s,i,n,r){const o=t.container,a=new gc(t,o,r,Xc(n,s.from,zh),Jc(e),s.to,s.mode,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(Hc(Td));a.useTargetObserver(new Uc(a.target,t))}t.addBinding(a)}},null),ru=Wc(class{constructor(){this.target=dn.iteratorBinding,gc.mix()}render(t,e,s,i,n,r){t.addBinding(new gc(t,t.container,r,Xc(n,s.forOf,"IsIterator"),Jc(e),s.to,Ch,t.strict??!1))}},null),ou=Wc(class{constructor(){this.target=dn.textBinding,pc.mix()}render(t,e,s,i,n,r){t.addBinding(new pc(t,t.container,r,i,Xc(n,s.from,zh),e,t.strict??!1))}},null),au=sl("IListenerBindingOptions",t=>t.singleton(class{constructor(){this.p=lt(Il),this.prevent=!1,this.onError=(t,e)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:t,error:e}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw e}}})),hu=Wc(class{constructor(){this.target=dn.listenerBinding,this.vt=lt(xc),this.xt=lt(au),bc.mix()}render(t,e,s,i,n){t.addBinding(new bc(t.container,Xc(n,s.from,"IsFunction"),e,s.to,new vc(this.xt.prevent,s.capture,this.xt.onError),this.vt.getHandler(s.to,s.modifier),t.strict??!1))}},null),lu=Wc(class{constructor(){this.target=dn.setAttribute}render(t,e,s){e.setAttribute(s.to,s.value)}},null),cu=Wc(class{constructor(){this.target=dn.setClassAttribute}render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}},null),uu=Wc(class{constructor(){this.target=dn.setStyleAttribute}render(t,e,s){e.style.cssText+=s.value}},null),du=Wc(class{constructor(){this.target=dn.stylePropertyBinding,gc.mix()}render(t,e,s,i,n,r){t.addBinding(new gc(t,t.container,r,Xc(n,s.from,zh),e.style,s.to,Ch,t.strict??!1))}},null),pu=Wc(class{constructor(){this.target=dn.attributeBinding,cc.mix()}render(t,e,s,i,n,r){const o=t.container,a=o.has(Td,!1)?o.get(Td):null;t.addBinding(new cc(t,o,r,Xc(n,s.from,zh),e,s.attr,null==a?s.to:s.to.split(/\s/g).map(t=>a[t]??t).join(" "),Ch,t.strict??!1))}},null),fu=Wc(class{constructor(){this.yt=lt(Di),this.r=lt(Su),this.target=dn.spreadTransferedBinding}render(t,e,s,i,n,r){Nc.create(t.container.get(ad),e,void 0,this.r,this.yt,i,n,r).forEach(e=>t.addBinding(e))}},null),gu=Wc(class{constructor(){this.target=dn.spreadValueBinding,Dc.mix()}render(t,e,s,i,n,r){const o=s.target;if("$bindables"!==o)throw Jh(820,o);t.addBinding(new Dc(t,e.viewModel,Lh(e.definition.bindables),n.parse(s.from,zh),r,t.container,t.strict??!1))}},null),mu="IController",vu="IInstruction",bu="IRenderLocation",wu="ISlotsInfo";class yu{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw Jh(755);if(!v(t.name)||0===t.name.length)throw Jh(756);return t}}function Cu(t,e,s,i,n,r,o,a){const h=s instanceof Lu?s:s.$controller,l=h.container.createChild();return Id(l,i,t),ol(l,od,new Ot(mu,h)),ol(l,pn,new Ot(vu,n)),ol(l,xd,null==o?$u:new Ot(bu,o)),ol(l,Ac,null==r?xu:new yu(r)),ol(l,Bc,Tu),{vm:l.invoke(e.Type),ctn:l}}class ku{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const $u=new ku(null),xu=new yu(null),Tu=new Ot(wu,new jc(Pt)),Su=sl("IRendering",t=>t.singleton(Au));class Au{get renderers(){return this.wt??=this.bt.getAll(Gc,!1).reduce((t,e)=>(t[e.target]??=e,t),b())}constructor(){this.kt=new WeakMap,this.Ct=new WeakMap;const t=this.bt=lt(Tt).root,e=this.p=t.get(Il);this.ep=t.get(ns),this.oL=t.get(_a),this.Bt=e.document.createElement("au-m"),this.St=new Od(e,e.document.createDocumentFragment())}compile(t,e){const s=e.get(Di),i=this.kt;let n=i.get(t);return null==n&&i.set(t,n=Bd.create(t.needsCompile?s.compile(t,e):t)),n}getViewFactory(t,e){return new Rc(e,Bd.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Od(this.p,this.At(t.template));let e,s=!1;const i=this.Ct,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null==o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),v(o)&&(a.innerHTML=o),e=a.content,s=!0),this.At(e),i.set(t,e)}return null==e?this.St:new Od(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,l,c=0,u=0,d=n.length;if(o!==d)throw Jh(757,o,d);if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u;if(o>0)for(;o>c;){for(a=n[c],l=e[c],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,l,h,this.p,this.ep,this.oL),++u;++c}}At(t){if(null==t)return null;const e=this.p.document.createTreeWalker(t,128);let s;for(;null!=(s=e.nextNode());)"au*"===s.nodeValue&&s.parentNode.replaceChild(e.currentNode=this.Bt.cloneNode(),s);return t}}const Ru=sl("IShadowDOMStyles"),Eu=sl("IShadowDOMGlobalStyles",t=>t.instance({applyTo:Bt})),{enter:Ou,exit:Iu}=Do,{wrap:Pu,unwrap:Mu}=Ia;class Bu{get value(){return this.v}constructor(t,e,s,i,n="async"){this.obj=t,this.$get=s,this.isBound=!1,this.L=!1,this.Rt=0,this.v=void 0,this.cb=i,this.oL=e,this.Tt=n}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,po(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.obj,e=this.v;if(++this.Rt>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();w(s,e)||this.cb.call(t,s,e,t),this.L||(this.Rt=0)}compute(){this.obs.version++;try{return Ou(this),this.v=Mu(this.$get.call(void 0,Pu(this.obj),this))}finally{this.obs.clear(),Iu(this)}}}Io(Bu,null);class ju{get value(){return this.v}constructor(t,e,s,i,n,r="async"){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.L=!1,this.boundFn=!1,this.obj=t.bindingContext,this.Lt=i,this.cb=n,this.Tt=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,po(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.Lt,e=this.obj,s=this.v;this.obs.version++;const i=Hr(t,this.scope,this,this);this.obs.clear(),w(i,s)||(this.v=i,this.cb.call(e,i,s,e))}bind(){this.isBound||(this.obs.version++,this.v=Hr(this.Lt,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}Io(ju,null),nc(ju);class Lu{get lifecycleHooks(){return this.Mt}get isActive(){return(this.state&(td|ed))>0&&0===(this.state&sd)}get name(){if(null===this.parent)switch(this.vmKind){case Yu:return`[${this.definition.name}]`;case Ju:return this.definition.name;case Qu:return this.viewFactory.name}switch(this.vmKind){case Yu:return`${this.parent.name}>[${this.definition.name}]`;case Ju:return`${this.parent.name}>${this.definition.name}`;case Qu:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.Dt}set viewModel(t){this.Dt=t,this.Pt=null==t||this.vmKind===Qu?Wu.none:new Wu(t)}get strict(){return this.definition?.strict}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.qt=!1,this.mountTarget=Du,this.shadowRoot=null,this.nodes=null,this.location=null,this.Mt=null,this.state=Zu,this.It=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._t=0,this.Vt=0,this.Ft=0,this.Dt=n,this.Pt=e===Qu?Wu.none:new Wu(n),this.location=o,this.r=t.root.get(Su)}static getCached(t){return Nu.get(t)}static getCachedOrThrow(t){const e=Lu.getCached(t);if(void 0===e)throw Jh(500,t);return e}static $el(t,e,s,i,n=void 0,r=null){if(Nu.has(e))return Nu.get(e);n=n??Wd(e.constructor),ol(t,n.Type,new Ot(n.key,e,n.Type));const o=new Lu(t,Ju,n,null,e,s,r),a=t.get(Dt(ad));return n.dependencies.length>0&&t.register(...n.dependencies),ol(t,ad,new Ot("IHydrationContext",new hd(o,i,a))),Nu.set(e,o),null!=i&&!1===i.hydrate||o.hE(i),o}static $attr(t,e,s,i){if(Nu.has(e))return Nu.get(e);i=i??Ul(e.constructor),ol(t,i.Type,new Ot(i.key,e,i.Type));const n=new Lu(t,Yu,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),Nu.set(e,n),n.Ht(),n}static $view(t,e=void 0){const s=new Lu(t.container,Qu,null,t,null,null,null);return s.parent=e??null,s.Ot(),s}hE(t){const e=this.container,s=this.Dt,i=this.definition;this.scope=qr.create(s,null,!0),i.watches.length>0&&Gu(this,e,i,s),zu(this,i,s),this.Mt=Wl.resolve(e),e.register(i.Type),null!==i.injectable&&ol(e,i.injectable,new Ot("definition.injectable",s)),null!=t&&!1===t.hydrate||(this.hS(),this.hC())}hS(){null!=this.Mt.hydrating&&this.Mt.hydrating.forEach(ud,this),this.Pt.$t&&this.Dt.hydrating(this);const t=this.definition,e=this.Nt=this.r.compile(t,this.container),s=e.shadowOptions,i=e.hasSlots,n=e.containerless,r=this.host;let o=this.location;if(n&&null==o&&(o=this.location=Rd(r)),kd(r,qd,this),kd(r,t.key,this),null!==s||i){if(null!=o)throw Jh(501);kd(this.shadowRoot=r.attachShadow(s??Xu),qd,this),kd(this.shadowRoot,t.key,this),this.mountTarget=Fu}else null!=o?(r!==o&&(kd(o,qd,this),kd(o,t.key,this)),this.mountTarget=_u):this.mountTarget=Vu;this.Dt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.Mt.hydrated&&this.Mt.hydrated.forEach(dd,this),this.Pt.Wt&&this.Dt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Nt,this.host),void 0!==this.Mt.created&&this.Mt.created.forEach(cd,this),this.Pt.jt&&this.Dt.created(this)}Ht(){const t=this.definition,e=this.Dt;t.watches.length>0&&Gu(this,this.container,t,e),zu(this,t,e),e.$controller=this,this.Mt=Wl.resolve(this.container),void 0!==this.Mt.created&&this.Mt.created.forEach(cd,this),this.Pt.jt&&this.Dt.created(this)}Ot(){this.Nt=this.r.compile(this.viewFactory.def,this.container),this.r.render(this,(this.nodes=this.r.createNodes(this.Nt)).findTargets(),this.Nt,void 0)}activate(t,e,s){switch(this.state){case Zu:case id:if(null!==e&&!e.isActive)return;this.state=td;break;case ed:return;case rd:throw Jh(502,this.name);default:throw Jh(503,this.name,function(t){const e=[];return(t&td)===td&&e.push("activating"),(t&ed)===ed&&e.push("activated"),(t&sd)===sd&&e.push("deactivating"),(t&id)===id&&e.push("deactivated"),(t&nd)===nd&&e.push("released"),(t&rd)===rd&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case Ju:this.scope.parent=s??null;break;case Yu:this.scope=s??null;break;case Qu:if(null==s)throw Jh(504,this.name);this.hasLockedScope||(this.scope=s)}let i;return this.$initiator=t,this.zt(),this.vmKind!==Qu&&null!=this.Mt.binding&&(i=B(...this.Mt.binding.map(pd,this))),this.Pt.Ut&&(i=B(i,this.Dt.binding(this.$initiator,this.parent))),c(i)?(this.Gt(),i.then(()=>{this.qt=!0,this.state!==td?this.Xt():this.bind()}).catch(t=>{this.Kt(t)}),this.$promise):(this.qt=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Qu&&null!=this.Mt.bound&&(t=B(...this.Mt.bound.map(fd,this))),this.Pt.Qt&&(t=B(t,this.Dt.bound(this.$initiator,this.parent))),c(t))return this.Gt(),void t.then(()=>{this.isBound=!0,this.state!==td?this.Xt():this.Yt()}).catch(t=>{this.Kt(t)});this.isBound=!0,this.Yt()}Zt(...t){switch(this.mountTarget){case Vu:this.host.append(...t);break;case Fu:this.shadowRoot.append(...t);break;case _u:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Yt(){switch(this.mountTarget){case Vu:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case Fu:{const t=this.container;(t.has(Ru,!1)?t.get(Ru):t.get(Eu)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case _u:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Qu&&null!=this.Mt.attaching&&(t=B(...this.Mt.attaching.map(gd,this))),this.Pt.Jt&&(t=B(t,this.Dt.attaching(this.$initiator,this.parent))),c(t)&&(this.Gt(),this.zt(),t.then(()=>{this.Xt()}).catch(t=>{this.Kt(t)})),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Xt()}deactivate(t,e){let s;switch(this.state&~nd){case ed:this.state=sd;break;case td:this.state=sd,s=this.$promise?.catch(Bt);break;case Zu:case id:case rd:case id|rd:return;default:throw Jh(505,this.name,this.state)}this.$initiator=t,t===this&&this.te();let i,n=0;if(null!==this.children)for(n=0;n<this.children.length;++n)this.children[n].deactivate(t,this);return M(s,()=>{if(this.isBound&&(this.vmKind!==Qu&&null!=this.Mt.detaching&&(i=B(...this.Mt.detaching.map(vd,this))),this.Pt.ee&&(i=B(i,this.Dt.detaching(this.$initiator,this.parent)))),c(i)&&(this.Gt(),t.te(),i.then(()=>{t.ie()}).catch(e=>{t.Kt(e)})),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.ie(),this.$promise})}removeNodes(){switch(this.vmKind){case Ju:case Qu:this.nodes.remove(),this.nodes.unlink()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case Yu:this.scope=null;break;case Qu:this.hasLockedScope||(this.scope=null),(this.state&nd)!==nd||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case Ju:this.scope.parent=null}this.state=id,this.$initiator=null,this.se()}Gt(){void 0===this.$promise&&(this.$promise=new Promise((t,e)=>{this.$resolve=t,this.$reject=e}),this.$initiator!==this&&this.parent.Gt())}se(){void 0!==this.$promise&&(wd=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,wd(),wd=void 0)}Kt(t){void 0!==this.$promise&&(yd=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,yd(t),yd=void 0),this.$initiator!==this&&this.parent.Kt(t)}zt(){++this._t,this.$initiator!==this&&this.parent.zt()}Xt(){if(this.state!==td)return--this._t,this.se(),void(this.$initiator!==this&&this.parent.Xt());if(0===--this._t){if(this.vmKind!==Qu&&null!=this.Mt.attached&&(Cd=B(...this.Mt.attached.map(md,this))),this.Pt.ne&&(Cd=B(Cd,this.Dt.attached(this.$initiator))),c(Cd))return this.Gt(),Cd.then(()=>{this.state=ed,this.se(),this.$initiator!==this&&this.parent.Xt()}).catch(t=>{this.Kt(t)}),void(Cd=void 0);Cd=void 0,this.state=ed,this.se()}this.$initiator!==this&&this.parent.Xt()}te(){++this.Vt}ie(){if(0===--this.Vt){this.re(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.qt&&(e.vmKind!==Qu&&null!=e.Mt.unbinding&&(t=B(...e.Mt.unbinding.map(bd,e))),e.Pt.oe&&(e.debug&&e.logger.trace("unbinding()"),t=B(t,e.viewModel.unbinding(e.$initiator,e.parent)))),c(t)&&(this.Gt(),this.re(),t.then(()=>{this.le()}).catch(t=>{this.Kt(t)})),t=void 0,e=e.next;this.le()}}re(){++this.Ft}le(){if(0===--this.Ft){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.qt=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.qt=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case Yu:case Ju:return this.definition.name===t;case Qu:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===Ju&&(kd(t,qd,this),kd(t,this.definition.key,this)),this.host=t,this.mountTarget=Vu,this}setShadowRoot(t){return this.vmKind===Ju&&(kd(t,qd,this),kd(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=Fu,this}setLocation(t){return this.vmKind===Ju&&(kd(t,qd,this),kd(t,this.definition.key,this)),this.location=t,this.mountTarget=_u,this}release(){this.state|=nd}dispose(){(this.state&rd)!==rd&&(this.state|=rd,this.Pt.he&&this.Dt.dispose(),null!==this.children&&(this.children.forEach(ld),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.Dt&&(Nu.delete(this.Dt),this.Dt=null),this.Dt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Pt.ae&&!0===this.Dt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}const Nu=new WeakMap,Du=0,Vu=1,Fu=2,_u=3,qu=Mh({none:Du,host:Vu,shadowRoot:Fu,location:_u}),Uu=qt(bo);function zu(t,e,s){const i=e.bindables,n=jh(i),r=n.length;if(0===r)return;const o=t.container.get(_a),a="propertiesChanged"in s,h=t.vmKind===Qu?void 0:t.container.get(Uu),l=a?(()=>{let e={},i=!1,n=0;const r=()=>{i||(i=!0,po(()=>{i=!1;const o=e;e={},n=0,t.isBound&&(s.propertiesChanged?.(o),n>0&&r())}))};return(t,s,i)=>{e[t]={newValue:s,oldValue:i},n++,r()}})():Bt;for(let e=0;e<r;++e){const r=n[e],c=i[r],u=c.callback,d=o.getObserver(s,r);if(c.set!==Bt&&!0!==d.useCoercer?.(c.set,h))throw Jh(507,r);if(null!=s[u]||null!=s.propertyChanged||a){const e=(e,i)=>{t.isBound&&(s[u]?.(e,i),s.propertyChanged?.(r,e,i),l(r,e,i))};if(!0!==d.useCallback?.(e))throw Jh(508,r)}}}const Ku=new Map,Hu=t=>{let e=Ku.get(t);return null==e&&(e=new Oe(t,0),Ku.set(t,e)),e};function Gu(t,e,s,i){const n=e.get(_a),r=e.get(ns),o=s.watches,a=t.vmKind===Ju?t.scope:qr.create(i,null,!0),h=o.length;let l,c,u,d,p=0;for(;h>p;++p){if(({expression:l,callback:c,flush:d}=o[p]),c=m(c)?c:Reflect.get(i,c),!m(c))throw Jh(506,c);m(l)?t.addBinding(new Bu(i,n,l,c,d)):(u=v(l)?r.parse(l,zh):Hu(l),t.addBinding(new ju(a,e,n,u,c,d)))}}class Wu{constructor(t){this.ce="define"in t,this.$t="hydrating"in t,this.Wt="hydrated"in t,this.jt="created"in t,this.Ut="binding"in t,this.Qt="bound"in t,this.Jt="attaching"in t,this.ne="attached"in t,this.ee="detaching"in t,this.oe="unbinding"in t,this.he="dispose"in t,this.ae="accept"in t}}Wu.none=new Wu({});const Xu={mode:"open"},Ju="customElement",Yu="customAttribute",Qu="synthetic",Zu=0,td=1,ed=2,sd=4,id=8,nd=16,rd=32,od=sl("IController"),ad=sl("IHydrationContext");class hd{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function ld(t){t.dispose()}function cd(t){t.instance.created(this.Dt,this)}function ud(t){t.instance.hydrating(this.Dt,this)}function dd(t){t.instance.hydrated(this.Dt,this)}function pd(t){return t.instance.binding(this.Dt,this.$initiator,this.parent)}function fd(t){return t.instance.bound(this.Dt,this.$initiator,this.parent)}function gd(t){return t.instance.attaching(this.Dt,this.$initiator,this.parent)}function md(t){return t.instance.attached(this.Dt,this.$initiator)}function vd(t){return t.instance.detaching(this.Dt,this.$initiator,this.parent)}function bd(t){return t.instance.unbinding(this.Dt,this.$initiator,this.parent)}let wd,yd,Cd;const kd=Ml.set,$d=sl("IEventTarget",t=>t.cachedCallback(t=>t.has(Yd,!0)?t.get(Yd).host:t.get(Il).document)),xd=sl("IRenderLocation"),Td=sl("ICssClassMapping"),Sd=new WeakMap;function Ad(t){if(Sd.has(t))return Sd.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0===e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Hd(t,{optional:!0});if(null==e)return null;if(e.mountTarget===qu.shadowRoot)return Ad(e.host)}return t.parentNode}function Rd(t){if(Ed(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function Ed(t){return"au-end"===t.textContent}class Od{get firstChild(){return this.ue}get lastChild(){return this.fe}constructor(t,e){this.platform=t,this.next=void 0,this.de=!1,this.me=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,l=this.childNodes=Array(o=h.length);for(r=0;o>r;)l[r]=h[r],++r;this.ue=e.firstChild,this.fe=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.me&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.de){let e,s=this.ue;const i=this.fe;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.de=!0,e||t.appendChild(this.f)}remove(){if(this.de){this.de=!1;const t=this.f,e=this.fe;let s,i=this.ue;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,e.insertBefore(this.f,t)}unlink(){this.me=!1,this.next=void 0,this.ref=void 0}link(t){this.me=!0,Ed(t)?this.ref=t:(this.next=t,this.ge())}ge(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Id=(t,e,s=t.get(Il))=>(ol(t,s.HTMLElement,ol(t,s.Element,ol(t,Bl,new Ot("ElementResolver",e)))),t);function Pd(t){return function(e,s){return s.addInitializer(function(){Kd(t,this)}),e}}const Md=new WeakMap;class Bd{get type(){return"custom-element"}constructor(t,e,s,i,n,r,o,a,h,l,c,u,d,p,f,g,m,v,b){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.capture=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=h,this.needsCompile=l,this.surrogates=c,this.bindables=u,this.containerless=d,this.shadowOptions=p,this.hasSlots=f,this.enhance=g,this.watches=m,this.strict=v,this.processContent=b}static create(t,e=null){if(null===e){const s=t;if(v(s))throw Jh(761,t);const i=J("name",s,zd);e=m(s.Type)?s.Type:Xd(x(i));for(const t of Object.values(Zh.from(s.bindables)))Zh.i(t,e);return new Bd(e,i,R(s.aliases),J("key",s,()=>Ud(i)),W("capture",s,e,Dd),W("template",s,e,Ld),R(s.instructions),R(Gd(e,"dependencies"),s.dependencies),J("injectable",s,Ld),J("needsCompile",s,Vd),R(s.surrogates),Zh.from(Gd(e,"bindables"),s.bindables),W("containerless",s,e,Dd),J("shadowOptions",s,Ld),J("hasSlots",s,Dd),J("enhance",s,Dd),J("watches",s,Fd),J("strict",s,Nd),X("processContent",e,Ld))}if(v(t))return new Bd(e,t,R(Gd(e,"aliases"),e.aliases),Ud(t),X("capture",e,Dd),X("template",e,Ld),R(Gd(e,"instructions"),e.instructions),R(Gd(e,"dependencies"),e.dependencies),X("injectable",e,Ld),X("needsCompile",e,Vd),R(Gd(e,"surrogates"),e.surrogates),Zh.from(...Zh.getAll(e),Gd(e,"bindables"),e.bindables),X("containerless",e,Dd),X("shadowOptions",e,Ld),X("hasSlots",e,Dd),X("enhance",e,Dd),R(jl.getDefinitions(e),e.watches),X("strict",e,Nd),X("processContent",e,Ld));const s=J("name",t,zd);for(const s of Object.values(Zh.from(t.bindables)))Zh.i(s,e);return new Bd(e,s,R(Gd(e,"aliases"),t.aliases,e.aliases),Ud(s),W("capture",t,e,Dd),W("template",t,e,Ld),R(Gd(e,"instructions"),t.instructions,e.instructions),R(Gd(e,"dependencies"),t.dependencies,e.dependencies),W("injectable",t,e,Ld),W("needsCompile",t,e,Vd),R(Gd(e,"surrogates"),t.surrogates,e.surrogates),Zh.from(...Zh.getAll(e),Gd(e,"bindables"),e.bindables,t.bindables),W("containerless",t,e,Dd),W("shadowOptions",t,e,Ld),W("hasSlots",t,e,Dd),W("enhance",t,e,Dd),R(t.watches,jl.getDefinitions(e),e.watches),W("strict",t,e,Nd),W("processContent",t,e,Ld))}static getOrCreate(t){if(t instanceof Bd)return t;if(Md.has(t))return Md.get(t);const e=Bd.create(t);return Md.set(t,e),Sh(e,e.Type,qd),e}register(t,e){const s=this.Type,i="string"==typeof e?Ud(e):this.key,n=this.aliases;t.has(i,!1)?console.warn(Jh(153,this.name)):t.register(t.has(s,!1)?null:il(s,s),nl(s,i),...n.map(t=>nl(s,Ud(t))))}toString(){return`au:ce:${this.name}`}}const jd={name:void 0,searchParents:!1,optional:!1},Ld=()=>null,Nd=()=>{},Dd=()=>!1,Vd=()=>!0,Fd=()=>Pt,_d="custom-element",qd=K(_d),Ud=t=>`${qd}:${t}`,zd=(t=>()=>"unnamed-"+ ++t)(0),Kd=(t,e)=>{const s=Bd.create(t,e),i=s.Type;return Sh(s,i,qd,z),i},Hd=(t,e=jd)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Ml.get(t,qd);if(null===s){if(!0===e.optional)return null;throw Jh(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Ml.get(t,qd);if(null===s)throw Jh(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Ml.get(s,qd);if(null!==t&&(i=!0,t.is(e.name)))return t;s=Ad(s)}if(i)return;throw Jh(764,t)}let s=t;for(;null!==s;){const t=Ml.get(s,qd);if(null!==t)return t;s=Ad(s)}throw Jh(765,t)},Gd=(t,e)=>xh(Rh(e),t),Wd=t=>{const e=xh(qd,t)??al(t,_d,Bd.create);if(null==e)throw Jh(760,t);return e},Xd=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Fh(n,"name",t),i!==e&&Bh(n.prototype,i),n}}(),Jd=Mh({name:qd,keyFrom:Ud,isType:t=>m(t)&&(Th(qd,t)||t.$au?.type===_d),for:Hd,define:Kd,getDefinition:Wd,annotate:(t,e,s)=>{Sh(s,t,Rh(e))},getAnnotation:Gd,generateName:zd,createInjectable:()=>{const t={$isInterface:!1,register:()=>({$isResolver:!0,resolve:(e,s)=>s.has(t,!0)?s.get(t):null})};return t},generateType:Xd,find(t,e){const s=t.find(_d,e);return null==s?null:xh(qd,s)??al(s,_d,Bd.create)??null}}),Yd=sl("IAppRoot");class Qd{get controller(){return this.P}constructor(t,e,s,i=!1){this.config=t,this.container=e,this.pe=void 0,this.ve=i;const n=this.host=t.host;s.prepare(this),ol(e,$d,new Ot("IEventTarget",n)),Id(e,n,this.platform=this.xe(e,n)),this.pe=M(this.ye("creating"),()=>{0!=!t.allowActionlessForm&&n.addEventListener("submit",t=>{const e=t.target,s=!e.getAttribute("action");"FORM"===e.tagName&&s&&t.preventDefault()},!1);const s=i?e:e.createChild(),r=t.component;let o;m(r)?(o=s.invoke(r),rl(r,o)):o=t.component;const a={hydrate:!1,projections:null},h=i?Bd.create({name:zd(),template:this.host,enhance:!0,strict:t.strictBinding}):void 0,l=this.P=Lu.$el(s,o,n,a,h);return l.hE(a),M(this.ye("hydrating"),()=>(l.hS(),M(this.ye("hydrated"),()=>{l.hC(),this.pe=void 0})))})}activate(){return M(this.pe,()=>M(this.ye("activating"),()=>M(this.P.activate(this.P,null,void 0),()=>this.ye("activated"))))}deactivate(){return M(this.ye("deactivating"),()=>M(this.P.deactivate(this.P,null),()=>this.ye("deactivated")))}ye(t){const e=this.container,s=this.ve&&!e.has(Rl,!1)?[]:e.getAll(Rl);return B(...s.reduce((e,s)=>(s.slot===t&&e.push(s.run()),e),[]))}xe(t,e){let s;if(t.has(Il,!1))s=t.get(Il);else{if(null===e.ownerDocument.defaultView)throw Jh(769);s=new bh(e.ownerDocument.defaultView),t.register(rl(Il,s))}return s}dispose(){this.P?.dispose()}}const Zd=sl("IAurelia");class tp{get isRunning(){return this.ir}get isStarting(){return this.we}get isStopping(){return this.be}get root(){if(null==this.ke){if(null==this.next)throw Jh(767);return this.next}return this.ke}constructor(t=xt.createContainer()){if(this.container=t,this.ir=!1,this.we=!1,this.be=!1,this.ke=void 0,this.next=void 0,this.Ce=void 0,this.Be=void 0,t.has(Zd,!0)||t.has(tp,!0))throw Jh(768);ol(t,Zd,new Ot("IAurelia",this)),ol(t,tp,new Ot("Aurelia",this)),ol(t,Yd,this.Se=new Ot("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new Qd(t,this.container,this.Se),this}enhance(t){const e=t.container??this.container.createChild(),s=ol(e,Yd,new Ot("IAppRoot")),i=new Qd({host:t.host,component:t.component},e,s,!0);return M(i.activate(),()=>i)}async waitForIdle(){const t=this.root.platform;await t.domQueue.yield(),await t.taskQueue.yield()}start(t=this.next){if(null==t)throw Jh(770);return c(this.Ce)?this.Ce:this.Ce=M(this.stop(),()=>(Ml.hideProp||Reflect.set(t.host,"$aurelia",this),this.Se.prepare(this.ke=t),this.we=!0,M(t.activate(),()=>{this.ir=!0,this.we=!1,this.Ce=void 0,this.Ae(t,"au-started",t.host)})))}stop(t=!1){if(c(this.Be))return this.Be;if(!0===this.ir){const e=this.ke;return this.ir=!1,this.be=!0,this.Be=M(e.deactivate(),()=>M(ro||(so.length>0||no>0?ro??=new Promise((t,e)=>{ao=t,ho=e}):Zr.then(()=>(so.length>0||no>0)&&(ro??=new Promise((t,e)=>{ao=t,ho=e})))),()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.ke=void 0,this.Se.dispose(),this.be=!1,this.Be=void 0,this.Ae(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.be)throw Jh(771);this.container.dispose()}Ae(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const ep=sl("ISVGAnalyzer",t=>t.singleton(sp));class sp{isStandardSvgAttribute(t,e){return!1}}class ip{constructor(){this.fns=[],this.Le=b(),this.Me=b(),this.svg=lt(ep),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){let e,s,i,n;for(i in t)for(n in e=t[i],s=this.Le[i]??=b(),e){if(void 0!==s[n])throw np(n,i);s[n]=e[n]}}useGlobalMapping(t){const e=this.Me;for(const s in t){if(void 0!==e[s])throw np(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some(s=>s(t,e))}map(t,e){return this.Le[t.nodeName]?.[e]??this.Me[e]??(Dh(t,e,this.svg)?e:null)}}function np(t,e){return Jh(719,t,e)}ip.register=_(Vi);const rp={register(t){t.register(fr,ip,ap)}};class op{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}class ap{constructor(){this.De=new WeakMap,this.Pe=new WeakMap}el(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new hp),e in s.qe?s.qe[e]:s.qe[e]=Jd.find(t,e)}attr(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new hp),e in s.Ie?s.Ie[e]:s.Ie[e]=zl.find(t,e)}bindables(t){let e=this.Pe.get(t);if(null==e){const s=t.bindables,i=b();let n,r,o,a,h=!1;for(r in s){if(n=s[r],a=n.attribute,!0===n.primary){if(h)throw Jh(714,t);h=!0,o=n}else h||null!=o||(o=n);i[a]=tl.create(r,n)}null==n&&"custom-attribute"===t.type&&(o=i.value=tl.create("value",{mode:t.defaultBindingMode??wh})),this.Pe.set(t,e=new op(i,s,o??null))}return e}}ap.register=_(xr);class hp{constructor(){this.qe=b(),this.Ie=b()}}const lp=b();class cp{static forNs(t){return lp[t]??=new cp(t)}constructor(t){this.ns=t,this.type=Wh|Xh}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}qc(cp);class up{constructor(){this.type=Wh|Xh}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}qc(up);const dp=new up;class pp{static _e(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=Ph.call(i,"model")?i.model:i.value),++n;return e}static Ve(t,e){return t===e}constructor(t,e,s,i){this.type=Wh|Gh|Xh,this.v=void 0,this.ov=void 0,this.Fe=!1,this.He=void 0,this.Oe=void 0,this.iO=!1,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.lt.multiple?pp._e(this.lt.options):this.lt.value}setValue(t){this.ov=this.v,this.v=t,this.Fe=t!==this.ov,this.$e(t instanceof Array?t:null),this.gt()}gt(){this.Fe&&(this.Fe=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.lt,s=u(t),i=e.matcher??pp.Ve,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Ph.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex(t=>!!i(o,t)):!!i(o,t)}}syncValue(){const t=this.lt,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||pp.Ve,a=[];for(;n<s;)r=e[n],r.selected&&a.push(Ph.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex(t=>!!o(h,t))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex(t=>!!o(h,t))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=Ph.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}ct(){(this.Oe=Ic(this.lt,this.Ne.bind(this))).observe(this.lt,{childList:!0,subtree:!0,characterData:!0}),this.$e(this.v instanceof Array?this.v:null),this.iO=!0}ut(){this.Oe.disconnect(),this.He?.unsubscribe(this),this.Oe=this.He=void 0,this.iO=!1}$e(t){if(this.He?.unsubscribe(this),this.He=void 0,null!=t){if(!this.lt.multiple)throw Jh(654);(this.He=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.Tt()}Ne(t){this.syncOptions(),this.syncValue()&&this.Tt()}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}_c(pp),Co(pp,null);class fp{constructor(t){this.obj=t,this.type=Wh|Xh,this.v="",this.ov="",this.styles={},this.version=0,this.Fe=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.Fe=t!==this.ov,this.gt()}We(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}je(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if(v(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([T(s),e])}else i.push(...this.ze(e));return i}Ue(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.ze(t[i]));return s}return Pt}ze(t){return v(t)?this.We(t):t instanceof Array?this.Ue(t):t instanceof Object?this.je(t):Pt}gt(){if(this.Fe){this.Fe=!1;const t=this.v,e=this.styles,s=this.ze(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const l=s.length;for(;h<l;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Ph.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&m(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}qc(fp);class gp{constructor(t,e,s){this.type=Wh|Gh|Xh,this.v="",this.ov="",this.Fe=!1,this.ht=!1,this.lt=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){w(t,this.v)||(this.ov=this.v,this.v=t,this.Fe=!0,this.cf.readonly||this.gt())}gt(){this.Fe&&(this.Fe=!1,this.lt[this.k]=this.v??this.cf.default,this.Tt())}handleEvent(){this.ov=this.v,this.v=this.lt[this.k],this.ov!==this.v&&(this.Fe=!1,this.Tt())}ct(){this.v=this.ov=this.lt[this.k]}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}_c(gp),Co(gp,null);const mp=(()=>{const t="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";return Bh(b(),{"xlink:actuate":["actuate",t],"xlink:arcrole":["arcrole",t],"xlink:href":["href",t],"xlink:role":["role",t],"xlink:show":["show",t],"xlink:title":["title",t],"xlink:type":["type",t],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",s],"xmlns:xlink":["xlink",s]})})(),vp=new Da;vp.type=Wh|Xh;class bp{constructor(){this.allowDirtyCheck=!0,this.Ge=b(),this.Xe=b(),this.Ke=b(),this.Qe=b(),this.Ye=lt(St),this.p=lt(Il),this.Ze=lt(Ba),this.svg=lt(ep);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:Cp,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:pp,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},i={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:i,scrollLeft:i,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Ge;let n;if(v(t))n=i[t]??=b(),null==n[e]?n[e]=s:wp(t,e);else for(const s in t){n=i[s]??=b();const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:wp(s,e)}}useConfigGlobal(t,e){const s=this.Xe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:wp("*",e);else null==s[t]?s[t]=e:wp("*",t)}getAccessor(t,e,s){if(e in this.Qe||e in(this.Ke[t.tagName]??Mt))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return dp;default:{const s=mp[e];return void 0!==s?cp.forNs(s[1]):Dh(t,e,this.svg)?dp:vp}}}overrideAccessor(t,e){let s;if(v(t))s=this.Ke[t]??=b(),s[e]=!0;else for(const e in t)for(const i of t[e])s=this.Ke[e]??=b(),s[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Qe[e]=!0}getNodeObserverConfig(t,e){return this.Ge[t.tagName]?.[e]??this.Xe[e]}getNodeObserver(t,e,s){const i=this.Ge[t.tagName]?.[e]??this.Xe[e];let n;return null!=i?(n=new(i.type??gp)(t,e,i,s,this.Ye),n.doNotCache||(Xa(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Uc(t);case"css":case"style":return new fp(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=mp[e];if(void 0!==n)return cp.forNs(n[1]);if(Dh(t,e,this.svg))return dp;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Ze.createProperty(t,e);throw Jh(652,e)}return new Va(t,e)}}function wp(t,e){throw Jh(653,t,e)}function yp(t,e){return t===e}bp.register=_(qa);class Cp{constructor(t,e,s,i){this.type=Wh|Gh|Xh,this.v=void 0,this.ov=void 0,this.Je=void 0,this.ti=void 0,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ei(),this.ii(),this.Tt())}handleCollectionChange(){this.ii()}handleChange(t,e){this.ii()}ii(){const t=this.v,e=this.lt,s=Ph.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:yp;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(u(t))i=-1!==t.findIndex(t=>!!n(t,s));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.lt,s=Ph.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:yp;if("checkbox"===e.type){if(u(t)){const e=t.findIndex(t=>!!n(t,s));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.Tt()}ct(){this.ei()}ut(){this.v=this.ov=void 0,this.Je?.unsubscribe(this),this.ti?.unsubscribe(this),this.Je=this.ti=void 0}Tt(){kp=this.ov,this.ov=this.v,this.subs.notify(this.v,kp),kp=void 0}ei(){const t=this.lt;(this.ti??=t.$observers?.model??t.$observers?.value)?.subscribe(this),this.Je?.unsubscribe(this),this.Je=void 0,"checkbox"===t.type&&(this.Je=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let kp;_c(Cp),Co(Cp,null);class $p{bind(t,e){if(!(e instanceof gc))throw Jh(9994,e);e.useTargetObserver(dp)}}$p.$au={type:ll,name:"attr"};class xp{bind(t,e){if(!("handleEvent"in e))throw Jh(801);e.self=!0}unbind(t,e){e.self=!1}}xp.$au={type:ll,name:"self"};class Tp{constructor(){this.oL=lt(_a),this.si=lt(qa)}bind(t,e,...s){if(!(this.si instanceof bp))throw Jh(9993);if(0===s.length)throw Jh(802);if(!(e instanceof gc&&e.mode&kh))throw Jh(803);const i=this.si.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw Jh(9992,e);const n=this.si.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}Tp.$au={type:ll,name:"updateTrigger"};class Sp{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ni=!1,this.ri=0,this.oi=lt(Ac),this.l=lt(xd)}attaching(t,e){return this.li(this.value)}detaching(t,e){return this.ni=!0,M(this.pending,()=>{this.ni=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)})}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.li(t):void 0}li(t){const e=this.view,s=this.$controller,i=this.ri++,n=()=>!this.ni&&this.ri===i+1;let r;return M(this.pending,()=>this.pending=M(e?.deactivate(e,s),()=>{if(n()&&(r=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.oi.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=r))return r.setLocation(this.l),M(r.activate(r,s,s.scope),()=>{n()&&(this.pending=void 0)})}))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Sp.$au={type:Nl,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:t=>""===t||!!t&&"false"!==t}}};class Ap{constructor(){this.f=lt(Ac)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof Sp)r.elseFactory=this.f;else{if(!(r.viewModel instanceof Sp))throw Jh(810);r.viewModel.elseFactory=this.f}}}function Rp(t){t.dispose()}Ap.$au={type:"custom-attribute",name:"else",isTemplateController:!0};const Ep=["BindingBehavior","ValueConverter"];class Op{constructor(){this.views=[],this.key=null,this.hi=[],this.ai=[],this.ci=[],this.ui=new Map,this.fi=void 0,this.di=!1,this.mi=!1,this.gi=null,this.pi=void 0,this.xi=!1,this.l=lt(xd),this.yi=lt(od),this.f=lt(Ac),this.wi=lt(Lp);const t=lt(pn).props[0].props[0];if(void 0!==t){const{to:e,value:s,command:i}=t;if("key"!==e)throw Jh(776,e);if(null===i)this.key=s;else{if("bind"!==i)throw Jh(775,i);this.key=lt(ns).parse(s,zh)}}}binding(t,e){const s=this.yi.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.bi=n;let t=r.iterable;for(;null!=t&&Ep.includes(t.$kind);)t=t.expression,this.di=!0;this.gi=t;break}this.ki();const a=r.declaration;(this.xi="ArrayDestructuring"===a.$kind||"ObjectDestructuring"===a.$kind)||(this.local=Hr(a,this.$controller.scope,n,null))}attaching(t,e){return this.Ci(),this.Bi(void 0),this.Si(t,this.pi??Pt)}detaching(t,e){return this.ki(),this.Ai(t)}unbinding(t,e){this.ui.clear()}itemsChanged(){this.$controller.isActive&&(this.ki(),this.Ci(),this.Bi(void 0),this.Ri(void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.di){if(this.mi)return;return this.mi=!0,this.items=Hr(this.forOf.iterable,s.scope,this.bi,null),void(this.mi=!1)}this.Ci(),this.Bi(null===this.key?e:void 0),this.Ri(e)}}Ri(t){const e=this.views;this.hi=e.slice();const s=e.length,i=this.key,n=null!==i,r=this.ci,o=this.ai;if(n||void 0===t){const e=this.local,a=this.pi.length,h=this.forOf.declaration,l=this.bi,c=this.xi;t=yo(a);let u=0;if(0===s)for(;u<a;++u)t[u]=-2;else if(0===a)for(u=0;u<s;++u)t.deletedIndices.push(u),t.deletedItems.push(Hp(c,h,r[u],l,e));else if(n){const n=Array(s);for(u=0;u<s;++u)n[u]=Gp(c,i,h,r[u],l,e);const d=Array(s);for(u=0;u<a;++u)d[u]=Gp(c,i,h,o[u],l,e);for(u=0;u<a;++u)n.includes(d[u])?t[u]=n.indexOf(d[u]):t[u]=-2;for(u=0;u<s;++u)d.includes(n[u])||(t.deletedIndices.push(u),t.deletedItems.push(Hp(c,h,r[u],l,e)))}else{for(u=0;u<a;++u)r.includes(o[u])?t[u]=r.indexOf(o[u]):t[u]=-2;for(u=0;u<s;++u)o.includes(r[u])||(t.deletedIndices.push(u),t.deletedItems.push(Hp(c,h,r[u],l,e)))}}if(t.deletedIndices.length>0){const e=M(this.Ti(t),()=>this.Ei(t));c(e)&&e.catch(Vh)}else this.Ei(t)}ki(){const t=this.$controller.scope;let e,s=this.Li,i=this.di;i&&(s=this.Li=Hr(this.gi,t,this.bi,null)??null,i=this.di=!w(this.items,s));const n=this.fi;if(this.$controller.isActive){const t=i?s:this.items;e=this.fi=this.wi.resolve(t).getObserver?.(t),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))}else n?.unsubscribe(this),this.fi=void 0}Bi(t){const e=this.ai;this.ci=e.slice();const s=this.pi,i=s.length,n=this.ai=Array(s.length),r=this.ui,o=new Map,a=this.$controller.scope,h=this.bi,l=this.forOf,c=this.local,u=this.xi;if(void 0===t){const t=this.key;if(null!==t){const e=Array(i);if("string"==typeof t)for(let n=0;n<i;++n)e[n]=s[n][t];else for(let n=0;n<i;++n){const i=Xp(s[n],l,a,h,c,u);Kp(u,l.declaration,i,h,c,s[n]),e[n]=Hr(t,i,h,null)}for(let t=0;t<i;++t)n[t]=Wp(r,o,e[t],s[t],l,a,h,c,u)}else for(let t=0;t<i;++t)n[t]=Wp(r,o,s[t],s[t],l,a,h,c,u)}else{const r=e.length;for(let o=0;o<i;++o){const i=t[o];n[o]=i>=0&&i<r?e[i]:Xp(s[o],l,a,h,c,u),Kp(u,l.declaration,n[o],h,c,s[o])}}r.clear(),this.ui=o}Ci(){const t=this.items;if(u(t))return void(this.pi=t.slice(0));const e=[];this.wi.resolve(t).iterate(t,(t,s)=>{e[s]=t}),this.pi=e}Si(t,e){let s,i,n,r;const{$controller:o,f:a,l:h,ai:l}=this,u=e.length,d=this.views=Array(u);for(let e=0;e<u;++e)n=d[e]=a.create().setLocation(h),n.nodes.unlink(),r=l[e],jp(r.overrideContext,e,u),i=n.activate(t??n,o,r),c(i)&&(s??=[]).push(i);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}Ai(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),c(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ti(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices.slice().sort(Jp),a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n),c(s)&&(e??(e=[])).push(s);for(h=0;a>h;++h)r.splice(o[h]-h,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ei(t){let e,s,i,n=0;const{$controller:r,f:o,l:a,views:h,ai:l,hi:u}=this,d=t.length;for(;d>n;++n)-2===t[n]&&(i=o.create(),h.splice(n,0,i));if(h.length!==d)throw Jh(814,[h.length,d]);let p=0;for(n=0;n<t.length;++n)-2!==(p=t[n])&&(h[n]=u[p]);const f=function(t){const e=t.length;e>Ip&&(Ip=e,Pp=new Int32Array(e),Mp=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,l=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Pp[s],n=t[o],-2!==n&&n<i){Mp[r]=o,Pp[++s]=r;continue}for(a=0,h=s;a<h;)l=a+h>>1,n=t[Pp[l]],-2!==n&&n<i?a=l+1:h=l;n=t[Pp[a]],(i<n||-2===n)&&(a>0&&(Mp[r]=Pp[a-1]),Pp[a]=r)}r=++s;const c=new Int32Array(r);for(i=Pp[s-1];s-- >0;)c[s]=i,i=Mp[i];for(;r-- >0;)Pp[r]=0;return c}(t);let g,m=f.length-1;for(n=d-1;n>=0;--n)i=h[n],g=h[n+1],-2===t[n]?(i.nodes.link(g?.nodes??a),i.setLocation(a),jp(l[n].overrideContext,n,d),s=i.activate(i,r,l[n]),c(s)&&(e??(e=[])).push(s)):m<0||n!==f[m]?(i.nodes.link(g?.nodes??a),jp(i.scope.overrideContext,n,d),i.nodes.insertBefore(i.location)):(jp(i.scope.overrideContext,n,d),--m);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}dispose(){this.views.forEach(Rp),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}Op.$au={type:Nl,name:"repeat",isTemplateController:!0,bindables:["items"]};let Ip=16,Pp=new Int32Array(Ip),Mp=new Int32Array(Ip);class Bp{get $odd(){return!this.$even}get $even(){return this.$index%2==0}get $first(){return 0===this.$index}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(t=0,e=1){this.$index=t,this.$length=e}}const jp=(t,e,s)=>{t.$index=e,t.$length=s},Lp=sl("IRepeatableHandlerResolver",t=>t.singleton(Np));class Np{constructor(){this.Mi=lt(Nt(Dp))}resolve(t){if(Vp.handles(t))return Vp;if(Fp.handles(t))return Fp;if(_p.handles(t))return _p;if(qp.handles(t))return qp;if(Up.handles(t))return Up;const e=this.Mi.find(e=>e.handles(t));return void 0!==e?e:zp}}const Dp=sl("IRepeatableHandler"),Vp={handles:u,getObserver:Ha,iterate(t,e){const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)}},Fp={handles:d,getObserver:Ha,iterate(t,e){let s,i=0;for(s of t.keys())e(s,i++,t)}},_p={handles:p,getObserver:Ha,iterate(t,e){let s,i=0;for(s of t.entries())e(s,i++,t)}},qp={handles:t=>"number"==typeof t,iterate(t,e){let s=0;for(;s<t;++s)e(s,s,t)}},Up={handles:t=>null==t,iterate(){}},zp={handles:t=>!1,iterate(t,e){throw Jh(777,t)}},Kp=(t,e,s,i,n,r)=>{t?Kr(e,s,i,null,r):s.bindingContext[n]=r},Hp=(t,e,s,i,n)=>t?Hr(e,s,i,null):s.bindingContext[n],Gp=(t,e,s,i,n,r)=>"string"==typeof e?Hp(t,s,i,n,r)[e]:Hr(e,i,n,null),Wp=(t,e,s,i,n,r,o,a,h)=>{let l=t.get(s);if(void 0===l?l=Xp(i,n,r,o,a,h):l instanceof qr?t.delete(s):1===l.length?(l=l[0],t.delete(s)):l=l.shift(),e.has(s)){const t=e.get(s);t instanceof qr?e.set(s,[t,l]):t.push(l)}else e.set(s,l);return Kp(h,n.declaration,l,o,a,i),l},Xp=(t,e,s,i,n,r)=>{if(r){const n=qr.fromParent(s,new Ur,new Bp);Kr(e.declaration,n,i,null,t)}return qr.fromParent(s,new Ur(n,t),new Bp)},Jp=(t,e)=>t-e;class Yp{constructor(){this.view=lt(Ac).create().setLocation(lt(xd))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=qr.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=qr.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Yp.$au={type:Nl,name:"with",isTemplateController:!0,bindables:["value"]};class Qp{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=lt(Ac),this.l=lt(xd)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue(()=>s.activate(t,i,i.scope)),this.queue(()=>this.swap(t,this.value)),this.promise}detaching(t,e){return this.queue(()=>this.view.deactivate(t,this.$controller)),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(t){this.queue(()=>this.Di(t))}Di(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Pi(null):void 0;if(i>0&&s[0].id<t.id)return;const n=[];let r=t.fallThrough;if(r){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&r;t++){const s=e[t];n.push(s),r=s.fallThrough}}else n.push(t);return M(this.Pi(null,n),()=>(this.activeCases=n,this.qi(null)))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const n=this.defaultCase;return 0===s.length&&void 0!==n&&s.push(n),M(this.activeCases.length>0?this.Pi(t,s):void 0,()=>{if(this.activeCases=s,0!==s.length)return this.qi(t)})}qi(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const n=e.scope;return 1===i?s[0].activate(t,n):B(...s.map(e=>e.activate(t,n)))}Pi(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return M(B(...s.reduce((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s),[])),()=>{s.length=0})}}queue(t){const e=this.promise;let s;s=this.promise=M(M(e,t),()=>{this.promise===s&&(this.promise=void 0)})}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some(e=>e.accept(t))||void 0}}Qp.$au={type:Nl,name:"switch",isTemplateController:!0,bindables:["value"]};let Zp=0;const tf=["value",{name:"fallThrough",mode:yh,set(t){switch(t){case"true":return!0;case"false":return!1;default:return!!t}}}];class ef{constructor(){this.id=++Zp,this.fallThrough=!1,this.view=void 0,this.f=lt(Ac),this.Ye=lt(_a),this.l=lt(xd),this.Ii=lt(Qt).scopeTo(`Case-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof Qp))throw Jh(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Ii.debug("isMatch()");const e=this.value;return u(e)?(void 0===this.fi&&(this.fi=this._i(e)),e.includes(t)):e===t}valueChanged(t,e){u(t)?(this.fi?.unsubscribe(this),this.fi=this._i(t)):void 0!==this.fi&&this.fi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.fi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}_i(t){const e=this.Ye.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}}ql({name:"case",bindables:tf,isTemplateController:!0},ef);class sf extends ef{linkToSwitch(t){if(void 0!==t.defaultCase)throw Jh(816);t.defaultCase=this}}ql({name:"default-case",bindables:tf,isTemplateController:!0},sf);class nf{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=lt(Ac),this.l=lt(xd),this.p=lt(Il),this.logger=lt(Qt).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return M(s.activate(t,i,this.viewScope=qr.fromParent(i.scope,{})),()=>this.swap(t))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!c(e))return;const s=this.fulfilled,i=this.rejected,n=this.pending,r=this.viewScope;let o;const a=()=>{B(o=(this.preSettledTask=fo(()=>B(s?.deactivate(t),i?.deactivate(t),n?.activate(t,r)))).result.catch(t=>{throw t}),e.then(a=>{if(this.value!==e)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=fo(()=>B(n?.deactivate(t),i?.deactivate(t),s?.activate(t,r,a)))).result};this.preSettledTask.status===Hh?o.then(h):(this.preSettledTask.cancel(),h())},a=>{if(this.value!==e)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=fo(()=>B(n?.deactivate(t),s?.deactivate(t),i?.activate(t,r,a)))).result};this.preSettledTask.status===Hh?o.then(h):(this.preSettledTask.cancel(),h())}))};this.postSettledTask?.status===Hh?this.postSettlePromise.then(a):(this.postSettledTask?.cancel(),a())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}nf.$au={type:Nl,name:"promise",isTemplateController:!0,bindables:["value"]};class rf{constructor(){this.view=void 0,this.f=lt(Ac),this.l=lt(xd)}link(t,e,s,i){hf(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}rf.$au={type:Nl,name:"pending",isTemplateController:!0,bindables:{value:{mode:Ch}}};class of{constructor(){this.view=void 0,this.f=lt(Ac),this.l=lt(xd)}link(t,e,s,i){hf(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}of.$au={type:Nl,name:"then",isTemplateController:!0,bindables:{value:{mode:kh}}};class af{constructor(){this.view=void 0,this.f=lt(Ac),this.l=lt(xd)}link(t,e,s,i){hf(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}function hf(t){const e=t.parent,s=e?.viewModel;if(s instanceof nf)return s;throw Jh(813)}af.$au={type:Nl,name:"catch",isTemplateController:!0,bindables:{value:{mode:kh}}};class lf{"promise.resolve"(t,e){return new Qi(t,e,"promise","bind")}}lf[Symbol.metadata]={[Y]:sn.create([{pattern:"promise.resolve",symbols:""}],lf)};class cf{then(t,e){return new Qi(t,e,"then","from-view")}}cf[Symbol.metadata]={[Y]:sn.create([{pattern:"then",symbols:""}],cf)};class uf{catch(t,e){return new Qi(t,e,"catch","from-view")}}uf[Symbol.metadata]={[Y]:sn.create([{pattern:"catch",symbols:""}],uf)};class df{constructor(){this.Vi=!1,this.qe=lt(Bl),this.p=lt(Il)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Fi():this.Vi=!0}attached(){this.Vi&&(this.Vi=!1,this.Fi()),this.qe.addEventListener("focus",this),this.qe.addEventListener("blur",this)}detaching(){const t=this.qe;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Hi||(this.value=!1)}Fi(){const t=this.qe,e=this.Hi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Hi(){return this.qe===this.p.document.activeElement}}df.$au={type:Nl,name:"focus",bindables:{value:{mode:$h}}};class pf{constructor(){this.position="beforeend",this.strict=!1;const t=lt(Ac),e=lt(xd),s=lt(Il);this.p=s,this.Oi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.$i=Ec(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Sd.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)Sd.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Oi=this.Ni();return this.Wi(e,this.position),this.ji(t,e)}detaching(t){return this.zi(t,this.Oi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Ni();if(this.Oi===e)return;this.Oi=e;const s=M(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));c(s)&&s.catch(Vh)}positionChanged(){const{$controller:t,Oi:e}=this;if(!t.isActive)return;const s=M(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));c(s)&&s.catch(Vh)}ji(t,e){const{activating:s,callbackContext:i,view:n}=this;return M(s?.call(i,e,n),()=>this.Ui(t,e))}Ui(t,e){const{$controller:s,view:i}=this;return null!==t?M(i.activate(t??i,s,s.scope),()=>this.Gi(e)):(i.nodes.insertBefore(this.$i),this.Gi(e))}Gi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}zi(t,e){const{deactivating:s,callbackContext:i,view:n}=this;return M(s?.call(i,e,n),()=>this.Xi(t,e))}Xi(t,e){const{$controller:s,view:i}=this;return null!==t?M(i.deactivate(t,s),()=>this.Ki(e)):(i.nodes.remove(),this.Ki(e))}Ki(t){const{deactivated:e,callbackContext:s,view:i}=this;return M(e?.call(s,t,i),()=>this.Qi())}Ni(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw Jh(811);return e.body}if(v(s)){let n=e;v(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw Jh(812);return e.body}return s}Qi(){this.$i.remove(),this.$i.$start.remove()}Wi(t,e){const s=this.$i,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":Oc(t,null,r);break;case"afterbegin":Oc(t,t.firstChild,r);break;case"beforebegin":Oc(n,t,r);break;case"afterend":Oc(n,t.nextSibling,r);break;default:throw Jh(779,e)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}let ff;pf.$au={type:Nl,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};class gf{constructor(){this.Yi=null,this.Zi=null,this.ne=!1,this.expose=null,this.slotchange=null,this.Ji=new Set,this.fi=null;const t=lt(ad),e=lt(xd),s=lt(pn),i=lt(Su),n=this.name=s.data.name,r=s.projections?.[Mc],o=t.instruction?.projections?.[n],a=t.controller.container;let h,l;null==o?(l=a.createChild({inheritParentResources:!0}),h=i.getViewFactory(r??(ff??=Bd.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),l),this.ts=!1):(l=a.createChild(),l.useResources(t.parent.controller.container),ol(l,ad,new Ot(void 0,t.parent)),h=i.getViewFactory(o,l),this.ts=!0,this.es=a.getAll(Lc,!1)?.filter(t=>"*"===t.slotName||t.slotName===n)??Pt),this.ss=(this.es??=Pt).length>0,this.rs=t,this.view=h.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Ji.add(t)}unsubscribe(t){this.Ji.delete(t)}binding(t,e){for(this.Yi=e.scope;"synthetic"===e.vmKind&&e.parent?.viewModel instanceof gf;)e=e.parent.parent;const s=e.scope.bindingContext;let i;this.ts&&(i=this.rs.controller.scope.parent,(this.Zi=qr.fromParent(i,i.bindingContext)).overrideContext.$host=this.expose??s)}attaching(t,e){return M(this.view.activate(t,this.$controller,this.ts?this.Zi:this.Yi),()=>{(this.ss||m(this.slotchange))&&(this.es.forEach(t=>t.watch(this)),this.ei(),this.ls(),this.ne=!0)})}detaching(t,e){return this.ne=!1,this.cs(),this.es.forEach(t=>t.unwatch(this)),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.ts&&null!=this.Zi&&(this.Zi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ei(){if(null!=this.fi)return;const t=this.l,e=t.parentElement;null!=e&&(this.fi=Ic(e,e=>{vf(t,e)&&this.ls()})).observe(e,{childList:!0})}cs(){this.fi?.disconnect(),this.fi=null}ls(){const t=this.nodes,e=new Set(this.Ji);let s;for(s of(this.ne&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}}gf.$au={type:_d,name:"au-slot",template:null,containerless:!0,processContent(t,e,s){s.name=t.getAttribute("name")??Mc;let i=t.firstChild,n=null;for(;null!==i;)n=i.nextSibling,Pc(i)&&i.hasAttribute("au-slot")&&t.removeChild(i),i=n},bindables:["expose","slotchange"]};const mf=(t,e)=>t.compareDocumentPosition(e),vf=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===mf(t.$start,e)&&2===mf(t,e))return!0;if(i.length>0&&null!=n&&4===mf(t.$start,n)&&2===mf(t,n))return!0}};class bf{constructor(){this.scopeBehavior="auto",this.us=void 0,this.tag=null,this.c=lt(Tt),this.parent=lt(od),this.ds=lt(Bl),this.l=lt(xd),this.p=lt(Il),this.r=lt(Su),this.gs=lt(pn),this.ps=lt(function(t){return null==t?At:At(t)}(yf)),this.yt=lt(Di),this.it=lt(ad),this.ep=lt(ns),this.oL=lt(_a),this.ne=!1}get composing(){return this.xs}get composition(){return this.us}attaching(t,e){return this.ne=!0,this.xs=M(this.queue(new Cf(this.template,this.component,this.model,void 0),t),t=>{this.ps.ys(t)&&(this.xs=void 0)})}detaching(t){this.ne=!1;const e=this.us,s=this.xs;return this.ps.invalidate(),this.us=this.xs=void 0,M(s,()=>e?.deactivate(t))}propertyChanged(t){this.ne&&"composing"!==t&&"composition"!==t&&("model"!==t||null==this.us?"tag"===t&&this.us?.controller.vmKind===Ju||(this.xs=M(this.xs,()=>M(this.queue(new Cf(this.template,this.component,this.model,t),void 0),t=>{this.ps.ys(t)&&(this.xs=void 0)}))):this.us.update(this.model))}queue(t,e){const s=this.ps,i=this.us;return M(s.create(t),t=>s.ys(t)?M(this.compose(t),n=>s.ys(t)?M(n.activate(e),()=>s.ys(t)?(this.us=n,M(i?.deactivate(e),()=>t)):M(n.controller.deactivate(n.controller,this.$controller),()=>(n.controller.dispose(),t))):(n.controller.dispose(),t)):t)}compose(t){const{ws:e,bs:s,ks:i}=t.change,{c:n,$controller:r,l:o,gs:a}=this,h=this.Cs(this.it.controller.container,s),l=n.createChild(),c=this.p.document.createElement(null==h?this.tag??"div":h.name);let u;o.parentNode.insertBefore(c,o),u=null==h?null==this.tag?Rd(c):null:h.containerless?Rd(c):null;const d=()=>{if(c.remove(),null!=u){let t=u.$start.nextSibling,e=null;for(;null!==t&&t!==u;)e=t.nextSibling,t.remove(),t=e;u.$start?.remove(),u.remove()}},p=this.Bs(l,"string"==typeof s?h.Type:s,c,u),f=()=>{const s=a.captures??Pt;if(null!==h){const e=h.capture,[i,n]=s.reduce((t,s)=>(t[!(s.target in h.bindables)&&(!0===e||m(e)&&e(s.target))?0:1].push(s),t),[[],[]]),o=Lu.$el(l,p,c,{projections:a.projections,captures:i},h,u);return this.Ss(c,h,n).forEach(t=>o.addBinding(t)),new xf(o,t=>o.activate(t??o,r,r.scope.parent),t=>M(o.deactivate(t??o,r),d),t=>p.activate?.(t),t)}{const i=Bd.create({name:Jd.generateName(),template:e}),n=this.r.getViewFactory(i,l),o=Lu.$view(n,r),a="auto"===this.scopeBehavior?qr.fromParent(this.parent.scope,p):qr.create(p);return o.setHost(c),null==u?this.Ss(c,i,s).forEach(t=>o.addBinding(t)):o.setLocation(u),new xf(o,t=>o.activate(t??o,r,a),t=>M(o.deactivate(t??o,r),d),t=>p.activate?.(t),t)}};return"activate"in p?M(p.activate(i),()=>f()):f()}Bs(t,e,s,i){if(null==e)return new wf;if("object"==typeof e)return e;const n=this.p;Id(t,s,n),ol(t,xd,new Ot("IRenderLocation",i));const r=t.invoke(e);return ol(t,e,new Ot("au-compose.component",r)),r}Cs(t,e){if("string"==typeof e){const s=Jd.find(t,e);if(null==s)throw Jh(806,e);return s}const s=m(e)?e:e?.constructor;return Jd.isType(s,void 0)?Jd.getDefinition(s,null):null}Ss(t,e,s){const i=new hd(this.$controller,{projections:null,captures:s},this.it.parent);return Nc.create(i,t,e,this.r,this.yt,this.p,this.ep,this.oL)}}bf.$au={type:_d,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:t=>{if("scoped"===t||"auto"===t)return t;throw Jh(805,t)}},{name:"composing",mode:kh},{name:"composition",mode:kh},"tag"]};class wf{}class yf{constructor(){this.id=0}ys(t){return t.id===this.id}create(t){return M(t.load(),t=>new $f(++this.id,t))}invalidate(){this.id++}}class Cf{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}load(){return c(this.ws)||c(this.bs)?Promise.all([this.ws,this.bs]).then(([t,e])=>new kf(t,e,this.ks,this.As)):new kf(this.ws,this.bs,this.ks,this.As)}}class kf{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}}class $f{constructor(t,e){this.id=t,this.change=e}}class xf{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw Jh(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw Jh(808);default:this.state=-1}}}const Tf=sl("ISanitizer",t=>t.singleton(class{sanitize(){throw Jh(99,"sanitize")}}));class Sf{constructor(){this.Rs=lt(Tf)}toView(t){return null==t?null:this.Rs.sanitize(t)}}Sf.$au={type:Yl,name:"sanitize"};class Af{constructor(){this.el=lt(Bl),this.p=lt(Il),this.Ts=!1,this.L=!1,this.$val="",this.$prio="",this.update=()=>{this.L=!1,Boolean(this.value)!==this.Es&&(this.Es===this.Ls?(this.Es=!this.Ls,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Es=this.Ls,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=lt(pn);this.Es=this.Ls="hide"!==t.alias}binding(){this.Ts=!0,this.update()}detaching(){this.Ts=!1,this.L=!1}valueChanged(){this.Ts&&!this.L&&(this.L=!0,po(this.update))}}Af.$au={type:Nl,name:"show",bindables:["value"],aliases:["hide"]};const Rf=[rp,class{static register(t){t.register(F.singleton(this,this),F.aliasTo(this,Ba))}constructor(){this.tracked=[],this.q=null,this.K=0,this.p=lt(jt),this.check=()=>{if(ja.disabled)return;if(++this.K<ja.timeoutsPerCheck)return;this.K=0;const t=this.tracked.slice(0),e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},Co(La,null)}createProperty(t,e){if(ja.throw)throw _r(218,e);return new La(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.q=(t=>{const e=new vo(t,Math.max(0,0));return io.push(e),e.O(),e})(this.check))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.q.cancel(),this.q=null)}},bp],Ef=[rn,nn,on,Sc],Of=[zn,Fn,qn,_n,Un,Kn,Yn,Hn,Gn,Jn,Xn,Wn,Qn],If=[kl,vl,bl,wl,Tl,Al,yl,Sf,Sp,Ap,Op,Yp,Qp,ef,sf,nf,rf,of,af,lf,cf,uf,$p,xp,Tp,bf,pf,df,Af,gf],Pf=[nu,ru,su,iu,Yc,Qc,Zc,tu,eu,hu,pu,lu,cu,uu,du,ou,fu,gu],Mf=Bf(Bt);function Bf(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(rl(bo,s.coercingOptions),rs,...Rf,...If,...Ef,...Of,...Pf)},customize:e=>Bf(e??t)}}const jf=bh.getOrCreate(globalThis);class Lf extends tp{constructor(t=function(){return xt.createContainer().register(F.instance(Il,jf),Mf)}()){super(t)}static app(t){return(new Lf).app(t)}static enhance(t){return(new Lf).enhance(t)}static register(...t){return(new Lf).register(...t)}app(t){if(Jd.isType(t)){const e=Jd.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}const Nf=xt.createInterface("IValidationExpressionHydrator"),Df=n.get,Vf=n.define,Ff=n.delete,{annotation:_f}=H,qf=_f.keyFor,Uf=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),zf=Symbol.for("au:validation:explicit-message-key"),Kf=xt.createInterface("IValidationMessageProvider"),Hf=Object.freeze({aliasKey:qf("validation-rule-alias-message"),define(t,e,s){this.setDefaultMessage(t,e,s)},setDefaultMessage(t,{aliases:e},s){const i=s?Df(this.aliasKey,t):void 0;if(void 0!==i){const t={...Object.fromEntries(i.map(({name:t,defaultMessage:e})=>[t,e])),...Object.fromEntries(e.map(({name:t,defaultMessage:e})=>[t,e]))};e=S(Object.entries(t)).map(([t,e])=>({name:t,defaultMessage:e}))}Vf(e,t,this.aliasKey)},getDefaultMessages(t){const e=Df(this.aliasKey,t);return null!=e||t instanceof Function?e:Df(this.aliasKey,t.constructor)}});class Gf{get messageKey(){return this.t}set messageKey(t){this.t=t}constructor(t=void 0){this.tag=void 0,this.t=t}canExecute(t){return!0}execute(t,e){throw Uf(99,"execute")}accept(t){throw Uf(99,"accept")}}Gf.$TYPE="";class Wf extends Gf{constructor(){super("required")}execute(t){return null!=t&&!("string"==typeof t&&!/\S/.test(t))}accept(t){return t.visitRequiredRule(this)}}Wf.$TYPE="RequiredRule";class Xf extends Gf{constructor(t,e="matches"){super(e),this.pattern=t}execute(t){return null==t||0===t.length||this.pattern.test(t)}accept(t){return t.visitRegexRule(this)}}Xf.$TYPE="RegexRule";class Jf extends Gf{constructor(t,e){super(e?"maxLength":"minLength"),this.length=t,this.isMax=e}execute(t){return null==t||0===t.length||(this.isMax?t.length<=this.length:t.length>=this.length)}accept(t){return t.visitLengthRule(this)}}Jf.$TYPE="LengthRule";class Yf extends Gf{constructor(t,e){super(e?"maxItems":"minItems"),this.count=t,this.isMax=e}execute(t){return null==t||(this.isMax?t.length<=this.count:t.length>=this.count)}accept(t){return t.visitSizeRule(this)}}Yf.$TYPE="SizeRule";class Qf extends Gf{constructor(t,{min:e,max:s}){super(void 0!==e&&void 0!==s?t?"range":"between":void 0!==e?"min":"max"),this.isInclusive=t,this.min=Number.NEGATIVE_INFINITY,this.max=Number.POSITIVE_INFINITY,this.min=e??this.min,this.max=s??this.max}execute(t,e){return null==t||(this.isInclusive?t>=this.min&&t<=this.max:t>this.min&&t<this.max)}accept(t){return t.visitRangeRule(this)}}Qf.$TYPE="RangeRule";class Zf extends Gf{constructor(t){super("equals"),this.expectedValue=t}execute(t){return null==t||""===t||t===this.expectedValue}accept(t){return t.visitEqualsRule(this)}}Zf.$TYPE="EqualsRule";class tg extends Gf{get messageKey(){return this.i??this.t??void 0}set messageKey(t){this.i=t}constructor(t,e,s){super(void 0),this.validState=t,this.stateFunction=e,this.messages=s,this.i=null;const i=[];for(const[t,e]of Object.entries(s))i.push({name:t,defaultMessage:e});Hf.setDefaultMessage(this,{aliases:i},!1)}execute(t,e){return M(this.stateFunction(t,e),t=>(this.t=t,t===this.validState))}accept(t){}}tg.$TYPE="StateRule",Hf.define(Zf,{aliases:[{name:"equals",defaultMessage:"${$displayName} must be ${$rule.expectedValue}."}]},!1),Hf.define(Qf,{aliases:[{name:"min",defaultMessage:"${$displayName} must be at least ${$rule.min}."},{name:"max",defaultMessage:"${$displayName} must be at most ${$rule.max}."},{name:"range",defaultMessage:"${$displayName} must be between or equal to ${$rule.min} and ${$rule.max}."},{name:"between",defaultMessage:"${$displayName} must be between but not equal to ${$rule.min} and ${$rule.max}."}]},!1),Hf.define(Yf,{aliases:[{name:"minItems",defaultMessage:"${$displayName} must contain at least ${$rule.count} item${$rule.count === 1 ? '' : 's'}."},{name:"maxItems",defaultMessage:"${$displayName} cannot contain more than ${$rule.count} item${$rule.count === 1 ? '' : 's'}."}]},!1),Hf.define(Jf,{aliases:[{name:"minLength",defaultMessage:"${$displayName} must be at least ${$rule.length} character${$rule.length === 1 ? '' : 's'}."},{name:"maxLength",defaultMessage:"${$displayName} cannot be longer than ${$rule.length} character${$rule.length === 1 ? '' : 's'}."}]},!1),Hf.define(Xf,{aliases:[{name:"matches",defaultMessage:"${$displayName} is not correctly formatted."},{name:"email",defaultMessage:"${$displayName} is not a valid email."}]},!1),Hf.define(Wf,{aliases:[{name:"required",defaultMessage:"${$displayName} is required."}]},!1),Hf.define(Gf,{aliases:[{name:void 0,defaultMessage:"${$displayName} is invalid."}]},!1);const eg=xt.createInterface("ICustomMessages");class sg{constructor(t,e=void 0,s=void 0){this.expression=t,this.name=e,this.displayName=s}accept(t){return t.visitRuleProperty(this)}}sg.$TYPE="RuleProperty";const ig=Object.freeze({allRulesAnnotations:qf("validation-rules-annotations"),name:"validation-rules",defaultRuleSetName:"__default",set(t,e,s){const i=`${ig.name}:${s??ig.defaultRuleSetName}`;Vf(e,t,qf(i));const n=Df(this.allRulesAnnotations,t);void 0===n?Vf([i],t,this.allRulesAnnotations):n.push(i)},get(t,e){const s=qf(ig.name,e??ig.defaultRuleSetName);return Df(s,t)??Df(s,t.constructor)},unset(t,e){const s=Df(this.allRulesAnnotations,t);if(Array.isArray(s))for(const i of s.slice(0))if(i.startsWith(ig.name)&&(void 0===e||i.endsWith(e))){Ff(qf(i),t);const e=s.indexOf(i);e>-1&&s.splice(e,1)}},isValidationRulesSet(t){const e=Df(this.allRulesAnnotations,t);return void 0!==e&&e.some(t=>t.startsWith(ig.name))}});class ng{constructor(t,e,s,i,n,r){this.messageProvider=t,this.$displayName=e,this.$propertyName=s,this.$value=i,this.$rule=n,this.$object=r}$getDisplayName(t,e){return this.messageProvider.getDisplayName(t,e)}}class rg{constructor(t,e,s,i,n=[[]]){this.validationRules=e,this.messageProvider=s,this.property=i,this.$rules=n,this.l=t}accept(t){return t.visitPropertyRule(this)}addRule(t){return this.getLeafRules().push(this.latestRule=t),this}getLeafRules(){const t=this.$rules.length-1;return this.$rules[t]}async validate(t,e,s){void 0===s&&(s=qr.create({[cg]:t}));const i=this.property.expression;let n;n=void 0===i?t:Hr(i,s,this,null);let r=!0;const o=async s=>{const i=async e=>{let s=e.execute(n,t);s instanceof Promise&&(s=await s),r=r&&s;const{displayName:i,name:o}=this.property;let a;if(!s){const s=qr.create(new ng(this.messageProvider,this.messageProvider.getDisplayName(o,i),o,n,e,t));a=Hr(this.messageProvider.getMessage(e),s,this,null)}return new dg(s,a,o,t,e,this)},o=[];for(const n of s)!n.canExecute(t)||void 0!==e&&n.tag!==e||o.push(i(n));return Promise.all(o)};return this.$rules.reduce(async(t,e)=>t.then(async t=>r?(async(t,e)=>{const s=await o(e);return t.push(...s),t})(t,e):Promise.resolve(t)),Promise.resolve([]))}then(){return this.$rules.push([]),this}withMessageKey(t){return this.assertLatestRule(this.latestRule),this.latestRule.messageKey=t,this}withMessage(t){const e=this.latestRule;return this.assertLatestRule(e),this.messageProvider.setMessage(e,t,zf),this}when(t){return this.assertLatestRule(this.latestRule),this.latestRule.canExecute=t,this}tag(t){return this.assertLatestRule(this.latestRule),this.latestRule.tag=t,this}assertLatestRule(t){if(void 0===t)throw Uf(4101)}displayName(t){return this.property.displayName=t,this}satisfiesState(t,e,s){return this.addRule(new tg(t,e,s))}satisfies(t){const e=new class extends Gf{constructor(){super(...arguments),this.execute=t}};return this.addRule(e)}satisfiesRule(t){return this.addRule(t)}required(){return this.addRule(new Wf)}matches(t){return this.addRule(new Xf(t))}email(){return this.addRule(new Xf(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"email"))}minLength(t){return this.addRule(new Jf(t,!1))}maxLength(t){return this.addRule(new Jf(t,!0))}minItems(t){return this.addRule(new Yf(t,!1))}maxItems(t){return this.addRule(new Yf(t,!0))}min(t){return this.addRule(new Qf(!0,{min:t}))}max(t){return this.addRule(new Qf(!0,{max:t}))}range(t,e){return this.addRule(new Qf(!0,{min:t,max:e}))}between(t,e){return this.addRule(new Qf(!1,{min:t,max:e}))}equals(t){return this.addRule(new Zf(t))}ensure(t){return this.latestRule=void 0,this.validationRules.ensure(t)}ensureObject(){return this.latestRule=void 0,this.validationRules.ensureObject()}get rules(){return this.validationRules.rules}on(t,e){return this.validationRules.on(t,e)}}rg.$TYPE="PropertyRule",Xr(rg);const og=xt.createInterface("IValidationRules");class ag{constructor(){this.rules=[],this.targets=new Set,this.locator=lt(St),this.parser=lt(ns),this.messageProvider=lt(Kf),this.deserializer=lt(Nf)}ensure(t){const[e,s]=ug(t,this.parser);let i=this.rules.find(t=>t.property.name==e);return void 0===i&&(i=new rg(this.locator,this,this.messageProvider,new sg(s,e)),this.rules.push(i)),i}ensureObject(){const t=new rg(this.locator,this,this.messageProvider,new sg);return this.rules.push(t),t}on(t,e){const s=ig.get(t,e);return Object.is(s,this.rules)||(this.rules=s??[],ig.set(t,this.rules,e),this.targets.add(t)),this}off(t,e){const s=void 0!==t?[t]:Array.from(this.targets);for(const t of s)ig.unset(t,e),ig.isValidationRulesSet(t)||this.targets.delete(t)}applyModelBasedRules(t,e){const s=new Set;for(const i of e){const e=i.tag,n=this.deserializer.hydrateRuleset(i.ruleset,this);ig.set(t,n,e),s.add(e)}}}const hg=/^(?:function)?\s*\(?[$_\w\d]+\)?\s*(?:=>)?\s*\{(?:\s*["']{1}use strict["']{1};)?(?:[$_\s\w\d\/\*.['"\]+;\(\)]+)?\s*return\s+[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)\s*;?\s*\}$/,lg=/^\(?[$_\w\d]+\)?\s*=>\s*[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)$/,cg="$root";function ug(t,e){switch(typeof t){case"string":break;case"function":{const e=t.toString(),s=lg.exec(e)??hg.exec(e);if(null===s)throw Uf(4102,e);t=s[1].substring(1);break}default:throw Uf(4102,t)}return[t,e.parse(`${cg}.${t}`,"IsProperty")]}class dg{constructor(t,e,s,i,n,r,o=!1){this.valid=t,this.message=e,this.propertyName=s,this.object=i,this.rule=n,this.propertyRule=r,this.isManual=o,this.id=dg.nextId++}toString(){return this.valid?"Valid.":this.message}}dg.nextId=0;const pg=new Set(["displayName","propertyName","value","object","config","getDisplayName"]);class fg{constructor(t=lt(Qt),e=lt(eg)){this.registeredMessages=new WeakMap,this.parser=lt(ns),this.logger=t.scopeTo(fg.name);for(const{rule:t,aliases:s}of e)Hf.setDefaultMessage(t,{aliases:s},!0)}getMessage(t){const e=t.messageKey,s=this.registeredMessages.get(t);if(null!=s){const t=s.get(zf)??s.get(e);if(void 0!==t)return t}const i=Hf.getDefaultMessages(t);let n;return n=1===i.length&&void 0===e?i[0].defaultMessage:i.find(t=>t.name===e)?.defaultMessage,n||(n=Hf.getDefaultMessages(Gf)[0].defaultMessage),this.setMessage(t,n)}setMessage(t,e,s){const i=this.parseMessage(e),n=this.registeredMessages;let r=n.get(t);return void 0===r&&n.set(t,r=new Map),r.set(s??t.messageKey,i),i}parseMessage(t){const e=this.parser.parse(t,"Interpolation");if("Interpolation"===e?.$kind){for(const s of e.expressions){const e=s.name;if(pg.has(e)&&this.logger.warn(`Did you mean to use "$${e}" instead of "${e}" in this validation message template: "${t}"?`),"AccessThis"===s.$kind||s.ancestor>0)throw new Error("$parent is not permitted in validation message expressions.")}return e}return new _e(t)}getDisplayName(t,e){if(null!=e)return e instanceof Function?e():e;if(void 0===t)return;const s=t.toString().split(/(?=[A-Z])/).join(" ");return s.charAt(0).toUpperCase()+s.slice(1)}}var gg,mg;(mg=gg||(gg={})).BindingBehaviorExpression="BindingBehaviorExpression",mg.ValueConverterExpression="ValueConverterExpression",mg.AssignExpression="AssignExpression",mg.ConditionalExpression="ConditionalExpression",mg.AccessThisExpression="AccessThisExpression",mg.AccessBoundaryExpression="AccessBoundaryExpression",mg.AccessScopeExpression="AccessScopeExpression",mg.AccessMemberExpression="AccessMemberExpression",mg.AccessKeyedExpression="AccessKeyedExpression",mg.CallScopeExpression="CallScopeExpression",mg.CallMemberExpression="CallMemberExpression",mg.CallFunctionExpression="CallFunctionExpression",mg.BinaryExpression="BinaryExpression",mg.UnaryExpression="UnaryExpression",mg.PrimitiveLiteralExpression="PrimitiveLiteralExpression",mg.ArrayLiteralExpression="ArrayLiteralExpression",mg.ObjectLiteralExpression="ObjectLiteralExpression",mg.TemplateExpression="TemplateExpression",mg.TaggedTemplateExpression="TaggedTemplateExpression",mg.ArrayBindingPattern="ArrayBindingPattern",mg.ObjectBindingPattern="ObjectBindingPattern",mg.BindingIdentifier="BindingIdentifier",mg.ForOfStatement="ForOfStatement",mg.Interpolation="Interpolation",mg.DestructuringAssignment="DestructuringAssignment",mg.DestructuringSingleAssignment="DestructuringSingleAssignment",mg.DestructuringRestAssignment="DestructuringRestAssignment",mg.ArrowFunction="ArrowFunction",mg.Custom="Custom";class vg{static deserialize(t){const e=new vg,s=JSON.parse(t);return e.hydrate(s)}hydrate(t){switch(t.$TYPE){case gg.AccessMemberExpression:{const e=t;return new Pe(this.hydrate(e.object),e.name)}case gg.AccessKeyedExpression:{const e=t;return new Me(this.hydrate(e.object),this.hydrate(e.key))}case gg.AccessThisExpression:return new Re(t.ancestor);case gg.AccessBoundaryExpression:return new Ee;case gg.AccessScopeExpression:{const e=t;return new Oe(e.name,e.ancestor)}case gg.ArrayLiteralExpression:{const e=t;return new qe(this.hydrate(e.elements))}case gg.ObjectLiteralExpression:{const e=t;return new Ue(this.hydrate(e.keys),this.hydrate(e.values))}case gg.PrimitiveLiteralExpression:{const e=t;return new _e(this.hydrate(e.value))}case gg.CallFunctionExpression:{const e=t;return new Ne(this.hydrate(e.func),this.hydrate(e.args))}case gg.CallMemberExpression:{const e=t;return new Le(this.hydrate(e.object),e.name,this.hydrate(e.args))}case gg.CallScopeExpression:{const e=t;return new je(e.name,this.hydrate(e.args),e.ancestor)}case gg.TemplateExpression:{const e=t;return new ze(this.hydrate(e.cooked),this.hydrate(e.expressions))}case gg.TaggedTemplateExpression:{const e=t;return new Ke(this.hydrate(e.cooked),this.hydrate(e.raw),this.hydrate(e.func),this.hydrate(e.expressions))}case gg.UnaryExpression:{const e=t;return new Fe(e.operation,this.hydrate(e.expression))}case gg.BinaryExpression:{const e=t;return new Ve(e.operation,this.hydrate(e.left),this.hydrate(e.right))}case gg.ConditionalExpression:{const e=t;return new Se(this.hydrate(e.condition),this.hydrate(e.yes),this.hydrate(e.no))}case gg.AssignExpression:{const e=t;return new Te(this.hydrate(e.target),this.hydrate(e.value))}case gg.ValueConverterExpression:{const e=t;return new xe(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case gg.BindingBehaviorExpression:{const e=t;return new $e(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case gg.ArrayBindingPattern:{const e=t;return new He(this.hydrate(e.elements))}case gg.ObjectBindingPattern:{const e=t;return new Ge(this.hydrate(e.keys),this.hydrate(e.values))}case gg.BindingIdentifier:return new We(t.name);case gg.ForOfStatement:{const e=t;return new Xe(this.hydrate(e.declaration),this.hydrate(e.iterable),this.hydrate(e.semiIdx))}case gg.Interpolation:{const e=t;return new Je(this.hydrate(e.cooked),this.hydrate(e.expressions))}case gg.DestructuringAssignment:return new Ye(this.hydrate(t.$kind),this.hydrate(t.list),this.hydrate(t.source),this.hydrate(t.initializer));case gg.DestructuringSingleAssignment:return new Qe(this.hydrate(t.target),this.hydrate(t.source),this.hydrate(t.initializer));case gg.DestructuringRestAssignment:return new Ze(this.hydrate(t.target),this.hydrate(t.indexOrProperties));case gg.ArrowFunction:return new ts(this.hydrate(t.parameters),this.hydrate(t.body),this.hydrate(t.rest));default:if(Array.isArray(t))return"object"==typeof t[0]?this.deserializeExpressions(t):t.map(bg);if("object"!=typeof t)return bg(t);throw Uf(4100,t)}}deserializeExpressions(t){const e=[];for(const s of t)e.push(this.hydrate(s));return e}}function bg(t){if("string"==typeof t){if("null"===t)return null;if("undefined"===t)return;return t.substring(1,t.length-1)}return t}class wg{static register(t){this.container=t}static deserialize(t,e){const s=this.container.get(Kf),i=this.container.get(ns),n=new wg(this.container,s,i),r=JSON.parse(t);return n.hydrate(r,e)}constructor(t=lt(St),e=lt(Kf),s=lt(ns)){this.locator=t,this.messageProvider=e,this.parser=s,this.astDeserializer=new vg}hydrate(t,e){switch(t.$TYPE){case Wf.$TYPE:{const e=t,s=new Wf;return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Xf.$TYPE:{const e=t,s=e.pattern,i=this.astDeserializer,n=new Xf(new RegExp(i.hydrate(s.source),s.flags),e.messageKey);return n.tag=i.hydrate(e.tag),n}case Jf.$TYPE:{const e=t,s=new Jf(e.length,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Yf.$TYPE:{const e=t,s=new Yf(e.count,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Qf.$TYPE:{const e=t,s=new Qf(e.isInclusive,{min:e.min??Number.NEGATIVE_INFINITY,max:e.max??Number.POSITIVE_INFINITY});return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Zf.$TYPE:{const e=t,s=this.astDeserializer,i=new Zf("object"!=typeof e.expectedValue?s.hydrate(e.expectedValue):e.expectedValue);return i.messageKey=e.messageKey,i.tag=s.hydrate(e.tag),i}case sg.$TYPE:{const e=t,s=this.astDeserializer;let i=e.name;i="undefined"===i?void 0:s.hydrate(i);let n=e.expression;null!=n?n=s.hydrate(n):void 0!==i?[,n]=ug(i,this.parser):n=void 0;let r=e.displayName;return r="undefined"===r?void 0:s.hydrate(r),new sg(n,i,r)}case rg.$TYPE:{const s=t;return new rg(this.locator,e,this.messageProvider,this.hydrate(s.property,e),s.$rules.map(t=>t.map(t=>this.hydrate(t,e))))}}}hydrateRuleset(t,e){if(!Array.isArray(t))throw Uf(4104);return t.map(t=>this.hydrate(t,e))}}class yg{constructor(){this.astDeserializer=new vg,this.l=lt(St),this.messageProvider=lt(Kf),this.parser=lt(ns)}hydrate(t,e){throw Uf(99,"hydrate")}hydrateRuleset(t,e){const s=[],i=(t,n=[])=>{for(const[r,o]of t)if(this.isModelPropertyRule(o)){const t=o.rules.map(t=>Object.entries(t).map(([t,e])=>this.hydrateRule(t,e))),i=n.join("."),a=this.hydrateRuleProperty({name:""!==i?`${i}.${r}`:r,displayName:o.displayName});s.push(new rg(this.l,e,this.messageProvider,a,t))}else i(Object.entries(o),[...n,r])};return i(Object.entries(t)),s}hydrateRule(t,e){switch(t){case"required":return this.hydrateRequiredRule(e);case"regex":return this.hydrateRegexRule(e);case"maxLength":return this.hydrateLengthRule({...e,isMax:!0});case"minLength":return this.hydrateLengthRule({...e,isMax:!1});case"maxItems":return this.hydrateSizeRule({...e,isMax:!0});case"minItems":return this.hydrateSizeRule({...e,isMax:!1});case"range":return this.hydrateRangeRule({...e,isInclusive:!0});case"between":return this.hydrateRangeRule({...e,isInclusive:!1});case"equals":return this.hydrateEqualsRule(e);default:throw Uf(4105,t)}}setCommonRuleProperties(t,e){const s=t.messageKey;null!=s&&(e.messageKey=s),e.tag=t.tag;const i=t.when;if(i)if("string"==typeof i){const t=this.parser.parse(i,"None");e.canExecute=e=>Hr(t,qr.create({$object:e}),this,null)}else"function"==typeof i&&(e.canExecute=i)}isModelPropertyRule(t){return"object"==typeof t&&"rules"in t}hydrateRequiredRule(t){const e=new Wf;return this.setCommonRuleProperties(t,e),e}hydrateRegexRule(t){const e=t.pattern,s=new Xf(new RegExp(e.source,e.flags),t.messageKey);return s.tag=t.tag,s}hydrateLengthRule(t){const e=new Jf(t.length,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateSizeRule(t){const e=new Yf(t.count,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateRangeRule(t){const e=new Qf(t.isInclusive,{min:t.min,max:t.max});return this.setCommonRuleProperties(t,e),e}hydrateEqualsRule(t){const e=new Zf(t.expectedValue);return this.setCommonRuleProperties(t,e),e}hydrateRuleProperty(t){const e=t.name;if(!e||"string"!=typeof e)throw Uf(4106,typeof e);const[s,i]=ug(e,this.parser);return new sg(i,s,t.displayName)}}nc(yg);class Cg{constructor(t=void 0,e=void 0,s=void 0,i=void 0,n=void 0){this.object=t,this.propertyName=e,this.rules=s,this.objectTag=i,this.propertyTag=n}}const kg=xt.createInterface("IValidator");class $g{async validate(t){const e=t.object;let s=t.propertyName;const i=t.propertyTag,n=t.rules??ig.get(e,t.objectTag)??[],r=qr.create({[cg]:e});if(void 0!==s){let t=n.find(t=>t.property.name===s);return null==t&&"string"==typeof s&&s.startsWith("[")&&s.endsWith("]")&&(s=s.replaceAll("][",".").slice(1,-1),t=n.find(t=>t.property.name===s)),await(t?.validate(e,i,r))??[]}return(await Promise.all(n.map(async t=>t.validate(e,i,r)))).flat()}}function xg(){return{ValidatorType:$g,MessageProviderType:fg,CustomMessages:[],HydratorType:yg}}function Tg(t){return{optionsProvider:t,register(e){const s=xg();return t(s),e.register(F.instance(eg,s.CustomMessages),F.singleton(kg,s.ValidatorType),F.singleton(Kf,s.MessageProviderType),F.singleton(Nf,s.HydratorType),F.transient(og,ag),wg),e},customize:e=>Tg(e??t)}}const Sg=Tg(Bt);function Ag(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function Rg(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}"function"==typeof SuppressedError&&SuppressedError;const Eg=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);class Og{constructor(t,e,s){this.valid=t,this.results=e,this.instruction=s}}class Ig{constructor(t,e){this.result=t,this.targets=e}}class Pg{constructor(t,e,s){this.kind=t,this.addedResults=e,this.removedResults=s}}class Mg{constructor(t,e,s,i,n=void 0){this.sourceObserver=t,this.target=e,this.scope=s,this.rules=i,this.propertyInfo=n}}class Bg{constructor(t,e){this.object=t,this.propertyName=e}}function jg(t,e){let s=e.propertyInfo;if(void 0!==s)return s;const i=e.scope;let n,r=t.ast.expression,o=!0,a="";for(;void 0!==r&&"AccessScope"!==r?.$kind;){let s;switch(r.$kind){case"BindingBehavior":case"ValueConverter":r=r.expression;continue;case"AccessMember":s=r.name;break;case"AccessKeyed":{const n=r.key;o&&(o="PrimitiveLiteral"===n.$kind),s=`[${Hr(n,i,t,e.sourceObserver).toString()}]`;break}default:throw Eg(4205,r.constructor.name)}const n=a.startsWith("[")?"":".";a=0===a.length?s:`${s}${n}${a}`,r=r.object}if(void 0===r)throw Eg(4206,t.ast.expression);return 0===a.length?(a=r.name,n=i.bindingContext):n=Hr(r,i,t,e.sourceObserver),null!=n?(s=new Bg(n,a),o&&(e.propertyInfo=s),s):void 0}const Lg=xt.createInterface("IValidationController");class Ng{constructor(){this.bindings=new Map,this.subscribers=new Set,this.results=[],this.validating=!1,this.elements=new WeakMap,this.objects=new Map,this.validator=lt(kg),this.parser=lt(ns),this.platform=lt(Il),this.locator=lt(St)}addObject(t,e){this.objects.set(t,e)}removeObject(t){this.objects.delete(t),this.processResultDelta("reset",this.results.filter(e=>e.object===t),[])}addError(t,e,s){let i;void 0!==s&&([i]=ug(s,this.parser));const n=new dg(!1,t,i,e,void 0,void 0,!0);return this.processResultDelta("validate",[],[n]),n}removeError(t){this.results.includes(t)&&this.processResultDelta("reset",[t],[])}addSubscriber(t){this.subscribers.add(t)}removeSubscriber(t){this.subscribers.delete(t)}registerBinding(t,e){this.bindings.set(t,e)}unregisterBinding(t){this.resetBinding(t),this.bindings.delete(t)}async validate(t){const{object:e,objectTag:s}=t??{};let i;i=void 0!==e?[new Cg(e,t?.propertyName,t?.rules??this.objects.get(e),s,t?.propertyTag)]:[...Array.from(this.objects.entries()).map(([t,e])=>new Cg(t,void 0,e,s)),...Array.from(this.bindings.entries()).reduce((e,[i,n])=>{if(!i.isBound)return e;const r=jg(i,n);return void 0===r||this.objects.has(r.object)||e.push(new Cg(r.object,r.propertyName,n.rules,s,t?.propertyTag)),e},[])],this.validating=!0;const n=fo(async()=>{try{const e=await Promise.all(i.map(async t=>this.validator.validate(t))),s=e.reduce((t,e)=>(t.push(...e),t),[]),n=this.getInstructionPredicate(t),r=this.results.filter(n);return this.processResultDelta("validate",r,s),new Og(void 0===s.find(t=>!t.valid),s,t)}finally{this.validating=!1}});return n.result}reset(t){const e=this.getInstructionPredicate(t),s=this.results.filter(e);this.processResultDelta("reset",s,[])}async validateBinding(t){if(!t.isBound)return;const e=this.bindings.get(t);if(void 0===e)return;const s=jg(t,e),i=e.rules;if(void 0===s)return;const{object:n,propertyName:r}=s;await this.validate(new Cg(n,r,i))}resetBinding(t){const e=this.bindings.get(t);if(void 0===e)return;const s=jg(t,e);if(void 0===s)return;e.propertyInfo=void 0;const{object:i,propertyName:n}=s;this.reset(new Cg(i,n))}async revalidateErrors(){const t=this.results.reduce((t,{isManual:e,object:s,propertyRule:i,rule:n,valid:r})=>{if(!r&&!e&&void 0!==i&&void 0!==s&&void 0!==n){let e=t.get(s);void 0===e&&t.set(s,e=new Map);let r=e.get(i);void 0===r&&e.set(i,r=[]),r.push(n)}return t},new Map),e=[];for(const[s,i]of t)e.push(this.validate(new Cg(s,void 0,Array.from(i).map(([{validationRules:t,messageProvider:e,property:s},i])=>new rg(this.locator,t,e,s,[i])))));await Promise.all(e)}getInstructionPredicate(t){if(void 0===t)return()=>!0;const e=t.propertyName,s=t.rules;return i=>!i.isManual&&i.object===t.object&&(void 0===e||i.propertyName===e)&&(void 0===s||s.includes(i.propertyRule)||s.some(t=>void 0===i.propertyRule||t.$rules.flat().every(t=>i.propertyRule.$rules.flat().includes(t))))}getAssociatedElements({object:t,propertyName:e}){const s=[];for(const[i,n]of this.bindings.entries()){const r=jg(i,n);void 0!==r&&r.object===t&&r.propertyName===e&&s.push(n.target)}return s}processResultDelta(t,e,s){const i=new Pg(t,[],[]);s=s.slice(0);const n=this.elements;for(const t of e){const e=n.get(t);n.delete(t),i.removedResults.push(new Ig(t,e));const r=s.findIndex(e=>e.rule===t.rule&&e.object===t.object&&e.propertyName===t.propertyName);if(-1===r)this.results.splice(this.results.indexOf(t),1);else{const e=s.splice(r,1)[0],o=this.getAssociatedElements(e);n.set(e,o),i.addedResults.push(new Ig(e,o)),this.results.splice(this.results.indexOf(t),1,e)}}for(const t of s){const e=this.getAssociatedElements(t);i.addedResults.push(new Ig(t,e)),n.set(t,e),this.results.push(t)}for(const t of this.subscribers)t.handleValidationEvent(i)}}class Dg{constructor(){this.Type=void 0}registerTransformer(t){return!1}construct(t,e){return t.invoke(Ng,e)}}function Vg(t,e){switch(2&t.compareDocumentPosition(e)){case 0:return 0;case 2:return 1;default:return-1}}const Fg={name:"validation-container",shadowOptions:{mode:"open"},hasSlots:!0};let _g=(()=>{var t;let e,s,i=[],n=[],r=[],o=[];return t=class{constructor(){this.controller=Rg(this,i,void 0),this.errors=(Rg(this,n),Rg(this,r,[])),this.host=(Rg(this,o),lt(Bl)),this.scopedController=lt(Dt(Lg))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errors.findIndex(t=>t.result===e);-1!==t&&this.errors.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errors.push(new Ig(e,t))}this.errors.sort((t,e)=>t.targets[0]===e.targets[0]?0:Vg(t.targets[0],e.targets[0]))}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}},(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[Yh],s=[Yh],Ag(null,null,e,{kind:"field",name:"controller",static:!1,private:!1,access:{has:t=>"controller"in t,get:t=>t.controller,set:(t,e)=>{t.controller=e}},metadata:a},i,n),Ag(null,null,s,{kind:"field",name:"errors",static:!1,private:!1,access:{has:t=>"errors"in t,get:t=>t.errors,set:(t,e)=>{t.errors=e}},metadata:a},r,o),a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t})();class qg{constructor(){this.errors=[],this.errorsInternal=[],this.host=lt(Bl),this.scopedController=lt(Dt(Lg))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errorsInternal.findIndex(t=>t.result===e);-1!==t&&this.errorsInternal.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errorsInternal.push(new Ig(e,t))}this.errorsInternal.sort((t,e)=>t.targets[0]===e.targets[0]?0:Vg(t.targets[0],e.targets[0])),this.errors=this.errorsInternal}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}}var Ug;zl.define({name:"validation-errors",bindables:{controller:{},errors:{primary:!0,mode:Ni.twoWay}}},qg),function(t){t.manual="manual",t.blur="blur",t.focusout="focusout",t.change="change",t.changeOrBlur="changeOrBlur",t.changeOrFocusout="changeOrFocusout"}(Ug||(Ug={}));const zg=xt.createInterface("IDefaultTrigger"),Kg=new WeakMap,Hg=new WeakMap;class Gg{constructor(){this.p=lt(Il),this.oL=lt(_a)}bind(t,e){if(!(e instanceof gc))throw Eg(4200);let s=Kg.get(e);null==s&&Kg.set(e,s=new Wg(this.p,this.oL,e.get(zg),e,e.get(Tt)));let i=Hg.get(e);null==i&&Hg.set(e,i=new Xg(s,e,e.get(rc))),s.start(t),e.useTargetSubscriber(i)}unbind(t,e){Kg.get(e)?.stop()}}pl.define("validate",Gg);class Wg{constructor(t,e,s,i,n){this.isChangeTrigger=!1,this.isDirty=!1,this.validatedOnce=!1,this.triggerEvent=null,this.t=!1,this.propertyBinding=i,this.target=i.target,this.defaultTrigger=s,this.p=t,this.oL=e,this.l=n,this.i=new Yg("handleSourceChange",this,e,n),this.h=new Yg("handleTriggerChange",this,e,n),this.u=new Yg("handleControllerChange",this,e,n),this.V=new Yg("handleRulesChange",this,e,n),n.has(Lg,!0)&&(this.scopedController=n.get(Lg))}C(){this.isDirty=!0;const t=this.triggerEvent;this.isChangeTrigger&&(null===t||null!==t&&this.validatedOnce)&&this.validateBinding()}handleEvent(t){(!this.isChangeTrigger||this.isChangeTrigger&&this.isDirty)&&this.validateBinding()}start(t){this.scope=t,this.target=this.B();const e=this._();this.R(e)||null==this.bindingInfo||(this.controller?.registerBinding(this.propertyBinding,this.bindingInfo),this.controller?.addSubscriber(this))}stop(){this.t=!1,this.scope=void 0;const t=this.triggerEvent;null!==t&&this.target?.removeEventListener(t,this),this.controller?.resetBinding(this.propertyBinding),this.controller?.unregisterBinding(this.propertyBinding),this.controller?.removeSubscriber(this)}handleTriggerChange(t,e){this.R(new Jg(void 0,this.T(t),void 0))}handleControllerChange(t,e){this.R(new Jg(this.I(t),void 0,void 0))}handleRulesChange(t,e){this.R(new Jg(void 0,void 0,this.P(t)))}handleSourceChange(t,e){this.source!==t&&(this.source=t,this.bindingInfo.propertyInfo=void 0)}handleValidationEvent(t){if(this.validatedOnce||!this.isChangeTrigger)return;if(null===this.triggerEvent)return;const e=this.bindingInfo.propertyInfo?.propertyName;void 0!==e&&(this.validatedOnce=void 0!==t.addedResults.find(t=>t.result.propertyName===e))}_(){const t=this.scope;let e,s,i,n=this.propertyBinding.ast;for(;"validate"!==n.name&&void 0!==n;)n=n.expression;const r=n.args;for(let n=0,o=r.length;n<o;n++){const o=r[n];switch(n){case 0:s=this.T(Hr(o,t,this,this.h));break;case 1:i=this.I(Hr(o,t,this,this.u));break;case 2:e=this.P(Hr(o,t,this,this.V));break;default:throw Eg(4201,n+1,Hr(o,t,this,null))}}return new Jg(this.I(i),this.T(s),e)}validateBinding(){this.t||(this.t=!0,fo(()=>(this.t=!1,this.controller.validateBinding(this.propertyBinding))))}R(t){const e=t.trigger??this.trigger,s=t.controller??this.controller,i=t.rules;if(this.trigger!==e){let t=this.triggerEvent;null!==t&&this.target.removeEventListener(t,this),this.validatedOnce=!1,this.isDirty=!1,this.trigger=e,this.isChangeTrigger=e===Ug.change||e===Ug.changeOrBlur||e===Ug.changeOrFocusout,t=this.triggerEvent=this.A(this.trigger),null!==t&&this.target.addEventListener(t,this)}return(this.controller!==s||void 0!==i)&&(this.controller?.removeSubscriber(this),this.controller?.unregisterBinding(this.propertyBinding),this.controller=s,s.registerBinding(this.propertyBinding,this.M(i)),s.addSubscriber(this),!0)}T(t){if(null==t)t=this.defaultTrigger;else if(!Object.values(Ug).includes(t))throw Eg(4202,t);return t}I(t){if(null==t)t=this.scopedController;else if(!(t instanceof Ng))throw Eg(4203,t);return t}P(t){if(Array.isArray(t)&&t.every(t=>t instanceof rg))return t}B(){const t=this.propertyBinding.target;if(t instanceof this.p.Node)return t;{const e=t?.$controller;if(void 0===e)throw Eg(4204);return e.host}}A(t){let e=null;switch(t){case Ug.blur:case Ug.changeOrBlur:e="blur";break;case Ug.focusout:case Ug.changeOrFocusout:e="focusout"}return e}M(t){return this.bindingInfo=new Mg(this.i,this.target,this.scope,t)}}Io(Wg,null),Xr(Wg);class Xg extends sc{constructor(t,e,s){super(e,s),this.vs=t}handleChange(t,e){super.handleChange(t,e),this.vs.C()}}class Jg{constructor(t,e,s){this.controller=t,this.trigger=e,this.rules=s}}class Yg{constructor(t,e,s,i){this.key=t,this.binding=e,this.oL=s,this.l=i}handleChange(t,e){this.binding[this.key](t,e)}}function Qg(t){return{optionsProvider:t,register(e){const s={...xg(),ValidationControllerFactoryType:Dg,DefaultTrigger:Ug.focusout,UseSubscriberCustomAttribute:!0,SubscriberCustomElementTemplate:"\n<slot></slot>\n<slot name='secondary'>\n  <span repeat.for=\"error of errors\">\n    ${error.result.message}\n  </span>\n</slot>\n"};t(s),e.registerFactory(Lg,new s.ValidationControllerFactoryType),e.register(Sg.customize(t=>{for(const e of Object.keys(t))e in s&&(t[e]=s[e])}),F.instance(zg,s.DefaultTrigger),Gg),s.UseSubscriberCustomAttribute&&e.register(qg);const i=s.SubscriberCustomElementTemplate;return i&&e.register(Jd.define({...Fg,template:i},_g)),e},customize:e=>Qg(e??t)}}Io(Yg,null),Xr(Yg);const Zg=Qg(Bt);function tm(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function em(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}function sm(t,e,s){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const im="import-config-columns",nm='<template>\n<div class="row">\n    <div class="row mt-3">\n        <div class="col-sm-12">\n            <label\n                    class="form-label"\n                    for="search-input"\n                    id="search-label">Rechercher une colonne par nom</label>\n            <div class="col  flex justify-content-between">\n                <input\n                        class="form-control"\n                        id="search-input"\n                        type="text"\n                        value.bind="searchText"\n                        aria-describedby="search-label"\n                />\n                <button type="button" click.trigger="search($event)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-r-lg border border-blue-600 flex items-center">\n                    <svg fill="#ffff" height="24px" width="24px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" stroke="#ffff">\n<g id="SVGRepo_bgCarrier" stroke-width="0"/>\n<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>\n<g id="SVGRepo_iconCarrier"> <g> <g> <path d="M281.1,0c-127.318,0-230.9,103.582-230.9,230.9c0,45.12,13.019,87.25,35.483,122.853l-70.654,70.654 c-20.039,20.039-20.039,52.527,0,72.564c20.039,20.039,52.527,20.039,72.564,0l70.654-70.654 c35.605,22.464,77.735,35.483,122.853,35.483c127.318,0,230.9-103.582,230.9-230.9S408.42,0,281.1,0z M281.1,410.489 c-99.025,0-179.589-80.564-179.589-179.589S182.074,51.311,281.1,51.311S460.689,131.875,460.689,230.9 S380.127,410.489,281.1,410.489z"/> </g> </g> </g>\n</svg>\n                </button>\n            </div>\n\n        </div>\n    </div>\n    <div class="row mt-3" if.bind="pagination.pageCount > 0">\n        <div class="col-sm-12">\n            <p>${\'Page : \'+(pagination.page + 1)+\' / \'+pagination.pageCount}</p>\n        </div>\n        <nav class="col-sm-12" aria-label="Pagination">\n            <ul class="pagination">\n                <li class="page-item">\n                    <button type="button" class="bg-success page-link" click.trigger="changePage($event, pagination.page - 1)" disabled.bind="pagination.page <= 0">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7071 4.29289C12.0976 4.68342 12.0976 5.31658 11.7071 5.70711L6.41421 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H6.41421L11.7071 18.2929C12.0976 18.6834 12.0976 19.3166 11.7071 19.7071C11.3166 20.0976 10.6834 20.0976 10.2929 19.7071L3.29289 12.7071C3.10536 12.5196 3 12.2652 3 12C3 11.7348 3.10536 11.4804 3.29289 11.2929L10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289Z" fill="#ffffff"/>\n                        </svg>\n                    </button>\n                </li>\n                <li class="page-item"><p class="page-link">${pagination.page + 1}</p></li>\n                <li class="page-item">\n                    <button type="button" class="bg-success  page-link"  click.trigger="changePage($event, pagination.page + 1)"  disabled.bind="pagination.page >= (pagination.pageCount-1)">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.2929 4.29289C12.6834 3.90237 13.3166 3.90237 13.7071 4.29289L20.7071 11.2929C21.0976 11.6834 21.0976 12.3166 20.7071 12.7071L13.7071 19.7071C13.3166 20.0976 12.6834 20.0976 12.2929 19.7071C11.9024 19.3166 11.9024 18.6834 12.2929 18.2929L17.5858 13H4C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11H17.5858L12.2929 5.70711C11.9024 5.31658 11.9024 4.68342 12.2929 4.29289Z" fill="#ffffff"/>\n                        </svg>\n                    </button>\n                </li>\n            </ul>\n        </nav>\n    </div>\n    <div class="card mt-3" repeat.for="column of columns"  id.bind="column.id">\n        <div class="card-header  row align-items-center">\n            <div class="col-sm-8" innerHTML.bind="\'Colonne-\'+((column.order) ? column.order + 1 : \'en attente\')"></div>\n            <div class="col-sm-4">\n                <div class="row align-items-center">\n                    <div class="col  justify-content-end">\n                        <button type="button" class="btn btn-primary  p-0" click.trigger="move($event, $index, \'up\')" title="Monter" value.bind="$index" disabled.bind="$index == 0">\n                            <svg width="24px"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M15 11L12 8M12 8L9 11M12 8V16M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="col  justify-content-end">\n                        <button type="button" class="btn btn-primary  p-0" title="Descendre" click.trigger="move($event, $index, \'down\')" value.bind="$index" disabled.bind="$index == (columns.length - 1)">\n                            <svg width="24px"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M9 13L12 16M12 16L15 13M12 16V8M7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V7.2C20 6.0799 20 5.51984 19.782 5.09202C19.5903 4.71569 19.2843 4.40973 18.908 4.21799C18.4802 4 17.9201 4 16.8 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40973 4.40973 4.71569 4.21799 5.09202C4 5.51984 4 6.07989 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.07989 20 7.2 20Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="col  justify-content-end ">\n                        <button type="button" class="btn btn-danger  p-0" title="Supprimer" click.trigger="delete($event, column.id, $index)" value.bind="$index">\n                            <svg width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <fractal-cms-import-column model.bind="column" import-config-id.bind="id" index.bind="$index" table-columns.bind="tableColumns" transformers.bind="transformers" parent.bind="$parent"></fractal-cms-import-column>\n    </div>\n    <div class="row mt-3 items-end">\n        <div class="col-sm-2">\n            <button type="button" class="btn btn-outline-success" title="Ajouter" click.trigger="add($event)">\n                <svg width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M9 12H15" stroke="#198754" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                    <path d="M12 9L12 15" stroke="#198754" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                    <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#198754" stroke-width="2"/>\n                </svg>\n                <span>Ajouter</span>\n            </button>\n        </div>\n    </div>\n</div>\n\n</template>',rm=nm,om=[],am={};let hm;function lm(t){hm||(hm=Jd.define({name:im,template:nm,dependencies:om,bindables:am})),t.register(hm)}class cm{constructor(){this.cache=new Map,this.delete=t=>this.cache.delete(t),this.has=t=>this.cache.has(t),this.set=(t,e)=>this.cache.set(t,e),this.get=t=>this.cache.get(t),this.clear=()=>this.cache.clear()}}const um=xt.createInterface(t=>t.singleton(cm));class dm{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null,this.c=lt(Tt)}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:pm})}withRetry(t){const e=this.c.invoke(Im,[t]);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function pm(t){if(!t.ok)throw t;return t}const fm=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),gm=/^([a-z][a-z0-9+\-.]*:)?\/\//i,mm=xt.createInterface("fetch",t=>{if("function"!=typeof fetch)throw fm(5e3);return t.instance(fetch)}),vm=xt.createInterface("IHttpClient",t=>t.aliasTo(bm));class bm{constructor(){this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.t=[],this.i=null,this.h=lt(Vt(dm)),this.u=lt(mm)}get interceptors(){return this.t.slice(0)}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw fm(5002,typeof t);{e=this.h(),e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.t,e.dispatcher=this.i;const s=t(e);if(null!=s){if("object"!=typeof s)throw fm(5001,typeof s);e=s}}}const s=e.defaults;if(s?.headers instanceof Headers)throw fm(5003);const i=e.interceptors;if(i?.length>0){if(i.filter(t=>t instanceof Im).length>1)throw fm(5004);const t=i.findIndex(t=>t instanceof Im);if(t>=0&&t!==i.length-1)throw fm(5005)}return this.baseUrl=e.baseUrl,this.defaults=s,this.t=e.interceptors??[],this.i=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.C();let s=this.buildRequest(t,e);return this.processRequest(s,this.t).then(t=>{let e;if(t instanceof Response)e=Promise.resolve(t);else{if(!(t instanceof Request))throw fm(5006,t);s=t,e=this.u.call(void 0,s)}return this.processResponse(e,this.t,s)}).then(t=>t instanceof Request?this.fetch(t):t).then(t=>(this.R(),t),t=>{throw this.R(),t})}buildRequest(t,e){const s=this.defaults??{};let i,n,r;const o=function(t){const e={},s=t??{};for(const t of Object.keys(s))e[t]="function"==typeof s[t]?s[t]():s[t];return e}(s.headers);if(t instanceof Request)i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(function(t,e){return gm.test(e)?e:(t??"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=e??{};for(const e of Object.keys(s))t.has(e)||t.set(e,s[e])}(i.headers,o),n instanceof Blob&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.I(t,e,s,"POST")}put(t,e,s){return this.I(t,e,s,"PUT")}patch(t,e,s){return this.I(t,e,s,"PATCH")}delete(t,e,s){return this.I(t,e,s,"DELETE")}dispose(){this.t.forEach(t=>t.dispose?.()),this.t.length=0,this.i=null}C(){this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!=this.i&&Cm(this.i,km.started)}R(){this.isRequesting=!! --this.activeRequestCount,this.isRequesting||null==this.i||Cm(this.i,km.drained)}processRequest(t,e){return this.B(t,e,"request","requestError",Request,this)}processResponse(t,e,s){return this.B(t,e,"response","responseError",Response,s,this)}B(t,e,s,i,n,...r){return(e??[]).reduce((t,e)=>{const o=e[s],a=e[i];return t.then(o?t=>t instanceof n?o.call(e,t,...r):t:wm,a?t=>a.call(e,t,...r):ym)},Promise.resolve(t))}I(t,e,s,i){return s||(s={}),s.method=i,null!=e&&(s.body=e),this.fetch(t,s)}}function wm(t){return t}function ym(t){throw t}function Cm(t,e){const s=new t.ownerDocument.defaultView.CustomEvent(e,{bubbles:!0,cancelable:!0});setTimeout(()=>{t.dispatchEvent(s)},1)}const km=Object.freeze({started:"aurelia-fetch-client-request-started",drained:"aurelia-fetch-client-requests-drained"}),$m=xt.createInterface(t=>t.singleton(Tm)),xm=Object.freeze({Set:"au:fetch:cache:set",Get:"au:fetch:cache:get",Clear:"au:fetch:cache:clear",Reset:"au:fetch:cache:reset",Dispose:"au:fetch:cache:dispose",CacheHit:"au:fetch:cache:hit",CacheMiss:"au:fetch:cache:miss",CacheStale:"au:fetch:cache:stale",CacheStaleRefreshed:"au:fetch:cache:stale:refreshed",CacheExpired:"au:fetch:cache:expired",CacheBackgroundRefreshed:"au:fetch:cache:background:refreshed",CacheBackgroundRefreshing:"au:fetch:cache:background:refreshing",CacheBackgroundStopped:"au:fetch:cache:background:stopped"});class Tm{constructor(){this.storage=lt(um),this.p=lt(jt),this.ea=lt(ce),this.q=lt(vm),this.H=[],this.O=-1,this.j=[],this.T=new Map}subscribe(t,e){const s=this.ea.subscribe(t,e);return this.H.push(s),s}subscribeOnce(t,e){const s=this.ea.subscribeOnce(t,e);return this.H.push(s),s}setStaleTimer(t,e,s){const i=this.p.setTimeout(async()=>{this.delete(t),await this.q.get(s);const e=this.getItem(t);this.ea.publish(xm.CacheStaleRefreshed,{key:t,value:e}),this.N(i)},e);this.j.push(i)}startBackgroundRefresh(t){!t||this.O>-1||(this.O=this.p.setInterval(()=>{this.ea.publish(xm.CacheBackgroundRefreshing),this.T.forEach((t,e)=>{this.delete(e),this.q.get(t).then(()=>{const t=this.getItem(e);this.ea.publish(xm.CacheBackgroundRefreshed,{key:e,value:t})})})},t))}stopBackgroundRefresh(){this.p.clearInterval(this.O),this.O=-1,this.ea.publish(xm.CacheBackgroundStopped)}set(t,e,s,i){const n={data:e,...s};this.setItem(t,n,i)}get(t){return this.getItem(t)?.data}setItem(t,e,s){e.lastCached=Date.now(),this.storage.set(t,e),this.T.set(t,s),this.ea.publish(xm.Set,{key:t,value:e})}getItem(t){if(!this.storage.has(t))return void this.ea.publish(xm.CacheMiss,{key:t});const e=this.storage.get(t);if(!e?.staleTime||!e?.lastCached)return this.ea.publish(xm.CacheHit,{key:t,value:e}),e;const s=Date.now();if(s>e.lastCached+(e.staleTime??0))this.ea.publish(xm.CacheStale,{key:t,value:e});else{if(!(s>e.lastCached+(e.cacheTime??0)))return this.ea.publish(xm.CacheHit,{key:t,value:e}),e;this.ea.publish(xm.CacheExpired,{key:t,value:e})}}delete(t){this.storage.delete(t),this.ea.publish(xm.Clear,{key:t})}clear(){this.storage.clear(),this.T.clear(),this.ea.publish(xm.Reset),this.stopBackgroundRefresh(),this.j.forEach(t=>{this.p.clearTimeout(t)}),this.j.length=0}dispose(){this.clear(),this.H.forEach(t=>t.dispose()),this.ea.publish(xm.Dispose)}N(t){this.p.clearTimeout(t);const e=this.j.indexOf(t);e>-1&&this.j.splice(e,1)}}const Sm={cacheTime:3e5,staleTime:0,refreshStaleImmediate:!1,refreshInterval:0};class Am{constructor(t){this.P=lt($m),this.cf={...Sm,...t??{}}}request(t){if(this.P.startBackgroundRefresh(this.cf.refreshInterval),"GET"!==t.method)return t;const e=this.P.get(this.key(t));return this.mark(e)??t}response(t,e){if(!e)return t;if(t.headers.has(Am.cacheHeader))return t;const s=this.key(e);return this.P.setItem(s,{data:t,...this.cf},e),this.cf?.refreshStaleImmediate&&this.cf.staleTime>0&&this.P.setStaleTimer(s,this.cf.staleTime,e),t}dispose(){this.P.stopBackgroundRefresh()}key(t){return`${Am.prefix}${t.url}`}mark(t){return t?.headers.set(Am.cacheHeader,"hit"),t}}Am.prefix="au:interceptor:",Am.cacheHeader="x-au-fetch-cache";class Rm{constructor(){this.cache=lt(jt).globalThis.indexedDB,this.getStore=()=>this.database.transaction(Rm.cacheName,"readwrite").objectStore(Rm.cacheName),this.delete=t=>{this.getStore().delete(t)},this.has=t=>this.getStore().count(t).result>0,this.set=(t,e)=>this.getStore().put(e,t),this.get=t=>this.getStore().get(t).result,this.clear=()=>{const t=this.getStore();t.getAllKeys().result.forEach(e=>{t.delete(e)})},this.database=this.cache.open(Rm.cacheName).result}}Rm.cacheName="au-cache";const Em=Object.freeze({fixed:0,incremental:1,exponential:2,random:3}),Om={maxRetries:3,interval:1e3,strategy:Em.fixed};class Im{constructor(t){if(this.p=lt(jt),this.retryConfig={...Om,...t??{}},this.retryConfig.strategy===Em.exponential&&this.retryConfig.interval<=1e3)throw fm(5007,this.retryConfig.interval)}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return delete e.retryConfig,t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then(()=>{if(i.counter<i.maxRetries){const r=null==i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then(r=>{if(r){i.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case Em.fixed:return Pm[Em.fixed](e);case Em.incremental:return Pm[Em.incremental](r,e);case Em.exponential:return Pm[Em.exponential](r,e);case Em.random:return Pm[Em.random](r,e,i,n);default:throw fm(5008,s)}}(i);return new Promise(e=>this.p.setTimeout(e,isNaN(t)?0:t)).then(()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t}).then(t=>{const e={...t,retryConfig:i};return s.fetch(e)})}throw delete e.retryConfig,t})}throw delete e.retryConfig,t})}}const Pm=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s];class Mm{constructor(){}getApiBaseUrl(){return this.apiBaseUrl||(this.apiBaseUrl=window.apiBaseUrl?window.apiBaseUrl:"fractal-cms"),this.apiBaseUrl}}const Bm=xt.createInterface("IHttpService",t=>t.singleton(jm));class jm{constructor(t=lt(vm),e=lt(Mm),s=lt(Qt).scopeTo("HttpService")){this.httpClient=t,this.configService=e,this.logger=s,this.logger.trace("constructor"),this.httpClient.configure(t=>(t.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}).withInterceptor({request:t=>(console.log(`Requesting ${t.method} ${t.url}`),t),response:t=>(console.log(`Received ${t.status} ${t.url}`),t)}).rejectErrorResponses(),t))}delete(t,e=null){return null==e&&(e={headers:{Accept:"application/json","Content-Type":"text/plain"}}),e.method="DELETE",this.fetch(t,e,null)}getJson(t,e=null,s=null){return null===e&&(e={headers:{Accept:"application/json","Content-Type":"application/json"}}),e.method||(e.method="GET"),this.fetch(t,e,s)}fetchJson(t,e=null,s=null){return null===e&&(e={headers:{Accept:"application/json","Content-Type":"application/json"}}),e.method||(e.method="POST"),this.fetch(t,e,s)}fetch(t,e=null,s=null){return null==e&&(e={headers:{Accept:"*/*"}}),null!=s&&(e.body=JSON.stringify(s)),this.httpClient.fetch(t,e).then(t=>{const e=t.headers,s=t.status,i=t.statusText,n=e.get("Content-Type");let r=t;return r=-1!==n.indexOf("json")?t.json():-1!==n.indexOf("text")?t.text():t.blob(),Promise.all([s,i,e,r])}).then(([t,e,s,i])=>{const n={status:t,statusText:e,headers:s,data:i,extras:{}};return n.extras=this.buildExtrasHeaders(s),n})}buildExtrasHeaders(t){const e={pagination:{}},s={page:-1,pageCount:-1,pageSize:-1,totalCount:-1};return t.forEach((t,e)=>{switch(e.trim().toLowerCase()){case"x-pagination-current-page":s.page=parseInt(t);break;case"x-pagination-total-page":s.pageCount=parseInt(t);break;case"x-pagination-per-page":s.pageSize=parseInt(t);break;case"x-pagination-total-entries":s.totalCount=parseInt(t)}}),s.page>-1&&s.pageCount>-1&&s.pageSize>-1&&s.totalCount>-1&&(e.pagination=s),e}}class Lm{constructor(t=lt(vm),e=lt(Mm),s=lt(Bm),i=lt(Qt).scopeTo("ApiServices")){this.httpClient=t,this.configService=e,this.httpService=s,this.logger=i,this.logger.trace("constructor")}get(t){return this.httpService.getJson(t,null,null).then(t=>t.data)}post(t,e){return this.httpService.fetchJson(t,null,e).then(t=>t.data)}delete(t){return this.httpService.delete(t,null).then(t=>t.data)}getColumns(t){return this.httpService.getJson(t,null,null).then(t=>{var e;return[t.data,null===(e=t.extras)||void 0===e?void 0:e.pagination]})}getTransformer(t){return this.httpService.getJson(t,null,null).then(t=>t.data)}postColumns(t,e){return this.httpService.fetchJson(t,null,e).then(t=>t.data)}getTableColumns(t){return this.httpService.getJson(t,null,null).then(t=>t.data)}}var Nm;!function(t){t.IMPORT_CONFIG_JSON_GET="/api/import-config/{id}",t.IMPORT_CONFIG_JSON_GET_COLUMNS="/api/import-config/{id}/get-columns",t.IMPORT_CONFIG_JSON_POST_COLUMNS="/api/import-config/{id}/post-columns",t.IMPORT_CONFIG_JSON_DELETE_COLUMN="/api/import-config/{id}/columns/{columnId}/delete",t.DB_GET_TABLE_COLUMNS="/api/import-config/{id}/table-columns",t.DB_GET_TABLE_COLUMNS_BY_NAME="/api/import-config/{id}/table-columns/{name}",t.DB_GET_TABLES="/api/db/tables",t.GET_TRANSFORMERS="/api/import-config/transformers"}(Nm||(Nm={}));class Dm{constructor(t=lt(Qt),e=lt(og)){this.logger=t,this.validationRules=e,this.logger=t.scopeTo("Column"),this.logger.trace("constructor"),this.initValidationRules(this.validationRules)}toJson(){return{id:this.id,source:this.source,target:this.target,type:this.format,order:this.order,default:this.default,transformerOptions:this.transformerOptions,transformer:this.transformer.toJson()}}initValidationRules(t){this.logger.trace("initValidationRules"),t.on(this).ensure("source").required().withMessage("Le source est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)).withMessage("La source doit être une string").ensure("target").required().withMessage("Le target est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)).withMessage("La Cible doit être une string").ensure("format").required().withMessage("Le format est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)).withMessage("Le format doit être une string").ensure("default").then().satisfies((t,e)=>!t||"string"==typeof t).withMessage("Le default doit être une string").ensure("transformerOptions").required().then().satisfies((t,e)=>!(!t&&this.transformer)).withMessage("Les options sont obligatoires")}}class Vm{constructor(t=lt(Qt),e=lt(og)){this.logger=t,this.validationRules=e,this.logger=t.scopeTo("Transformer"),this.logger.trace("constructor"),this.initValidationRules(this.validationRules),this.optionsSchema=[]}toJson(){return{name:this.name,description:this.description,optionsSchema:this.optionsSchema}}initValidationRules(t){if(this.logger.trace("initValidationRules"),t.on(this).ensure("name").required().withMessage("Le name est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t)),this.optionsSchema)for(const e in this.optionsSchema)this.optionsSchema[e].required&&t.on(this.optionsSchema[e]).ensure(e).required().withMessage("Le "+this.optionsSchema[e].key+" est obligatoire").then().satisfies((t,e)=>!(!t||""==t.toString()||"string"!=typeof t))}}let Fm=(()=>{let t,s,i,n=[Pd(Object.assign(Object.assign({},e),{name:"fractal-cms-import-columns"}))],r=[],o=[],a=[];return s=class{constructor(t=lt(Qt),e=lt(ce),s=lt(Il),i=lt(Bl),n=lt(zt(Lg)),r=lt(og),h=lt(Mm),l=lt(Lm)){this.logger=t,this.ea=e,this.platform=s,this.element=i,this.validationController=n,this.validationRules=r,this.configService=h,this.apiServices=l,this.id=em(this,o,void 0),this.model=em(this,a),this.logger=t.scopeTo("ImportConfigColumns"),this.logger.trace("constructor"),this.model={},this.columns=[],this.tmpConfigColumns=[],this.tableColumns=[],this.transformers=[],this.pagination={}}binding(){this.logger.trace("binding",this.id)}attached(){this.logger.trace("attached",this.id);const t=this.configService.getApiBaseUrl()+Nm.IMPORT_CONFIG_JSON_GET.replace("{id}",this.id),e=this.configService.getApiBaseUrl()+Nm.GET_TRANSFORMERS;let s=this.configService.getApiBaseUrl()+Nm.DB_GET_TABLE_COLUMNS.replace("{id}",this.id).replace("{name}",null);const i=this.apiServices.get(t),n=this.apiServices.getTransformer(e),r=this.apiServices.getTableColumns(s);Promise.all([i,n,r]).then(t=>{this.model=t[0],this.transformers=t[1],this.tableColumns=t[2];const e=this.prepareGetUrl(this.id);this.getColumns(e)})}search(t){this.logger.trace("search",this.searchText),t.preventDefault();let e=this.prepareGetUrl(this.id,null,this.searchText);this.getColumns(e)}changePage(t,e){this.logger.trace("changePage",e),this.pagination.page=e,t.preventDefault();let s=this.prepareGetUrl(this.id,e,this.searchText);this.getColumns(s)}changeTransform(t,e){this.logger.trace("changeTransform"),t.preventDefault(),this.columns[e]&&this.logger.trace("changeTransform",this.columns[e])}getColumns(t){const e=this.apiServices.getColumns(t);Promise.all([e]).then(t=>{this.tmpConfigColumns=t[0][0],this.pagination=t[0][1],this.loadColumns()})}move(t,e,s){this.logger.trace("move",e,s),t.preventDefault();const i="up"==s?e-1:e+1;if(this.columns[e]&&this.columns[i]){const t=this.columns[e].order;this.columns[e].order=this.columns[i].order,this.columns[i].order=t}const n=this.columns.splice(e,1);this.columns.splice(i,0,n[0]),this.platform.taskQueue.queueTask(()=>{this.save()},{delay:50})}delete(t,e,s){if(this.logger.trace("delete",e),t.preventDefault(),e){let t=this.configService.getApiBaseUrl()+Nm.IMPORT_CONFIG_JSON_DELETE_COLUMN.replace("{id}",this.id);t=t.replace("{columnId}",e);const s=this.apiServices.delete(t);Promise.all([s]).then(t=>{this.logger.trace("delete : OK",e)})}this.remove(s)}remove(t){this.logger.trace("remove");const e=this.columns.splice(t,1);this.validationController.removeObject(e[0])}add(t){this.logger.trace("add"),t.preventDefault();const e=new Dm(this.logger,this.validationRules);this.validationController.addObject(e),this.columns.push(e),this.platform.taskQueue.queueTask(()=>{this.validate()},{delay:50})}validate(){this.validationController.validate().then(t=>{t.valid||this.logger.trace("validate:error",t.results)}).catch(t=>{this.logger.trace("validate:error",t)})}save(){this.logger.trace("save"),this.validationController.validate().then(t=>{if(t.valid){this.logger.trace("save: success");const t=this.configService.getApiBaseUrl()+Nm.IMPORT_CONFIG_JSON_POST_COLUMNS.replace("{id}",this.id),e=this.columns.map((t,e)=>t.toJson());return this.apiServices.post(t,e).then(t=>{this.logger.trace("save")})}this.logger.trace("onSubmit:error",t.results)}).catch(t=>{this.logger.trace("save:error",t)})}loadColumns(){this.tmpConfigColumns&&(this.columns.splice(0,this.columns.length),this.tmpConfigColumns.forEach((t,e)=>{let s=Object.assign(t,{});const i=new Dm(this.logger,this.validationRules);if(Object.assign(i,s),s.transformer){let t=Object.assign(s.transformer,{});i.transformer=new Vm(this.logger,this.validationRules),Object.assign(i.transformer,t)}this.validationController.addObject(i),this.columns.push(i)}),this.logger.trace("loadColumns",this.columns))}prepareGetUrl(t,e=null,s=null){this.logger.trace("prepareGetUrl");let i=this.configService.getApiBaseUrl()+Nm.IMPORT_CONFIG_JSON_GET_COLUMNS.replace("{id}",t),n={};e&&(n.page=e),s&&(n.search=s);const r=new URLSearchParams(n).toString();return r&&(i+="?"+r),i}},sm(s,"ImportConfigColumns"),(()=>{const e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[Yh],tm(null,null,i,{kind:"field",name:"id",static:!1,private:!1,access:{has:t=>"id"in t,get:t=>t.id,set:(t,e)=>{t.id=e}},metadata:e},o,a),tm(null,t={value:s},n,{kind:"class",name:s.name,metadata:e},null,r),s=t.value,e&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e}),em(s,r)})(),s})();const _m="column",qm='<template>\n    <div class="card-body">\n        <div class="row">\n            <input\n                    id.bind="\'hidden-id-\'+model.id"\n                    value.bind="model.id"\n                    type="hidden"\n                    name.bind="\'ImportConfig[tmpColumns][\'+index+\'][id]\'"\n            />\n            <input\n                    id.bind="\'hidden-order-\'+model.id"\n                    value.bind="model.order"\n                    type="hidden"\n                    name.bind="\'ImportConfig[tmpColumns][\'+index+\'][order]\'"\n            />\n            <div class="col-sm--3 form-group p-2" validation-errors.from-view="model.sourceErrors">\n                <label class="form-label" for.bind="\'source-\'+model.id" id="labelSource">Colonne Source</label>\n                <div class="form-control p-0"   class.bind="model.sourceErrors.length ? \'error\' : \'\'">\n                    <input\n                            type="text"\n                            value.bind="model.source & validate"\n                            placeholder="Saisisser ou sélectionner une colonne source"\n                            name.bind="\'ImportConfig[tmpColumns][\'+index+\'][source]\'"\n                            class="form-control border-0"\n                            input.trigger="updateSelectColumns($event)"\n                            id.bind="\'source-\'+model.id"\n                            aria-describedby="labelSource"\n                            aria-required="true"\n                            aria-invalid.bind="model.sourceErrors.length ? \'true\' : \'false\'"\n                            required\n                    />\n                    <select\n                            if.bind="tableColumns.length > 0"\n\n                            class="mt-3 form-select border border-gray-800 columns"\n                            id.bind="\'search-\'+index+model.id"\n                            change.trigger="changeSelect($event)"\n                            value.bind="model.search"\n                    >\n                        <option value="">Colonnes disponible</option>\n                        <option repeat.for="tableColumn of tableColumns"  value.bind="tableColumn.source">\n                            ${tableColumn.target}\n                        </option>\n                    </select>\n                </div>\n                <p class="error-message" repeat.for="error of model.sourceErrors" id.bind="\'model.sourceErrors\'+model.id">${error.result.message}</p>\n            </div>\n            <div class="col-sm--3 form-group p-2" validation-errors.from-view="model.targetErrors">\n                <label class="form-label" for.bind="\'target-\'+model.id" id="labelTarget">Colonne cible</label>\n                <input\n                        class="form-control"\n                        id.bind="\'target-\'+model.id"\n                        type="text"\n                        name.bind="\'ImportConfig[tmpColumns][\'+index+\'][target]\'"\n                        value.bind="model.target & validate"\n                        class.bind="model.targetErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labelTarget"\n                        aria-required="true"\n                        aria-invalid.bind="model.targetErrors.length ? \'true\' : \'false\'"\n                        required\n                />\n                <p class="error-message" repeat.for="error of model.targetErrors" id.bind="\'model.targetErrors\'+model.id">${error.result.message}</p>\n\n            </div>\n            <div class="col-sm--3 form-group p-2" validation-errors.from-view="model.formatErrors">\n                <label class="form-label"  for.bind="\'format-\'+model.id" id="labelFormat">Format de données</label>\n                <select\n                        class="form-control"\n                        id.bind="\'format-\'+model.id"\n                        value.bind="model.format & validate"\n                        name.bind="\'ImportConfig[tmpColumns][\'+index+\'][format]\'"\n                        class.bind="model.formatErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labelFormat"\n                        aria-required="true"\n                        aria-invalid.bind="model.formatErrors.length ? \'true\' : \'false\'"\n                        required\n                >\n                    <option value="">Sélectionner un format de donnée</option>\n                    <option value="pk">pk</option>\n                    <option value="upk">upk</option>\n                    <option value="bigpk">bigpk</option>\n                    <option value="ubigpk">ubigpk</option>\n                    <option value="char">char</option>\n                    <option value="string">string</option>\n                    <option value="text">text</option>\n                    <option value="tinyint">tinyint</option>\n                    <option value="smallint">smallint</option>\n                    <option value="integer">integer</option>\n                    <option value="bigint">bigint</option>\n                    <option value="float">float</option>\n                    <option value="double">double</option>\n                    <option value="decimal">decimal</option>\n                    <option value="datetime">datetime</option>\n                    <option value="timestamp">timestamp</option>\n                    <option value="time">time</option>\n                    <option value="date">date</option>\n                    <option value="binary">binary</option>\n                    <option value="boolean">boolean</option>\n                    <option value="money">money</option>\n                    <option value="json">json</option>\n                </select>\n                <p class="error-message" repeat.for="error of model.formatErrors" id.bind="\'model.formatErrors\'+model.id">${error.result.message}</p>\n\n            </div>\n            <div class="col-sm--3 form-group p-2" validation-errors.from-view="model.defaultErrors">\n                <label class="form-label" for.bind="\'default-\'+model.id" id="labelDefault">Valeur par défaut</label>\n                <input\n                        class="form-control"\n                        id.bind="\'default-\'+model.id"\n                        type="text"\n                        name.bind="\'ImportConfig[tmpColumns][\'+index+\'][default]\'"\n                        value.bind="model.default & validate"\n                        class.bind="model.defaultErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labelDefault"\n                        aria-required="true"\n                        aria-invalid.bind="model.defaultErrors.length ? \'true\' : \'false\'"\n                />\n                <p class="error-message" repeat.for="error of model.defaultErrors" id.bind="\'model.defaultErrors\'+model.id">${error.result.message}</p>\n            </div>\n            <div class="col-sm--3 form-group p-2" validation-errors.from-view="model.transformerErrors">\n                <label class="form-label" for.bind="\'transformer-\'+model.id" id="labelTransformer">Transformeur de donnée</label>\n                <select\n                        class="form-control"\n                        id.bind="\'transformer-\'+model.id"\n                        matcher.bind="transformerMatcher"\n                        value.bind="model.transformer & validate"\n                        name.bind="\'ImportConfig[tmpColumns][\'+index+\'][transformer][name]\'"\n                        class.bind="model.transformerErrors.length ? \'error\' : \'\'"\n                        aria-describedby="labeltransformer"\n                        aria-invalid.bind="model.transformerErrors.length ? \'true\' : \'false\'"\n                >\n                    <option value="">Sélectionner une transformation</option>\n                    <option repeat.for="transformer of transformers"  model.bind="transformer" value.bind="transformer.name">\n                        ${transformer.name}\n                    </option>\n                </select>\n                <div class="mt-2" if.bind="model.transformer && model.transformer.optionsSchema">\n                    <div class="text-pretty">${model.transformer.description}</div>\n                    <div class="row" repeat.for="option of model.transformer.optionsSchema">\n                        <div class="col-sm-3  form-group" validation-errors.from-view="model.transformer.optionsSchema[$parent.$index].keyErrors">\n                            <label\n                                    class="form-label"\n                                    for.bind="\'transformer-\'+model.id+\'-\'+model.transformer.name+option.key"\n                                    id.bind="\'transformerOptions-\'+model.id+\'-\'+option.key+\'-label-\'+$parent.$index">\n                                ${option.label}\n                            </label>\n                            <input\n                                    id.bind="\'transformer-\'+model.id+\'-\'+model.transformer.name+option.key"\n                                    class="form-control"\n                                    name.bind="\'ImportConfig[tmpColumns][\'+index+\'][transformerOptions][\'+option.key+\']\'"\n                                    type.bind="option.type"\n                                    value.bind="model.transformerOptions[option.key] & validate"\n                                    aria-describedby.bind="\'transformerOptions-\'+model.id+\'-\'+option.key+\'-label-\'+$parent.index"\n                                    aria-required.bind="option.required"\n                                    aria-invalid.bind="model.transformer.transformerOptions[index].keyErrors.length ? \'true\' : \'false\'"\n                                    required.bind="option.required"\n                            >\n                        </div>\n                    </div>\n                </div>\n                <p class="error-message" repeat.for="error of model.transformerErrors" id.bind="\'model.transformerErrors\'+model.id">${error.result.message}</p>\n            </div>\n        </div>\n    </div>\n</template>',Um=qm,zm=[],Km={};let Hm;function Gm(t){Hm||(Hm=Jd.define({name:_m,template:qm,dependencies:zm,bindables:Km})),t.register(Hm)}let Wm=(()=>{let t,e,i,n,r,o,a,h,l=[Pd(Object.assign(Object.assign({},s),{name:"fractal-cms-import-column"}))],c=[],u=[],d=[],p=[],f=[],g=[],m=[],v=[],b=[],w=[],y=[],C=[],k=[];return e=class{constructor(t=lt(Qt),e=lt(Bl),s=lt(Mm),i=lt(Lm)){this.logger=t,this.element=e,this.configService=s,this.apiServices=i,this.model=em(this,u,void 0),this.importConfigId=(em(this,d),em(this,p,void 0)),this.parent=(em(this,f),em(this,g,void 0)),this.index=(em(this,m),em(this,v,void 0)),this.tableColumns=(em(this,b),em(this,w,void 0)),this.transformers=(em(this,y),em(this,C,void 0)),this.inputSelect=em(this,k),this.transformerMatcher=(t,e)=>t&&"object"==typeof t&&t.hasOwnProperty("name")&&e&&"object"==typeof e&&e.hasOwnProperty("name")&&t.name==e.name,this.logger=t.scopeTo("ImportConfigColumns"),this.logger.trace("constructor"),this.searchText=null,this.model={},this.tableColumns=[],this.transformers=[]}binding(){this.logger.trace("binding",this.model)}attached(){this.logger.trace("attached",this.model),this.inputSelect=this.element.querySelector(".columns"),this.inputSelect&&(this.inputSelect.style.display="none")}updateSelectColumns(t){this.logger.trace("updateSelectColumns"),t.preventDefault();let e=this.configService.getApiBaseUrl()+Nm.DB_GET_TABLE_COLUMNS.replace("{id}",this.importConfigId);this.model.source&&(e=this.configService.getApiBaseUrl()+Nm.DB_GET_TABLE_COLUMNS_BY_NAME.replace("{id}",this.importConfigId).replace("{name}",this.model.source));const s=this.apiServices.getTableColumns(e);Promise.all([s]).then(t=>{this.tableColumns=t[0],this.inputSelect&&this.tableColumns.length>0&&(this.inputSelect.style.display="block")})}changeSelect(t){this.logger.trace("changeSelect"),t.preventDefault(),this.inputSelect&&this.inputSelect.querySelectorAll("option").forEach((t,e)=>{t.value&&t.selected&&(this.model.source=t.value)})}},sm(e,"Column"),(()=>{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[Yh()],n=[Yh()],r=[Yh()],o=[Yh()],a=[Yh()],h=[Yh()],tm(null,null,i,{kind:"field",name:"model",static:!1,private:!1,access:{has:t=>"model"in t,get:t=>t.model,set:(t,e)=>{t.model=e}},metadata:s},u,d),tm(null,null,n,{kind:"field",name:"importConfigId",static:!1,private:!1,access:{has:t=>"importConfigId"in t,get:t=>t.importConfigId,set:(t,e)=>{t.importConfigId=e}},metadata:s},p,f),tm(null,null,r,{kind:"field",name:"parent",static:!1,private:!1,access:{has:t=>"parent"in t,get:t=>t.parent,set:(t,e)=>{t.parent=e}},metadata:s},g,m),tm(null,null,o,{kind:"field",name:"index",static:!1,private:!1,access:{has:t=>"index"in t,get:t=>t.index,set:(t,e)=>{t.index=e}},metadata:s},v,b),tm(null,null,a,{kind:"field",name:"tableColumns",static:!1,private:!1,access:{has:t=>"tableColumns"in t,get:t=>t.tableColumns,set:(t,e)=>{t.tableColumns=e}},metadata:s},w,y),tm(null,null,h,{kind:"field",name:"transformers",static:!1,private:!1,access:{has:t=>"transformers"in t,get:t=>t.transformers,set:(t,e)=>{t.transformers=e}},metadata:s},C,k),tm(null,t={value:e},l,{kind:"class",name:e.name,metadata:s},null,c),e=t.value,s&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s}),em(e,c)})(),e})();void 0!==webpackBaseUrl&&(t.p=webpackBaseUrl);const Xm=document.querySelector("body");Lf.register(i).register(Zg.customize(t=>{t.DefaultTrigger=Ug.blur})).enhance({host:Xm,component:class{constructor(t=lt(Qt)){this.logger=t,this.logger=t.scopeTo("ImportExportApp")}binding(){this.logger.trace("binding")}attaching(){this.logger.trace("Attaching")}}})})();